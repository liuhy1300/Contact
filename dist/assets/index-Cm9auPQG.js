(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function L0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pm={exports:{}},nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function RO(){if(xx)return nc;xx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:o}}return nc.Fragment=e,nc.jsx=n,nc.jsxs=n,nc}var Sx;function DO(){return Sx||(Sx=1,Pm.exports=RO()),Pm.exports}var S=DO(),Hm={exports:{}},Te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx;function jO(){if(kx)return Te;kx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function v(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,k={};function T(L,G,te){this.props=L,this.context=G,this.refs=k,this.updater=te||w}T.prototype.isReactComponent={},T.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},T.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function _(){}_.prototype=T.prototype;function A(L,G,te){this.props=L,this.context=G,this.refs=k,this.updater=te||w}var j=A.prototype=new _;j.constructor=A,x(j,T.prototype),j.isPureReactComponent=!0;var I=Array.isArray;function N(){}var z={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function Z(L,G,te){var re=te.ref;return{$$typeof:t,type:L,key:G,ref:re!==void 0?re:null,props:te}}function ne(L,G){return Z(L.type,G,L.props)}function Ee(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function le(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(te){return G[te]})}var Be=/\/+/g;function me(L,G){return typeof L=="object"&&L!==null&&L.key!=null?le(""+L.key):G.toString(36)}function xe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(N,N):(L.status="pending",L.then(function(G){L.status==="pending"&&(L.status="fulfilled",L.value=G)},function(G){L.status==="pending"&&(L.status="rejected",L.reason=G)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function P(L,G,te,re,be){var Se=typeof L;(Se==="undefined"||Se==="boolean")&&(L=null);var pe=!1;if(L===null)pe=!0;else switch(Se){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(L.$$typeof){case t:case e:pe=!0;break;case p:return pe=L._init,P(pe(L._payload),G,te,re,be)}}if(pe)return be=be(L),pe=re===""?"."+me(L,0):re,I(be)?(te="",pe!=null&&(te=pe.replace(Be,"$&/")+"/"),P(be,G,te,"",function(On){return On})):be!=null&&(Ee(be)&&(be=ne(be,te+(be.key==null||L&&L.key===be.key?"":(""+be.key).replace(Be,"$&/")+"/")+pe)),G.push(be)),1;pe=0;var et=re===""?".":re+":";if(I(L))for(var qe=0;qe<L.length;qe++)re=L[qe],Se=et+me(re,qe),pe+=P(re,G,te,Se,be);else if(qe=v(L),typeof qe=="function")for(L=qe.call(L),qe=0;!(re=L.next()).done;)re=re.value,Se=et+me(re,qe++),pe+=P(re,G,te,Se,be);else if(Se==="object"){if(typeof L.then=="function")return P(xe(L),G,te,re,be);throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return pe}function Y(L,G,te){if(L==null)return L;var re=[],be=0;return P(L,re,"","",function(Se){return G.call(te,Se,be++)}),re}function W(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(te){(L._status===0||L._status===-1)&&(L._status=1,L._result=te)},function(te){(L._status===0||L._status===-1)&&(L._status=2,L._result=te)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var Ce=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},De={map:Y,forEach:function(L,G,te){Y(L,function(){G.apply(this,arguments)},te)},count:function(L){var G=0;return Y(L,function(){G++}),G},toArray:function(L){return Y(L,function(G){return G})||[]},only:function(L){if(!Ee(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Te.Activity=m,Te.Children=De,Te.Component=T,Te.Fragment=n,Te.Profiler=i,Te.PureComponent=A,Te.StrictMode=r,Te.Suspense=d,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Te.__COMPILER_RUNTIME={__proto__:null,c:function(L){return z.H.useMemoCache(L)}},Te.cache=function(L){return function(){return L.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(L,G,te){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var re=x({},L.props),be=L.key;if(G!=null)for(Se in G.key!==void 0&&(be=""+G.key),G)!U.call(G,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&G.ref===void 0||(re[Se]=G[Se]);var Se=arguments.length-2;if(Se===1)re.children=te;else if(1<Se){for(var pe=Array(Se),et=0;et<Se;et++)pe[et]=arguments[et+2];re.children=pe}return Z(L.type,be,re)},Te.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Te.createElement=function(L,G,te){var re,be={},Se=null;if(G!=null)for(re in G.key!==void 0&&(Se=""+G.key),G)U.call(G,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(be[re]=G[re]);var pe=arguments.length-2;if(pe===1)be.children=te;else if(1<pe){for(var et=Array(pe),qe=0;qe<pe;qe++)et[qe]=arguments[qe+2];be.children=et}if(L&&L.defaultProps)for(re in pe=L.defaultProps,pe)be[re]===void 0&&(be[re]=pe[re]);return Z(L,Se,be)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(L){return{$$typeof:u,render:L}},Te.isValidElement=Ee,Te.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:W}},Te.memo=function(L,G){return{$$typeof:h,type:L,compare:G===void 0?null:G}},Te.startTransition=function(L){var G=z.T,te={};z.T=te;try{var re=L(),be=z.S;be!==null&&be(te,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(N,Ce)}catch(Se){Ce(Se)}finally{G!==null&&te.types!==null&&(G.types=te.types),z.T=G}},Te.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Te.use=function(L){return z.H.use(L)},Te.useActionState=function(L,G,te){return z.H.useActionState(L,G,te)},Te.useCallback=function(L,G){return z.H.useCallback(L,G)},Te.useContext=function(L){return z.H.useContext(L)},Te.useDebugValue=function(){},Te.useDeferredValue=function(L,G){return z.H.useDeferredValue(L,G)},Te.useEffect=function(L,G){return z.H.useEffect(L,G)},Te.useEffectEvent=function(L){return z.H.useEffectEvent(L)},Te.useId=function(){return z.H.useId()},Te.useImperativeHandle=function(L,G,te){return z.H.useImperativeHandle(L,G,te)},Te.useInsertionEffect=function(L,G){return z.H.useInsertionEffect(L,G)},Te.useLayoutEffect=function(L,G){return z.H.useLayoutEffect(L,G)},Te.useMemo=function(L,G){return z.H.useMemo(L,G)},Te.useOptimistic=function(L,G){return z.H.useOptimistic(L,G)},Te.useReducer=function(L,G,te){return z.H.useReducer(L,G,te)},Te.useRef=function(L){return z.H.useRef(L)},Te.useState=function(L){return z.H.useState(L)},Te.useSyncExternalStore=function(L,G,te){return z.H.useSyncExternalStore(L,G,te)},Te.useTransition=function(){return z.H.useTransition()},Te.version="19.2.4",Te}var Ex;function Xc(){return Ex||(Ex=1,Hm.exports=jO()),Hm.exports}var O=Xc();const Pr=L0(O);var qm={exports:{}},rc={},Vm={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx;function LO(){return Tx||(Tx=1,(function(t){function e(P,Y){var W=P.length;P.push(Y);e:for(;0<W;){var Ce=W-1>>>1,De=P[Ce];if(0<i(De,Y))P[Ce]=Y,P[W]=De,W=Ce;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var Y=P[0],W=P.pop();if(W!==Y){P[0]=W;e:for(var Ce=0,De=P.length,L=De>>>1;Ce<L;){var G=2*(Ce+1)-1,te=P[G],re=G+1,be=P[re];if(0>i(te,W))re<De&&0>i(be,te)?(P[Ce]=be,P[re]=W,Ce=re):(P[Ce]=te,P[G]=W,Ce=G);else if(re<De&&0>i(be,W))P[Ce]=be,P[re]=W,Ce=re;else break e}}return Y}function i(P,Y){var W=P.sortIndex-Y.sortIndex;return W!==0?W:P.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,y=3,v=!1,w=!1,x=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function j(P){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=P)r(h),Y.sortIndex=Y.expirationTime,e(d,Y);else break;Y=n(h)}}function I(P){if(x=!1,j(P),!w)if(n(d)!==null)w=!0,N||(N=!0,le());else{var Y=n(h);Y!==null&&xe(I,Y.startTime-P)}}var N=!1,z=-1,U=5,Z=-1;function ne(){return k?!0:!(t.unstable_now()-Z<U)}function Ee(){if(k=!1,N){var P=t.unstable_now();Z=P;var Y=!0;try{e:{w=!1,x&&(x=!1,_(z),z=-1),v=!0;var W=y;try{t:{for(j(P),m=n(d);m!==null&&!(m.expirationTime>P&&ne());){var Ce=m.callback;if(typeof Ce=="function"){m.callback=null,y=m.priorityLevel;var De=Ce(m.expirationTime<=P);if(P=t.unstable_now(),typeof De=="function"){m.callback=De,j(P),Y=!0;break t}m===n(d)&&r(d),j(P)}else r(d);m=n(d)}if(m!==null)Y=!0;else{var L=n(h);L!==null&&xe(I,L.startTime-P),Y=!1}}break e}finally{m=null,y=W,v=!1}Y=void 0}}finally{Y?le():N=!1}}}var le;if(typeof A=="function")le=function(){A(Ee)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,me=Be.port2;Be.port1.onmessage=Ee,le=function(){me.postMessage(null)}}else le=function(){T(Ee,0)};function xe(P,Y){z=T(function(){P(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(P){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var W=y;y=Y;try{return P()}finally{y=W}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(P,Y){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var W=y;y=P;try{return Y()}finally{y=W}},t.unstable_scheduleCallback=function(P,Y,W){var Ce=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Ce+W:Ce):W=Ce,P){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=W+De,P={id:p++,callback:Y,priorityLevel:P,startTime:W,expirationTime:De,sortIndex:-1},W>Ce?(P.sortIndex=W,e(h,P),n(d)===null&&P===n(h)&&(x?(_(z),z=-1):x=!0,xe(I,W-Ce))):(P.sortIndex=De,e(d,P),w||v||(w=!0,N||(N=!0,le()))),P},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(P){var Y=y;return function(){var W=y;y=Y;try{return P.apply(this,arguments)}finally{y=W}}}})(Fm)),Fm}var Cx;function zO(){return Cx||(Cx=1,Vm.exports=LO()),Vm.exports}var Gm={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x;function IO(){if(_x)return sn;_x=1;var t=Xc();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,p)},sn.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},sn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},sn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},sn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},sn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},sn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},sn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},sn.requestFormReset=function(d){r.d.r(d)},sn.unstable_batchedUpdates=function(d,h){return d(h)},sn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},sn.useFormStatus=function(){return l.H.useHostTransitionStatus()},sn.version="19.2.4",sn}var Ax;function dk(){if(Ax)return Gm.exports;Ax=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gm.exports=IO(),Gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox;function BO(){if(Ox)return rc;Ox=1;var t=zO(),e=Xc(),n=dk();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(r(188))}function h(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var c=s,f=a;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return d(g),s;if(b===f)return d(g),a;b=b.sibling}throw Error(r(188))}if(c.return!==f.return)c=g,f=b;else{for(var E=!1,C=g.child;C;){if(C===c){E=!0,c=g,f=b;break}if(C===f){E=!0,f=g,c=b;break}C=C.sibling}if(!E){for(C=b.child;C;){if(C===c){E=!0,c=b,f=g;break}if(C===f){E=!0,f=b,c=g;break}C=C.sibling}if(!E)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),A=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),Ee=Symbol.iterator;function le(s){return s===null||typeof s!="object"?null:(s=Ee&&s[Ee]||s["@@iterator"],typeof s=="function"?s:null)}var Be=Symbol.for("react.client.reference");function me(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Be?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case T:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList";case Z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case A:return s.displayName||"Context";case _:return(s._context.displayName||"Context")+".Consumer";case j:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return a=s.displayName||null,a!==null?a:me(s.type)||"Memo";case U:a=s._payload,s=s._init;try{return me(s(a))}catch{}}return null}var xe=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Ce=[],De=-1;function L(s){return{current:s}}function G(s){0>De||(s.current=Ce[De],Ce[De]=null,De--)}function te(s,a){De++,Ce[De]=s.current,s.current=a}var re=L(null),be=L(null),Se=L(null),pe=L(null);function et(s,a){switch(te(Se,a),te(be,s),te(re,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Vw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Vw(a),s=Fw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}G(re),te(re,s)}function qe(){G(re),G(be),G(Se)}function On(s){s.memoizedState!==null&&te(pe,s);var a=re.current,c=Fw(a,s.type);a!==c&&(te(be,s),te(re,c))}function ur(s){be.current===s&&(G(re),G(be)),pe.current===s&&(G(pe),Ql._currentValue=W)}var Fn,au;function dr(s){if(Fn===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Fn=a&&a[1]||"",au=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fn+s+au}var nl=!1;function Rs(s,a){if(!s||nl)return"";nl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(V){var q=V}Reflect.construct(s,[],J)}else{try{J.call()}catch(V){q=V}s.call(J.prototype)}}else{try{throw Error()}catch(V){q=V}(J=s())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(V){if(V&&q&&typeof V.stack=="string")return[V.stack,q.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),E=b[0],C=b[1];if(E&&C){var M=E.split(`
`),H=C.split(`
`);for(g=f=0;f<M.length&&!M[f].includes("DetermineComponentFrameRoot");)f++;for(;g<H.length&&!H[g].includes("DetermineComponentFrameRoot");)g++;if(f===M.length||g===H.length)for(f=M.length-1,g=H.length-1;1<=f&&0<=g&&M[f]!==H[g];)g--;for(;1<=f&&0<=g;f--,g--)if(M[f]!==H[g]){if(f!==1||g!==1)do if(f--,g--,0>g||M[f]!==H[g]){var F=`
`+M[f].replace(" at new "," at ");return s.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",s.displayName)),F}while(1<=f&&0<=g);break}}}finally{nl=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?dr(c):""}function Ds(s,a){switch(s.tag){case 26:case 27:case 5:return dr(s.type);case 16:return dr("Lazy");case 13:return s.child!==a&&a!==null?dr("Suspense Fallback"):dr("Suspense");case 19:return dr("SuspenseList");case 0:case 15:return Rs(s.type,!1);case 11:return Rs(s.type.render,!1);case 1:return Rs(s.type,!0);case 31:return dr("Activity");default:return""}}function rl(s){try{var a="",c=null;do a+=Ds(s,c),c=s,s=s.return;while(s);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Gr=Object.prototype.hasOwnProperty,Mo=t.unstable_scheduleCallback,bn=t.unstable_cancelCallback,lu=t.unstable_shouldYield,Ro=t.unstable_requestPaint,cn=t.unstable_now,un=t.unstable_getCurrentPriorityLevel,il=t.unstable_ImmediatePriority,en=t.unstable_UserBlockingPriority,js=t.unstable_NormalPriority,jt=t.unstable_LowPriority,sl=t.unstable_IdlePriority,dn=t.log,cu=t.unstable_setDisableYieldValue,tn=null,nn=null;function $t(s){if(typeof dn=="function"&&cu(s),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(tn,s)}catch{}}var rn=Math.clz32?Math.clz32:ol,Ls=Math.log,uu=Math.LN2;function ol(s){return s>>>=0,s===0?32:31-(Ls(s)/uu|0)|0}var Do=256,Or=262144,zs=4194304;function fr(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function jo(s,a,c){var f=s.pendingLanes;if(f===0)return 0;var g=0,b=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var C=f&134217727;return C!==0?(f=C&~b,f!==0?g=fr(f):(E&=C,E!==0?g=fr(E):c||(c=C&~s,c!==0&&(g=fr(c))))):(C=f&~b,C!==0?g=fr(C):E!==0?g=fr(E):c||(c=f&~s,c!==0&&(g=fr(c)))),g===0?0:a!==0&&a!==g&&(a&b)===0&&(b=g&-g,c=a&-a,b>=c||b===32&&(c&4194048)!==0)?a:g}function hr(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function du(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lo(){var s=zs;return zs<<=1,(zs&62914560)===0&&(zs=4194304),s}function al(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function Nr(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function jh(s,a,c,f,g,b){var E=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var C=s.entanglements,M=s.expirationTimes,H=s.hiddenUpdates;for(c=E&~c;0<c;){var F=31-rn(c),J=1<<F;C[F]=0,M[F]=-1;var q=H[F];if(q!==null)for(H[F]=null,F=0;F<q.length;F++){var V=q[F];V!==null&&(V.lane&=-536870913)}c&=~J}f!==0&&zo(s,f,0),b!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=b&~(E&~a))}function zo(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var f=31-rn(a);s.entangledLanes|=a,s.entanglements[f]=s.entanglements[f]|1073741824|c&261930}function Lh(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var f=31-rn(c),g=1<<f;g&a|s[f]&a&&(s[f]|=a),c&=~g}}function Io(s,a){var c=a&-a;return c=(c&42)!==0?1:fu(c),(c&(s.suspendedLanes|a))!==0?0:c}function fu(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Is(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function zh(){var s=Y.p;return s!==0?s:(s=window.event,s===void 0?32:px(s.type))}function Nn(s,a){var c=Y.p;try{return Y.p=s,a()}finally{Y.p=c}}var pr=Math.random().toString(36).slice(2),Ke="__reactFiber$"+pr,Pt="__reactProps$"+pr,wt="__reactContainer$"+pr,Bo="__reactEvents$"+pr,ji="__reactListeners$"+pr,hu="__reactHandles$"+pr,Ot="__reactResources$"+pr,Li="__reactMarker$"+pr;function Kr(s){delete s[Ke],delete s[Pt],delete s[Bo],delete s[ji],delete s[hu]}function Wr(s){var a=s[Ke];if(a)return a;for(var c=s.parentNode;c;){if(a=c[wt]||c[Ke]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=Qw(s);s!==null;){if(c=s[Ke])return c;s=Qw(s)}return a}s=c,c=s.parentNode}return null}function vn(s){if(s=s[Ke]||s[wt]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Jr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function Ht(s){var a=s[Ot];return a||(a=s[Ot]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ct(s){s[Li]=!0}var Mn=new Set,ll={};function fn(s,a){zi(s,a),zi(s+"Capture",a)}function zi(s,a){for(ll[s]=a,s=0;s<a.length;s++)Mn.add(a[s])}var Gn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},pu={};function Ih(s){return Gr.call(pu,s)?!0:Gr.call(cl,s)?!1:Gn.test(s)?pu[s]=!0:(cl[s]=!0,!1)}function Uo(s,a,c){if(Ih(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function $o(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function mr(s,a,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+f)}}function wn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ul(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function dl(s,a,c){var f=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,b=f.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(E){c=""+E,b.call(this,E)}}),Object.defineProperty(s,a,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function R(s){if(!s._valueTracker){var a=ul(s)?"checked":"value";s._valueTracker=dl(s,a,""+s[a])}}function Q(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return s&&(f=ul(s)?s.checked?"true":"false":s.value),s=f,s!==c?(a.setValue(s),!0):!1}function We(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Nt=/[\n"\\]/g;function qt(s){return s.replace(Nt,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Bs(s,a,c,f,g,b,E,C){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),a!=null?E==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+wn(a)):s.value!==""+wn(a)&&(s.value=""+wn(a)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),a!=null?Us(s,E,wn(a)):c!=null?Us(s,E,wn(c)):f!=null&&s.removeAttribute("value"),g==null&&b!=null&&(s.defaultChecked=!!b),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+wn(C):s.removeAttribute("name")}function Po(s,a,c,f,g,b,E,C){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){R(s);return}c=c!=null?""+wn(c):"",a=a!=null?""+wn(a):c,C||a===s.value||(s.value=a),s.defaultValue=a}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=C?s.checked:!!f,s.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E),R(s)}function Us(s,a,c){a==="number"&&We(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Yr(s,a,c,f){if(s=s.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=a.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&f&&(s[c].defaultSelected=!0)}else{for(c=""+wn(c),a=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function mu(s,a,c){if(a!=null&&(a=""+wn(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+wn(c):""}function gu(s,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(r(92));if(xe(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=wn(a),s.defaultValue=c,f=s.textContent,f===c&&f!==""&&f!==null&&(s.value=f),R(s)}function Kn(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var fl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hl(s,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":f?s.setProperty(a,c):typeof c!="number"||c===0||fl.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function yu(s,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var g in a)f=a[g],a.hasOwnProperty(g)&&c[g]!==f&&hl(s,g,f)}else for(var b in a)a.hasOwnProperty(b)&&hl(s,b,a[b])}function pl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ho(s){return Uh.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Re(){}var tt=null;function gr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xr=null,qo=null;function qy(s){var a=vn(s);if(a&&(s=a.stateNode)){var c=s[Pt]||null;e:switch(s=a.stateNode,a.type){case"input":if(Bs(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qt(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==s&&f.form===s.form){var g=f[Pt]||null;if(!g)throw Error(r(90));Bs(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===s.form&&Q(f)}break e;case"textarea":mu(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Yr(s,!!c.multiple,a,!1)}}}var $h=!1;function Vy(s,a,c){if($h)return s(a,c);$h=!0;try{var f=s(a);return f}finally{if($h=!1,(Xr!==null||qo!==null)&&(id(),Xr&&(a=Xr,s=qo,qo=Xr=null,qy(a),s)))for(a=0;a<s.length;a++)qy(s[a])}}function ml(s,a){var c=s.stateNode;if(c===null)return null;var f=c[Pt]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ph=!1;if(Qr)try{var gl={};Object.defineProperty(gl,"passive",{get:function(){Ph=!0}}),window.addEventListener("test",gl,gl),window.removeEventListener("test",gl,gl)}catch{Ph=!1}var Ii=null,Hh=null,bu=null;function Fy(){if(bu)return bu;var s,a=Hh,c=a.length,f,g="value"in Ii?Ii.value:Ii.textContent,b=g.length;for(s=0;s<c&&a[s]===g[s];s++);var E=c-s;for(f=1;f<=E&&a[c-f]===g[b-f];f++);return bu=g.slice(s,1<f?1-f:void 0)}function vu(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function wu(){return!0}function Gy(){return!1}function xn(s){function a(c,f,g,b,E){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(c=s[C],this[C]=c?c(b):b[C]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?wu:Gy,this.isPropagationStopped=Gy,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=wu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=wu)},persist:function(){},isPersistent:wu}),a}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xu=xn($s),yl=m({},$s,{view:0,detail:0}),N_=xn(yl),qh,Vh,bl,Su=m({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==bl&&(bl&&s.type==="mousemove"?(qh=s.screenX-bl.screenX,Vh=s.screenY-bl.screenY):Vh=qh=0,bl=s),qh)},movementY:function(s){return"movementY"in s?s.movementY:Vh}}),Ky=xn(Su),M_=m({},Su,{dataTransfer:0}),R_=xn(M_),D_=m({},yl,{relatedTarget:0}),Fh=xn(D_),j_=m({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),L_=xn(j_),z_=m({},$s,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),I_=xn(z_),B_=m({},$s,{data:0}),Wy=xn(B_),U_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H_(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=P_[s])?!!a[s]:!1}function Gh(){return H_}var q_=m({},yl,{key:function(s){if(s.key){var a=U_[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=vu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?$_[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gh,charCode:function(s){return s.type==="keypress"?vu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?vu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),V_=xn(q_),F_=m({},Su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=xn(F_),G_=m({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gh}),K_=xn(G_),W_=m({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),J_=xn(W_),Y_=m({},Su,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X_=xn(Y_),Q_=m({},$s,{newState:0,oldState:0}),Z_=xn(Q_),eA=[9,13,27,32],Kh=Qr&&"CompositionEvent"in window,vl=null;Qr&&"documentMode"in document&&(vl=document.documentMode);var tA=Qr&&"TextEvent"in window&&!vl,Yy=Qr&&(!Kh||vl&&8<vl&&11>=vl),Xy=" ",Qy=!1;function Zy(s,a){switch(s){case"keyup":return eA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eb(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Vo=!1;function nA(s,a){switch(s){case"compositionend":return eb(a);case"keypress":return a.which!==32?null:(Qy=!0,Xy);case"textInput":return s=a.data,s===Xy&&Qy?null:s;default:return null}}function rA(s,a){if(Vo)return s==="compositionend"||!Kh&&Zy(s,a)?(s=Fy(),bu=Hh=Ii=null,Vo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Yy&&a.locale!=="ko"?null:a.data;default:return null}}var iA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tb(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!iA[s.type]:a==="textarea"}function nb(s,a,c,f){Xr?qo?qo.push(f):qo=[f]:Xr=f,a=dd(a,"onChange"),0<a.length&&(c=new xu("onChange","change",null,c,f),s.push({event:c,listeners:a}))}var wl=null,xl=null;function sA(s){Bw(s,0)}function ku(s){var a=Jr(s);if(Q(a))return s}function rb(s,a){if(s==="change")return a}var ib=!1;if(Qr){var Wh;if(Qr){var Jh="oninput"in document;if(!Jh){var sb=document.createElement("div");sb.setAttribute("oninput","return;"),Jh=typeof sb.oninput=="function"}Wh=Jh}else Wh=!1;ib=Wh&&(!document.documentMode||9<document.documentMode)}function ob(){wl&&(wl.detachEvent("onpropertychange",ab),xl=wl=null)}function ab(s){if(s.propertyName==="value"&&ku(xl)){var a=[];nb(a,xl,s,gr(s)),Vy(sA,a)}}function oA(s,a,c){s==="focusin"?(ob(),wl=a,xl=c,wl.attachEvent("onpropertychange",ab)):s==="focusout"&&ob()}function aA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ku(xl)}function lA(s,a){if(s==="click")return ku(a)}function cA(s,a){if(s==="input"||s==="change")return ku(a)}function uA(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Rn=typeof Object.is=="function"?Object.is:uA;function Sl(s,a){if(Rn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!Gr.call(a,g)||!Rn(s[g],a[g]))return!1}return!0}function lb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function cb(s,a){var c=lb(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=a&&f>=a)return{node:c,offset:a-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=lb(c)}}function ub(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?ub(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function db(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=We(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=We(s.document)}return a}function Yh(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var dA=Qr&&"documentMode"in document&&11>=document.documentMode,Fo=null,Xh=null,kl=null,Qh=!1;function fb(s,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qh||Fo==null||Fo!==We(f)||(f=Fo,"selectionStart"in f&&Yh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),kl&&Sl(kl,f)||(kl=f,f=dd(Xh,"onSelect"),0<f.length&&(a=new xu("onSelect","select",null,a,c),s.push({event:a,listeners:f}),a.target=Fo)))}function Ps(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var Go={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},Zh={},hb={};Qr&&(hb=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Hs(s){if(Zh[s])return Zh[s];if(!Go[s])return s;var a=Go[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in hb)return Zh[s]=a[c];return s}var pb=Hs("animationend"),mb=Hs("animationiteration"),gb=Hs("animationstart"),fA=Hs("transitionrun"),hA=Hs("transitionstart"),pA=Hs("transitioncancel"),yb=Hs("transitionend"),bb=new Map,ep="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ep.push("scrollEnd");function yr(s,a){bb.set(s,a),fn(a,[s])}var Eu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Wn=[],Ko=0,tp=0;function Tu(){for(var s=Ko,a=tp=Ko=0;a<s;){var c=Wn[a];Wn[a++]=null;var f=Wn[a];Wn[a++]=null;var g=Wn[a];Wn[a++]=null;var b=Wn[a];if(Wn[a++]=null,f!==null&&g!==null){var E=f.pending;E===null?g.next=g:(g.next=E.next,E.next=g),f.pending=g}b!==0&&vb(c,g,b)}}function Cu(s,a,c,f){Wn[Ko++]=s,Wn[Ko++]=a,Wn[Ko++]=c,Wn[Ko++]=f,tp|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function np(s,a,c,f){return Cu(s,a,c,f),_u(s)}function qs(s,a){return Cu(s,null,null,a),_u(s)}function vb(s,a,c){s.lanes|=c;var f=s.alternate;f!==null&&(f.lanes|=c);for(var g=!1,b=s.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(g=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,g&&a!==null&&(g=31-rn(c),s=b.hiddenUpdates,f=s[g],f===null?s[g]=[a]:f.push(a),a.lane=c|536870912),b):null}function _u(s){if(50<Fl)throw Fl=0,dm=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Wo={};function mA(s,a,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(s,a,c,f){return new mA(s,a,c,f)}function rp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zr(s,a){var c=s.alternate;return c===null?(c=Dn(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function wb(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Au(s,a,c,f,g,b){var E=0;if(f=s,typeof s=="function")rp(s)&&(E=1);else if(typeof s=="string")E=wO(s,c,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Z:return s=Dn(31,c,a,g),s.elementType=Z,s.lanes=b,s;case x:return Vs(c.children,g,b,a);case k:E=8,g|=24;break;case T:return s=Dn(12,c,a,g|2),s.elementType=T,s.lanes=b,s;case I:return s=Dn(13,c,a,g),s.elementType=I,s.lanes=b,s;case N:return s=Dn(19,c,a,g),s.elementType=N,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:E=10;break e;case _:E=9;break e;case j:E=11;break e;case z:E=14;break e;case U:E=16,f=null;break e}E=29,c=Error(r(130,s===null?"null":typeof s,"")),f=null}return a=Dn(E,c,a,g),a.elementType=s,a.type=f,a.lanes=b,a}function Vs(s,a,c,f){return s=Dn(7,s,f,a),s.lanes=c,s}function ip(s,a,c){return s=Dn(6,s,null,a),s.lanes=c,s}function xb(s){var a=Dn(18,null,null,0);return a.stateNode=s,a}function sp(s,a,c){return a=Dn(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Sb=new WeakMap;function Jn(s,a){if(typeof s=="object"&&s!==null){var c=Sb.get(s);return c!==void 0?c:(a={value:s,source:a,stack:rl(a)},Sb.set(s,a),a)}return{value:s,source:a,stack:rl(a)}}var Jo=[],Yo=0,Ou=null,El=0,Yn=[],Xn=0,Bi=null,Mr=1,Rr="";function ei(s,a){Jo[Yo++]=El,Jo[Yo++]=Ou,Ou=s,El=a}function kb(s,a,c){Yn[Xn++]=Mr,Yn[Xn++]=Rr,Yn[Xn++]=Bi,Bi=s;var f=Mr;s=Rr;var g=32-rn(f)-1;f&=~(1<<g),c+=1;var b=32-rn(a)+g;if(30<b){var E=g-g%5;b=(f&(1<<E)-1).toString(32),f>>=E,g-=E,Mr=1<<32-rn(a)+g|c<<g|f,Rr=b+s}else Mr=1<<b|c<<g|f,Rr=s}function op(s){s.return!==null&&(ei(s,1),kb(s,1,0))}function ap(s){for(;s===Ou;)Ou=Jo[--Yo],Jo[Yo]=null,El=Jo[--Yo],Jo[Yo]=null;for(;s===Bi;)Bi=Yn[--Xn],Yn[Xn]=null,Rr=Yn[--Xn],Yn[Xn]=null,Mr=Yn[--Xn],Yn[Xn]=null}function Eb(s,a){Yn[Xn++]=Mr,Yn[Xn++]=Rr,Yn[Xn++]=Bi,Mr=a.id,Rr=a.overflow,Bi=s}var Vt=null,rt=null,Ue=!1,Ui=null,Qn=!1,lp=Error(r(519));function $i(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Jn(a,s)),lp}function Tb(s){var a=s.stateNode,c=s.type,f=s.memoizedProps;switch(a[Ke]=s,a[Pt]=f,c){case"dialog":Le("cancel",a),Le("close",a);break;case"iframe":case"object":case"embed":Le("load",a);break;case"video":case"audio":for(c=0;c<Kl.length;c++)Le(Kl[c],a);break;case"source":Le("error",a);break;case"img":case"image":case"link":Le("error",a),Le("load",a);break;case"details":Le("toggle",a);break;case"input":Le("invalid",a),Po(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Le("invalid",a);break;case"textarea":Le("invalid",a),gu(a,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||Hw(a.textContent,c)?(f.popover!=null&&(Le("beforetoggle",a),Le("toggle",a)),f.onScroll!=null&&Le("scroll",a),f.onScrollEnd!=null&&Le("scrollend",a),f.onClick!=null&&(a.onclick=Re),a=!0):a=!1,a||$i(s,!0)}function Cb(s){for(Vt=s.return;Vt;)switch(Vt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Vt=Vt.return}}function Xo(s){if(s!==Vt)return!1;if(!Ue)return Cb(s),Ue=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Cm(s.type,s.memoizedProps)),c=!c),c&&rt&&$i(s),Cb(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));rt=Xw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));rt=Xw(s)}else a===27?(a=rt,es(s.type)?(s=Mm,Mm=null,rt=s):rt=a):rt=Vt?er(s.stateNode.nextSibling):null;return!0}function Fs(){rt=Vt=null,Ue=!1}function cp(){var s=Ui;return s!==null&&(Tn===null?Tn=s:Tn.push.apply(Tn,s),Ui=null),s}function Tl(s){Ui===null?Ui=[s]:Ui.push(s)}var up=L(null),Gs=null,ti=null;function Pi(s,a,c){te(up,a._currentValue),a._currentValue=c}function ni(s){s._currentValue=up.current,G(up)}function dp(s,a,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===c)break;s=s.return}}function fp(s,a,c,f){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var b=g.dependencies;if(b!==null){var E=g.child;b=b.firstContext;e:for(;b!==null;){var C=b;b=g;for(var M=0;M<a.length;M++)if(C.context===a[M]){b.lanes|=c,C=b.alternate,C!==null&&(C.lanes|=c),dp(b.return,c,s),f||(E=null);break e}b=C.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=c,b=E.alternate,b!==null&&(b.lanes|=c),dp(E,c,s),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Qo(s,a,c,f){s=null;for(var g=a,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var C=g.type;Rn(g.pendingProps.value,E.value)||(s!==null?s.push(C):s=[C])}}else if(g===pe.current){if(E=g.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Ql):s=[Ql])}g=g.return}s!==null&&fp(a,s,c,f),a.flags|=262144}function Nu(s){for(s=s.firstContext;s!==null;){if(!Rn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ks(s){Gs=s,ti=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ft(s){return _b(Gs,s)}function Mu(s,a){return Gs===null&&Ks(s),_b(s,a)}function _b(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},ti===null){if(s===null)throw Error(r(308));ti=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ti=ti.next=a;return c}var gA=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,f){s.push(f)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},yA=t.unstable_scheduleCallback,bA=t.unstable_NormalPriority,xt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hp(){return{controller:new gA,data:new Map,refCount:0}}function Cl(s){s.refCount--,s.refCount===0&&yA(bA,function(){s.controller.abort()})}var _l=null,pp=0,Zo=0,ea=null;function vA(s,a){if(_l===null){var c=_l=[];pp=0,Zo=ym(),ea={status:"pending",value:void 0,then:function(f){c.push(f)}}}return pp++,a.then(Ab,Ab),a}function Ab(){if(--pp===0&&_l!==null){ea!==null&&(ea.status="fulfilled");var s=_l;_l=null,Zo=0,ea=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function wA(s,a){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return s.then(function(){f.status="fulfilled",f.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var Ob=P.S;P.S=function(s,a){fw=cn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&vA(s,a),Ob!==null&&Ob(s,a)};var Ws=L(null);function mp(){var s=Ws.current;return s!==null?s:Qe.pooledCache}function Ru(s,a){a===null?te(Ws,Ws.current):te(Ws,a.pool)}function Nb(){var s=mp();return s===null?null:{parent:xt._currentValue,pool:s}}var ta=Error(r(460)),gp=Error(r(474)),Du=Error(r(542)),ju={then:function(){}};function Mb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Rb(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(Re,Re),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,jb(s),s;default:if(typeof a.status=="string")a.then(Re,Re);else{if(s=Qe,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(f){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=f}},function(f){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,jb(s),s}throw Ys=a,ta}}function Js(s){try{var a=s._init;return a(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ys=c,ta):c}}var Ys=null;function Db(){if(Ys===null)throw Error(r(459));var s=Ys;return Ys=null,s}function jb(s){if(s===ta||s===Du)throw Error(r(483))}var na=null,Al=0;function Lu(s){var a=Al;return Al+=1,na===null&&(na=[]),Rb(na,s,a)}function Ol(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function zu(s,a){throw a.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Lb(s){function a(B,D){if(s){var $=B.deletions;$===null?(B.deletions=[D],B.flags|=16):$.push(D)}}function c(B,D){if(!s)return null;for(;D!==null;)a(B,D),D=D.sibling;return null}function f(B){for(var D=new Map;B!==null;)B.key!==null?D.set(B.key,B):D.set(B.index,B),B=B.sibling;return D}function g(B,D){return B=Zr(B,D),B.index=0,B.sibling=null,B}function b(B,D,$){return B.index=$,s?($=B.alternate,$!==null?($=$.index,$<D?(B.flags|=67108866,D):$):(B.flags|=67108866,D)):(B.flags|=1048576,D)}function E(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function C(B,D,$,K){return D===null||D.tag!==6?(D=ip($,B.mode,K),D.return=B,D):(D=g(D,$),D.return=B,D)}function M(B,D,$,K){var fe=$.type;return fe===x?F(B,D,$.props.children,K,$.key):D!==null&&(D.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===U&&Js(fe)===D.type)?(D=g(D,$.props),Ol(D,$),D.return=B,D):(D=Au($.type,$.key,$.props,null,B.mode,K),Ol(D,$),D.return=B,D)}function H(B,D,$,K){return D===null||D.tag!==4||D.stateNode.containerInfo!==$.containerInfo||D.stateNode.implementation!==$.implementation?(D=sp($,B.mode,K),D.return=B,D):(D=g(D,$.children||[]),D.return=B,D)}function F(B,D,$,K,fe){return D===null||D.tag!==7?(D=Vs($,B.mode,K,fe),D.return=B,D):(D=g(D,$),D.return=B,D)}function J(B,D,$){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=ip(""+D,B.mode,$),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case v:return $=Au(D.type,D.key,D.props,null,B.mode,$),Ol($,D),$.return=B,$;case w:return D=sp(D,B.mode,$),D.return=B,D;case U:return D=Js(D),J(B,D,$)}if(xe(D)||le(D))return D=Vs(D,B.mode,$,null),D.return=B,D;if(typeof D.then=="function")return J(B,Lu(D),$);if(D.$$typeof===A)return J(B,Mu(B,D),$);zu(B,D)}return null}function q(B,D,$,K){var fe=D!==null?D.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return fe!==null?null:C(B,D,""+$,K);if(typeof $=="object"&&$!==null){switch($.$$typeof){case v:return $.key===fe?M(B,D,$,K):null;case w:return $.key===fe?H(B,D,$,K):null;case U:return $=Js($),q(B,D,$,K)}if(xe($)||le($))return fe!==null?null:F(B,D,$,K,null);if(typeof $.then=="function")return q(B,D,Lu($),K);if($.$$typeof===A)return q(B,D,Mu(B,$),K);zu(B,$)}return null}function V(B,D,$,K,fe){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return B=B.get($)||null,C(D,B,""+K,fe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case v:return B=B.get(K.key===null?$:K.key)||null,M(D,B,K,fe);case w:return B=B.get(K.key===null?$:K.key)||null,H(D,B,K,fe);case U:return K=Js(K),V(B,D,$,K,fe)}if(xe(K)||le(K))return B=B.get($)||null,F(D,B,K,fe,null);if(typeof K.then=="function")return V(B,D,$,Lu(K),fe);if(K.$$typeof===A)return V(B,D,$,Mu(D,K),fe);zu(D,K)}return null}function se(B,D,$,K){for(var fe=null,$e=null,ce=D,Oe=D=0,Ie=null;ce!==null&&Oe<$.length;Oe++){ce.index>Oe?(Ie=ce,ce=null):Ie=ce.sibling;var Pe=q(B,ce,$[Oe],K);if(Pe===null){ce===null&&(ce=Ie);break}s&&ce&&Pe.alternate===null&&a(B,ce),D=b(Pe,D,Oe),$e===null?fe=Pe:$e.sibling=Pe,$e=Pe,ce=Ie}if(Oe===$.length)return c(B,ce),Ue&&ei(B,Oe),fe;if(ce===null){for(;Oe<$.length;Oe++)ce=J(B,$[Oe],K),ce!==null&&(D=b(ce,D,Oe),$e===null?fe=ce:$e.sibling=ce,$e=ce);return Ue&&ei(B,Oe),fe}for(ce=f(ce);Oe<$.length;Oe++)Ie=V(ce,B,Oe,$[Oe],K),Ie!==null&&(s&&Ie.alternate!==null&&ce.delete(Ie.key===null?Oe:Ie.key),D=b(Ie,D,Oe),$e===null?fe=Ie:$e.sibling=Ie,$e=Ie);return s&&ce.forEach(function(ss){return a(B,ss)}),Ue&&ei(B,Oe),fe}function ge(B,D,$,K){if($==null)throw Error(r(151));for(var fe=null,$e=null,ce=D,Oe=D=0,Ie=null,Pe=$.next();ce!==null&&!Pe.done;Oe++,Pe=$.next()){ce.index>Oe?(Ie=ce,ce=null):Ie=ce.sibling;var ss=q(B,ce,Pe.value,K);if(ss===null){ce===null&&(ce=Ie);break}s&&ce&&ss.alternate===null&&a(B,ce),D=b(ss,D,Oe),$e===null?fe=ss:$e.sibling=ss,$e=ss,ce=Ie}if(Pe.done)return c(B,ce),Ue&&ei(B,Oe),fe;if(ce===null){for(;!Pe.done;Oe++,Pe=$.next())Pe=J(B,Pe.value,K),Pe!==null&&(D=b(Pe,D,Oe),$e===null?fe=Pe:$e.sibling=Pe,$e=Pe);return Ue&&ei(B,Oe),fe}for(ce=f(ce);!Pe.done;Oe++,Pe=$.next())Pe=V(ce,B,Oe,Pe.value,K),Pe!==null&&(s&&Pe.alternate!==null&&ce.delete(Pe.key===null?Oe:Pe.key),D=b(Pe,D,Oe),$e===null?fe=Pe:$e.sibling=Pe,$e=Pe);return s&&ce.forEach(function(MO){return a(B,MO)}),Ue&&ei(B,Oe),fe}function Xe(B,D,$,K){if(typeof $=="object"&&$!==null&&$.type===x&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case v:e:{for(var fe=$.key;D!==null;){if(D.key===fe){if(fe=$.type,fe===x){if(D.tag===7){c(B,D.sibling),K=g(D,$.props.children),K.return=B,B=K;break e}}else if(D.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===U&&Js(fe)===D.type){c(B,D.sibling),K=g(D,$.props),Ol(K,$),K.return=B,B=K;break e}c(B,D);break}else a(B,D);D=D.sibling}$.type===x?(K=Vs($.props.children,B.mode,K,$.key),K.return=B,B=K):(K=Au($.type,$.key,$.props,null,B.mode,K),Ol(K,$),K.return=B,B=K)}return E(B);case w:e:{for(fe=$.key;D!==null;){if(D.key===fe)if(D.tag===4&&D.stateNode.containerInfo===$.containerInfo&&D.stateNode.implementation===$.implementation){c(B,D.sibling),K=g(D,$.children||[]),K.return=B,B=K;break e}else{c(B,D);break}else a(B,D);D=D.sibling}K=sp($,B.mode,K),K.return=B,B=K}return E(B);case U:return $=Js($),Xe(B,D,$,K)}if(xe($))return se(B,D,$,K);if(le($)){if(fe=le($),typeof fe!="function")throw Error(r(150));return $=fe.call($),ge(B,D,$,K)}if(typeof $.then=="function")return Xe(B,D,Lu($),K);if($.$$typeof===A)return Xe(B,D,Mu(B,$),K);zu(B,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,D!==null&&D.tag===6?(c(B,D.sibling),K=g(D,$),K.return=B,B=K):(c(B,D),K=ip($,B.mode,K),K.return=B,B=K),E(B)):c(B,D)}return function(B,D,$,K){try{Al=0;var fe=Xe(B,D,$,K);return na=null,fe}catch(ce){if(ce===ta||ce===Du)throw ce;var $e=Dn(29,ce,null,B.mode);return $e.lanes=K,$e.return=B,$e}finally{}}}var Xs=Lb(!0),zb=Lb(!1),Hi=!1;function yp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function qi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Vi(s,a,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(He&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,a=_u(s),vb(s,null,c),a}return Cu(s,f,a,c),_u(s)}function Nl(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=s.pendingLanes,c|=f,a.lanes=c,Lh(s,c)}}function vp(s,a){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=E:b=b.next=E,c=c.next}while(c!==null);b===null?g=b=a:b=b.next=a}else g=b=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var wp=!1;function Ml(){if(wp){var s=ea;if(s!==null)throw s}}function Rl(s,a,c,f){wp=!1;var g=s.updateQueue;Hi=!1;var b=g.firstBaseUpdate,E=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var M=C,H=M.next;M.next=null,E===null?b=H:E.next=H,E=M;var F=s.alternate;F!==null&&(F=F.updateQueue,C=F.lastBaseUpdate,C!==E&&(C===null?F.firstBaseUpdate=H:C.next=H,F.lastBaseUpdate=M))}if(b!==null){var J=g.baseState;E=0,F=H=M=null,C=b;do{var q=C.lane&-536870913,V=q!==C.lane;if(V?(ze&q)===q:(f&q)===q){q!==0&&q===Zo&&(wp=!0),F!==null&&(F=F.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var se=s,ge=C;q=a;var Xe=c;switch(ge.tag){case 1:if(se=ge.payload,typeof se=="function"){J=se.call(Xe,J,q);break e}J=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=ge.payload,q=typeof se=="function"?se.call(Xe,J,q):se,q==null)break e;J=m({},J,q);break e;case 2:Hi=!0}}q=C.callback,q!==null&&(s.flags|=64,V&&(s.flags|=8192),V=g.callbacks,V===null?g.callbacks=[q]:V.push(q))}else V={lane:q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},F===null?(H=F=V,M=J):F=F.next=V,E|=q;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;V=C,C=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);F===null&&(M=J),g.baseState=M,g.firstBaseUpdate=H,g.lastBaseUpdate=F,b===null&&(g.shared.lanes=0),Ji|=E,s.lanes=E,s.memoizedState=J}}function Ib(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function Bb(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)Ib(c[s],a)}var ra=L(null),Iu=L(0);function Ub(s,a){s=di,te(Iu,s),te(ra,a),di=s|a.baseLanes}function xp(){te(Iu,di),te(ra,ra.current)}function Sp(){di=Iu.current,G(ra),G(Iu)}var jn=L(null),Zn=null;function Fi(s){var a=s.alternate;te(bt,bt.current&1),te(jn,s),Zn===null&&(a===null||ra.current!==null||a.memoizedState!==null)&&(Zn=s)}function kp(s){te(bt,bt.current),te(jn,s),Zn===null&&(Zn=s)}function $b(s){s.tag===22?(te(bt,bt.current),te(jn,s),Zn===null&&(Zn=s)):Gi()}function Gi(){te(bt,bt.current),te(jn,jn.current)}function Ln(s){G(jn),Zn===s&&(Zn=null),G(bt)}var bt=L(0);function Bu(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Om(c)||Nm(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ri=0,Ae=null,Je=null,St=null,Uu=!1,ia=!1,Qs=!1,$u=0,Dl=0,sa=null,xA=0;function ht(){throw Error(r(321))}function Ep(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Rn(s[c],a[c]))return!1;return!0}function Tp(s,a,c,f,g,b){return ri=b,Ae=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=s===null||s.memoizedState===null?kv:$p,Qs=!1,b=c(f,g),Qs=!1,ia&&(b=Hb(a,c,f,g)),Pb(s),b}function Pb(s){P.H=zl;var a=Je!==null&&Je.next!==null;if(ri=0,St=Je=Ae=null,Uu=!1,Dl=0,sa=null,a)throw Error(r(300));s===null||kt||(s=s.dependencies,s!==null&&Nu(s)&&(kt=!0))}function Hb(s,a,c,f){Ae=s;var g=0;do{if(ia&&(sa=null),Dl=0,ia=!1,25<=g)throw Error(r(301));if(g+=1,St=Je=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=Ev,b=a(c,f)}while(ia);return b}function SA(){var s=P.H,a=s.useState()[0];return a=typeof a.then=="function"?jl(a):a,s=s.useState()[0],(Je!==null?Je.memoizedState:null)!==s&&(Ae.flags|=1024),a}function Cp(){var s=$u!==0;return $u=0,s}function _p(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function Ap(s){if(Uu){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Uu=!1}ri=0,St=Je=Ae=null,ia=!1,Dl=$u=0,sa=null}function hn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ae.memoizedState=St=s:St=St.next=s,St}function vt(){if(Je===null){var s=Ae.alternate;s=s!==null?s.memoizedState:null}else s=Je.next;var a=St===null?Ae.memoizedState:St.next;if(a!==null)St=a,Je=s;else{if(s===null)throw Ae.alternate===null?Error(r(467)):Error(r(310));Je=s,s={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},St===null?Ae.memoizedState=St=s:St=St.next=s}return St}function Pu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(s){var a=Dl;return Dl+=1,sa===null&&(sa=[]),s=Rb(sa,s,a),a=Ae,(St===null?a.memoizedState:St.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?kv:$p),s}function Hu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return jl(s);if(s.$$typeof===A)return Ft(s)}throw Error(r(438,String(s)))}function Op(s){var a=null,c=Ae.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=Ae.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Pu(),Ae.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),f=0;f<s;f++)c[f]=ne;return a.index++,c}function ii(s,a){return typeof a=="function"?a(s):a}function qu(s){var a=vt();return Np(a,Je,s)}function Np(s,a,c){var f=s.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var g=s.baseQueue,b=f.pending;if(b!==null){if(g!==null){var E=g.next;g.next=b.next,b.next=E}a.baseQueue=g=b,f.pending=null}if(b=s.baseState,g===null)s.memoizedState=b;else{a=g.next;var C=E=null,M=null,H=a,F=!1;do{var J=H.lane&-536870913;if(J!==H.lane?(ze&J)===J:(ri&J)===J){var q=H.revertLane;if(q===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),J===Zo&&(F=!0);else if((ri&q)===q){H=H.next,q===Zo&&(F=!0);continue}else J={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},M===null?(C=M=J,E=b):M=M.next=J,Ae.lanes|=q,Ji|=q;J=H.action,Qs&&c(b,J),b=H.hasEagerState?H.eagerState:c(b,J)}else q={lane:J,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},M===null?(C=M=q,E=b):M=M.next=q,Ae.lanes|=J,Ji|=J;H=H.next}while(H!==null&&H!==a);if(M===null?E=b:M.next=C,!Rn(b,s.memoizedState)&&(kt=!0,F&&(c=ea,c!==null)))throw c;s.memoizedState=b,s.baseState=E,s.baseQueue=M,f.lastRenderedState=b}return g===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function Mp(s){var a=vt(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var f=c.dispatch,g=c.pending,b=a.memoizedState;if(g!==null){c.pending=null;var E=g=g.next;do b=s(b,E.action),E=E.next;while(E!==g);Rn(b,a.memoizedState)||(kt=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),c.lastRenderedState=b}return[b,f]}function qb(s,a,c){var f=Ae,g=vt(),b=Ue;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=a();var E=!Rn((Je||g).memoizedState,c);if(E&&(g.memoizedState=c,kt=!0),g=g.queue,jp(Gb.bind(null,f,g,s),[s]),g.getSnapshot!==a||E||St!==null&&St.memoizedState.tag&1){if(f.flags|=2048,oa(9,{destroy:void 0},Fb.bind(null,f,g,c,a),null),Qe===null)throw Error(r(349));b||(ri&127)!==0||Vb(f,a,c)}return c}function Vb(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Ae.updateQueue,a===null?(a=Pu(),Ae.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function Fb(s,a,c,f){a.value=c,a.getSnapshot=f,Kb(a)&&Wb(s)}function Gb(s,a,c){return c(function(){Kb(a)&&Wb(s)})}function Kb(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Rn(s,c)}catch{return!0}}function Wb(s){var a=qs(s,2);a!==null&&Cn(a,s,2)}function Rp(s){var a=hn();if(typeof s=="function"){var c=s;if(s=c(),Qs){$t(!0);try{c()}finally{$t(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:s},a}function Jb(s,a,c,f){return s.baseState=c,Np(s,Je,typeof f=="function"?f:ii)}function kA(s,a,c,f,g){if(Gu(s))throw Error(r(485));if(s=a.action,s!==null){var b={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};P.T!==null?c(!0):b.isTransition=!1,f(b),c=a.pending,c===null?(b.next=a.pending=b,Yb(a,b)):(b.next=c.next,a.pending=c.next=b)}}function Yb(s,a){var c=a.action,f=a.payload,g=s.state;if(a.isTransition){var b=P.T,E={};P.T=E;try{var C=c(g,f),M=P.S;M!==null&&M(E,C),Xb(s,a,C)}catch(H){Dp(s,a,H)}finally{b!==null&&E.types!==null&&(b.types=E.types),P.T=b}}else try{b=c(g,f),Xb(s,a,b)}catch(H){Dp(s,a,H)}}function Xb(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Qb(s,a,f)},function(f){return Dp(s,a,f)}):Qb(s,a,c)}function Qb(s,a,c){a.status="fulfilled",a.value=c,Zb(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,Yb(s,c)))}function Dp(s,a,c){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,Zb(a),a=a.next;while(a!==f)}s.action=null}function Zb(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function ev(s,a){return a}function tv(s,a){if(Ue){var c=Qe.formState;if(c!==null){e:{var f=Ae;if(Ue){if(rt){t:{for(var g=rt,b=Qn;g.nodeType!==8;){if(!b){g=null;break t}if(g=er(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){rt=er(g.nextSibling),f=g.data==="F!";break e}}$i(f)}f=!1}f&&(a=c[0])}}return c=hn(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ev,lastRenderedState:a},c.queue=f,c=wv.bind(null,Ae,f),f.dispatch=c,f=Rp(!1),b=Up.bind(null,Ae,!1,f.queue),f=hn(),g={state:a,dispatch:null,action:s,pending:null},f.queue=g,c=kA.bind(null,Ae,g,b,c),g.dispatch=c,f.memoizedState=s,[a,c,!1]}function nv(s){var a=vt();return rv(a,Je,s)}function rv(s,a,c){if(a=Np(s,a,ev)[0],s=qu(ii)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=jl(a)}catch(E){throw E===ta?Du:E}else f=a;a=vt();var g=a.queue,b=g.dispatch;return c!==a.memoizedState&&(Ae.flags|=2048,oa(9,{destroy:void 0},EA.bind(null,g,c),null)),[f,b,s]}function EA(s,a){s.action=a}function iv(s){var a=vt(),c=Je;if(c!==null)return rv(a,c,s);vt(),a=a.memoizedState,c=vt();var f=c.queue.dispatch;return c.memoizedState=s,[a,f,!1]}function oa(s,a,c,f){return s={tag:s,create:c,deps:f,inst:a,next:null},a=Ae.updateQueue,a===null&&(a=Pu(),Ae.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,a.lastEffect=s),s}function sv(){return vt().memoizedState}function Vu(s,a,c,f){var g=hn();Ae.flags|=s,g.memoizedState=oa(1|a,{destroy:void 0},c,f===void 0?null:f)}function Fu(s,a,c,f){var g=vt();f=f===void 0?null:f;var b=g.memoizedState.inst;Je!==null&&f!==null&&Ep(f,Je.memoizedState.deps)?g.memoizedState=oa(a,b,c,f):(Ae.flags|=s,g.memoizedState=oa(1|a,b,c,f))}function ov(s,a){Vu(8390656,8,s,a)}function jp(s,a){Fu(2048,8,s,a)}function TA(s){Ae.flags|=4;var a=Ae.updateQueue;if(a===null)a=Pu(),Ae.updateQueue=a,a.events=[s];else{var c=a.events;c===null?a.events=[s]:c.push(s)}}function av(s){var a=vt().memoizedState;return TA({ref:a,nextImpl:s}),function(){if((He&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function lv(s,a){return Fu(4,2,s,a)}function cv(s,a){return Fu(4,4,s,a)}function uv(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function dv(s,a,c){c=c!=null?c.concat([s]):null,Fu(4,4,uv.bind(null,a,s),c)}function Lp(){}function fv(s,a){var c=vt();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&Ep(a,f[1])?f[0]:(c.memoizedState=[s,a],s)}function hv(s,a){var c=vt();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&Ep(a,f[1]))return f[0];if(f=s(),Qs){$t(!0);try{s()}finally{$t(!1)}}return c.memoizedState=[f,a],f}function zp(s,a,c){return c===void 0||(ri&1073741824)!==0&&(ze&261930)===0?s.memoizedState=a:(s.memoizedState=c,s=pw(),Ae.lanes|=s,Ji|=s,c)}function pv(s,a,c,f){return Rn(c,a)?c:ra.current!==null?(s=zp(s,c,f),Rn(s,a)||(kt=!0),s):(ri&42)===0||(ri&1073741824)!==0&&(ze&261930)===0?(kt=!0,s.memoizedState=c):(s=pw(),Ae.lanes|=s,Ji|=s,a)}function mv(s,a,c,f,g){var b=Y.p;Y.p=b!==0&&8>b?b:8;var E=P.T,C={};P.T=C,Up(s,!1,a,c);try{var M=g(),H=P.S;if(H!==null&&H(C,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var F=wA(M,f);Ll(s,a,F,Bn(s))}else Ll(s,a,f,Bn(s))}catch(J){Ll(s,a,{then:function(){},status:"rejected",reason:J},Bn())}finally{Y.p=b,E!==null&&C.types!==null&&(E.types=C.types),P.T=E}}function CA(){}function Ip(s,a,c,f){if(s.tag!==5)throw Error(r(476));var g=gv(s).queue;mv(s,g,a,W,c===null?CA:function(){return yv(s),c(f)})}function gv(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:W},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function yv(s){var a=gv(s);a.next===null&&(a=s.alternate.memoizedState),Ll(s,a.next.queue,{},Bn())}function Bp(){return Ft(Ql)}function bv(){return vt().memoizedState}function vv(){return vt().memoizedState}function _A(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=Bn();s=qi(c);var f=Vi(a,s,c);f!==null&&(Cn(f,a,c),Nl(f,a,c)),a={cache:hp()},s.payload=a;return}a=a.return}}function AA(s,a,c){var f=Bn();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Gu(s)?xv(a,c):(c=np(s,a,c,f),c!==null&&(Cn(c,s,f),Sv(c,a,f)))}function wv(s,a,c){var f=Bn();Ll(s,a,c,f)}function Ll(s,a,c,f){var g={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gu(s))xv(a,g);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var E=a.lastRenderedState,C=b(E,c);if(g.hasEagerState=!0,g.eagerState=C,Rn(C,E))return Cu(s,a,g,0),Qe===null&&Tu(),!1}catch{}finally{}if(c=np(s,a,g,f),c!==null)return Cn(c,s,f),Sv(c,a,f),!0}return!1}function Up(s,a,c,f){if(f={lane:2,revertLane:ym(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Gu(s)){if(a)throw Error(r(479))}else a=np(s,c,f,2),a!==null&&Cn(a,s,2)}function Gu(s){var a=s.alternate;return s===Ae||a!==null&&a===Ae}function xv(s,a){ia=Uu=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function Sv(s,a,c){if((c&4194048)!==0){var f=a.lanes;f&=s.pendingLanes,c|=f,a.lanes=c,Lh(s,c)}}var zl={readContext:Ft,use:Hu,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};zl.useEffectEvent=ht;var kv={readContext:Ft,use:Hu,useCallback:function(s,a){return hn().memoizedState=[s,a===void 0?null:a],s},useContext:Ft,useEffect:ov,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Vu(4194308,4,uv.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Vu(4194308,4,s,a)},useInsertionEffect:function(s,a){Vu(4,2,s,a)},useMemo:function(s,a){var c=hn();a=a===void 0?null:a;var f=s();if(Qs){$t(!0);try{s()}finally{$t(!1)}}return c.memoizedState=[f,a],f},useReducer:function(s,a,c){var f=hn();if(c!==void 0){var g=c(a);if(Qs){$t(!0);try{c(a)}finally{$t(!1)}}}else g=a;return f.memoizedState=f.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},f.queue=s,s=s.dispatch=AA.bind(null,Ae,s),[f.memoizedState,s]},useRef:function(s){var a=hn();return s={current:s},a.memoizedState=s},useState:function(s){s=Rp(s);var a=s.queue,c=wv.bind(null,Ae,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:Lp,useDeferredValue:function(s,a){var c=hn();return zp(c,s,a)},useTransition:function(){var s=Rp(!1);return s=mv.bind(null,Ae,s.queue,!0,!1),hn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var f=Ae,g=hn();if(Ue){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Qe===null)throw Error(r(349));(ze&127)!==0||Vb(f,a,c)}g.memoizedState=c;var b={value:c,getSnapshot:a};return g.queue=b,ov(Gb.bind(null,f,b,s),[s]),f.flags|=2048,oa(9,{destroy:void 0},Fb.bind(null,f,b,c,a),null),c},useId:function(){var s=hn(),a=Qe.identifierPrefix;if(Ue){var c=Rr,f=Mr;c=(f&~(1<<32-rn(f)-1)).toString(32)+c,a="_"+a+"R_"+c,c=$u++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=xA++,a="_"+a+"r_"+c.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Bp,useFormState:tv,useActionState:tv,useOptimistic:function(s){var a=hn();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Up.bind(null,Ae,!0,c),c.dispatch=a,[s,a]},useMemoCache:Op,useCacheRefresh:function(){return hn().memoizedState=_A.bind(null,Ae)},useEffectEvent:function(s){var a=hn(),c={impl:s};return a.memoizedState=c,function(){if((He&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},$p={readContext:Ft,use:Hu,useCallback:fv,useContext:Ft,useEffect:jp,useImperativeHandle:dv,useInsertionEffect:lv,useLayoutEffect:cv,useMemo:hv,useReducer:qu,useRef:sv,useState:function(){return qu(ii)},useDebugValue:Lp,useDeferredValue:function(s,a){var c=vt();return pv(c,Je.memoizedState,s,a)},useTransition:function(){var s=qu(ii)[0],a=vt().memoizedState;return[typeof s=="boolean"?s:jl(s),a]},useSyncExternalStore:qb,useId:bv,useHostTransitionStatus:Bp,useFormState:nv,useActionState:nv,useOptimistic:function(s,a){var c=vt();return Jb(c,Je,s,a)},useMemoCache:Op,useCacheRefresh:vv};$p.useEffectEvent=av;var Ev={readContext:Ft,use:Hu,useCallback:fv,useContext:Ft,useEffect:jp,useImperativeHandle:dv,useInsertionEffect:lv,useLayoutEffect:cv,useMemo:hv,useReducer:Mp,useRef:sv,useState:function(){return Mp(ii)},useDebugValue:Lp,useDeferredValue:function(s,a){var c=vt();return Je===null?zp(c,s,a):pv(c,Je.memoizedState,s,a)},useTransition:function(){var s=Mp(ii)[0],a=vt().memoizedState;return[typeof s=="boolean"?s:jl(s),a]},useSyncExternalStore:qb,useId:bv,useHostTransitionStatus:Bp,useFormState:iv,useActionState:iv,useOptimistic:function(s,a){var c=vt();return Je!==null?Jb(c,Je,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Op,useCacheRefresh:vv};Ev.useEffectEvent=av;function Pp(s,a,c,f){a=s.memoizedState,c=c(f,a),c=c==null?a:m({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Hp={enqueueSetState:function(s,a,c){s=s._reactInternals;var f=Bn(),g=qi(f);g.payload=a,c!=null&&(g.callback=c),a=Vi(s,g,f),a!==null&&(Cn(a,s,f),Nl(a,s,f))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var f=Bn(),g=qi(f);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=Vi(s,g,f),a!==null&&(Cn(a,s,f),Nl(a,s,f))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Bn(),f=qi(c);f.tag=2,a!=null&&(f.callback=a),a=Vi(s,f,c),a!==null&&(Cn(a,s,c),Nl(a,s,c))}};function Tv(s,a,c,f,g,b,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,b,E):a.prototype&&a.prototype.isPureReactComponent?!Sl(c,f)||!Sl(g,b):!0}function Cv(s,a,c,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==s&&Hp.enqueueReplaceState(a,a.state,null)}function Zs(s,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(s=s.defaultProps){c===a&&(c=m({},c));for(var g in s)c[g]===void 0&&(c[g]=s[g])}return c}function _v(s){Eu(s)}function Av(s){console.error(s)}function Ov(s){Eu(s)}function Ku(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function Nv(s,a,c){try{var f=s.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function qp(s,a,c){return c=qi(c),c.tag=3,c.payload={element:null},c.callback=function(){Ku(s,a)},c}function Mv(s){return s=qi(s),s.tag=3,s}function Rv(s,a,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;s.payload=function(){return g(b)},s.callback=function(){Nv(a,c,f)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){Nv(a,c,f),typeof g!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var C=f.stack;this.componentDidCatch(f.value,{componentStack:C!==null?C:""})})}function OA(s,a,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&Qo(a,c,g,!0),c=jn.current,c!==null){switch(c.tag){case 31:case 13:return Zn===null?sd():c.alternate===null&&pt===0&&(pt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===ju?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),pm(s,f,g)),!1;case 22:return c.flags|=65536,f===ju?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),pm(s,f,g)),!1}throw Error(r(435,c.tag))}return pm(s,f,g),sd(),!1}if(Ue)return a=jn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,f!==lp&&(s=Error(r(422),{cause:f}),Tl(Jn(s,c)))):(f!==lp&&(a=Error(r(423),{cause:f}),Tl(Jn(a,c))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,f=Jn(f,c),g=qp(s.stateNode,f,g),vp(s,g),pt!==4&&(pt=2)),!1;var b=Error(r(520),{cause:f});if(b=Jn(b,c),Vl===null?Vl=[b]:Vl.push(b),pt!==4&&(pt=2),a===null)return!0;f=Jn(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=g&-g,c.lanes|=s,s=qp(c.stateNode,f,s),vp(c,s),!1;case 1:if(a=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Yi===null||!Yi.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Mv(g),Rv(g,s,c,f),vp(c,g),!1}c=c.return}while(c!==null);return!1}var Vp=Error(r(461)),kt=!1;function Gt(s,a,c,f){a.child=s===null?zb(a,null,c,f):Xs(a,s.child,c,f)}function Dv(s,a,c,f,g){c=c.render;var b=a.ref;if("ref"in f){var E={};for(var C in f)C!=="ref"&&(E[C]=f[C])}else E=f;return Ks(a),f=Tp(s,a,c,E,b,g),C=Cp(),s!==null&&!kt?(_p(s,a,g),si(s,a,g)):(Ue&&C&&op(a),a.flags|=1,Gt(s,a,f,g),a.child)}function jv(s,a,c,f,g){if(s===null){var b=c.type;return typeof b=="function"&&!rp(b)&&b.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=b,Lv(s,a,b,f,g)):(s=Au(c.type,null,f,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!Qp(s,g)){var E=b.memoizedProps;if(c=c.compare,c=c!==null?c:Sl,c(E,f)&&s.ref===a.ref)return si(s,a,g)}return a.flags|=1,s=Zr(b,f),s.ref=a.ref,s.return=a,a.child=s}function Lv(s,a,c,f,g){if(s!==null){var b=s.memoizedProps;if(Sl(b,f)&&s.ref===a.ref)if(kt=!1,a.pendingProps=f=b,Qp(s,g))(s.flags&131072)!==0&&(kt=!0);else return a.lanes=s.lanes,si(s,a,g)}return Fp(s,a,c,f,g)}function zv(s,a,c,f){var g=f.children,b=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,s!==null){for(f=a.child=s.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~b}else f=0,a.child=null;return Iv(s,a,b,c,f)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ru(a,b!==null?b.cachePool:null),b!==null?Ub(a,b):xp(),$b(a);else return f=a.lanes=536870912,Iv(s,a,b!==null?b.baseLanes|c:c,c,f)}else b!==null?(Ru(a,b.cachePool),Ub(a,b),Gi(),a.memoizedState=null):(s!==null&&Ru(a,null),xp(),Gi());return Gt(s,a,g,c),a.child}function Il(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Iv(s,a,c,f,g){var b=mp();return b=b===null?null:{parent:xt._currentValue,pool:b},a.memoizedState={baseLanes:c,cachePool:b},s!==null&&Ru(a,null),xp(),$b(a),s!==null&&Qo(s,a,f,!0),a.childLanes=g,null}function Wu(s,a){return a=Yu({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Bv(s,a,c){return Xs(a,s.child,null,c),s=Wu(a,a.pendingProps),s.flags|=2,Ln(a),a.memoizedState=null,s}function NA(s,a,c){var f=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Ue){if(f.mode==="hidden")return s=Wu(a,f),a.lanes=536870912,Il(null,s);if(kp(a),(s=rt)?(s=Yw(s,Qn),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Bi!==null?{id:Mr,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},c=xb(s),c.return=a,a.child=c,Vt=a,rt=null)):s=null,s===null)throw $i(a);return a.lanes=536870912,null}return Wu(a,f)}var b=s.memoizedState;if(b!==null){var E=b.dehydrated;if(kp(a),g)if(a.flags&256)a.flags&=-257,a=Bv(s,a,c);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(kt||Qo(s,a,c,!1),g=(c&s.childLanes)!==0,kt||g){if(f=Qe,f!==null&&(E=Io(f,c),E!==0&&E!==b.retryLane))throw b.retryLane=E,qs(s,E),Cn(f,s,E),Vp;sd(),a=Bv(s,a,c)}else s=b.treeContext,rt=er(E.nextSibling),Vt=a,Ue=!0,Ui=null,Qn=!1,s!==null&&Eb(a,s),a=Wu(a,f),a.flags|=4096;return a}return s=Zr(s.child,{mode:f.mode,children:f.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Ju(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function Fp(s,a,c,f,g){return Ks(a),c=Tp(s,a,c,f,void 0,g),f=Cp(),s!==null&&!kt?(_p(s,a,g),si(s,a,g)):(Ue&&f&&op(a),a.flags|=1,Gt(s,a,c,g),a.child)}function Uv(s,a,c,f,g,b){return Ks(a),a.updateQueue=null,c=Hb(a,f,c,g),Pb(s),f=Cp(),s!==null&&!kt?(_p(s,a,b),si(s,a,b)):(Ue&&f&&op(a),a.flags|=1,Gt(s,a,c,b),a.child)}function $v(s,a,c,f,g){if(Ks(a),a.stateNode===null){var b=Wo,E=c.contextType;typeof E=="object"&&E!==null&&(b=Ft(E)),b=new c(f,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Hp,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=f,b.state=a.memoizedState,b.refs={},yp(a),E=c.contextType,b.context=typeof E=="object"&&E!==null?Ft(E):Wo,b.state=a.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Pp(a,c,E,f),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&Hp.enqueueReplaceState(b,b.state,null),Rl(a,f,b,g),Ml(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(s===null){b=a.stateNode;var C=a.memoizedProps,M=Zs(c,C);b.props=M;var H=b.context,F=c.contextType;E=Wo,typeof F=="object"&&F!==null&&(E=Ft(F));var J=c.getDerivedStateFromProps;F=typeof J=="function"||typeof b.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,F||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C||H!==E)&&Cv(a,b,f,E),Hi=!1;var q=a.memoizedState;b.state=q,Rl(a,f,b,g),Ml(),H=a.memoizedState,C||q!==H||Hi?(typeof J=="function"&&(Pp(a,c,J,f),H=a.memoizedState),(M=Hi||Tv(a,c,M,f,q,H,E))?(F||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=H),b.props=f,b.state=H,b.context=E,f=M):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{b=a.stateNode,bp(s,a),E=a.memoizedProps,F=Zs(c,E),b.props=F,J=a.pendingProps,q=b.context,H=c.contextType,M=Wo,typeof H=="object"&&H!==null&&(M=Ft(H)),C=c.getDerivedStateFromProps,(H=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==J||q!==M)&&Cv(a,b,f,M),Hi=!1,q=a.memoizedState,b.state=q,Rl(a,f,b,g),Ml();var V=a.memoizedState;E!==J||q!==V||Hi||s!==null&&s.dependencies!==null&&Nu(s.dependencies)?(typeof C=="function"&&(Pp(a,c,C,f),V=a.memoizedState),(F=Hi||Tv(a,c,F,f,q,V,M)||s!==null&&s.dependencies!==null&&Nu(s.dependencies))?(H||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,V,M),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,V,M)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=V),b.props=f,b.state=V,b.context=M,f=F):(typeof b.componentDidUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(a.flags|=1024),f=!1)}return b=f,Ju(s,a),f=(a.flags&128)!==0,b||f?(b=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&f?(a.child=Xs(a,s.child,null,g),a.child=Xs(a,null,c,g)):Gt(s,a,c,g),a.memoizedState=b.state,s=a.child):s=si(s,a,g),s}function Pv(s,a,c,f){return Fs(),a.flags|=256,Gt(s,a,c,f),a.child}var Gp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kp(s){return{baseLanes:s,cachePool:Nb()}}function Wp(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=In),s}function Hv(s,a,c){var f=a.pendingProps,g=!1,b=(a.flags&128)!==0,E;if((E=b)||(E=s!==null&&s.memoizedState===null?!1:(bt.current&2)!==0),E&&(g=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ue){if(g?Fi(a):Gi(),(s=rt)?(s=Yw(s,Qn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Bi!==null?{id:Mr,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},c=xb(s),c.return=a,a.child=c,Vt=a,rt=null)):s=null,s===null)throw $i(a);return Nm(s)?a.lanes=32:a.lanes=536870912,null}var C=f.children;return f=f.fallback,g?(Gi(),g=a.mode,C=Yu({mode:"hidden",children:C},g),f=Vs(f,g,c,null),C.return=a,f.return=a,C.sibling=f,a.child=C,f=a.child,f.memoizedState=Kp(c),f.childLanes=Wp(s,E,c),a.memoizedState=Gp,Il(null,f)):(Fi(a),Jp(a,C))}var M=s.memoizedState;if(M!==null&&(C=M.dehydrated,C!==null)){if(b)a.flags&256?(Fi(a),a.flags&=-257,a=Yp(s,a,c)):a.memoizedState!==null?(Gi(),a.child=s.child,a.flags|=128,a=null):(Gi(),C=f.fallback,g=a.mode,f=Yu({mode:"visible",children:f.children},g),C=Vs(C,g,c,null),C.flags|=2,f.return=a,C.return=a,f.sibling=C,a.child=f,Xs(a,s.child,null,c),f=a.child,f.memoizedState=Kp(c),f.childLanes=Wp(s,E,c),a.memoizedState=Gp,a=Il(null,f));else if(Fi(a),Nm(C)){if(E=C.nextSibling&&C.nextSibling.dataset,E)var H=E.dgst;E=H,f=Error(r(419)),f.stack="",f.digest=E,Tl({value:f,source:null,stack:null}),a=Yp(s,a,c)}else if(kt||Qo(s,a,c,!1),E=(c&s.childLanes)!==0,kt||E){if(E=Qe,E!==null&&(f=Io(E,c),f!==0&&f!==M.retryLane))throw M.retryLane=f,qs(s,f),Cn(E,s,f),Vp;Om(C)||sd(),a=Yp(s,a,c)}else Om(C)?(a.flags|=192,a.child=s.child,a=null):(s=M.treeContext,rt=er(C.nextSibling),Vt=a,Ue=!0,Ui=null,Qn=!1,s!==null&&Eb(a,s),a=Jp(a,f.children),a.flags|=4096);return a}return g?(Gi(),C=f.fallback,g=a.mode,M=s.child,H=M.sibling,f=Zr(M,{mode:"hidden",children:f.children}),f.subtreeFlags=M.subtreeFlags&65011712,H!==null?C=Zr(H,C):(C=Vs(C,g,c,null),C.flags|=2),C.return=a,f.return=a,f.sibling=C,a.child=f,Il(null,f),f=a.child,C=s.child.memoizedState,C===null?C=Kp(c):(g=C.cachePool,g!==null?(M=xt._currentValue,g=g.parent!==M?{parent:M,pool:M}:g):g=Nb(),C={baseLanes:C.baseLanes|c,cachePool:g}),f.memoizedState=C,f.childLanes=Wp(s,E,c),a.memoizedState=Gp,Il(s.child,f)):(Fi(a),c=s.child,s=c.sibling,c=Zr(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,s!==null&&(E=a.deletions,E===null?(a.deletions=[s],a.flags|=16):E.push(s)),a.child=c,a.memoizedState=null,c)}function Jp(s,a){return a=Yu({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Yu(s,a){return s=Dn(22,s,null,a),s.lanes=0,s}function Yp(s,a,c){return Xs(a,s.child,null,c),s=Jp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function qv(s,a,c){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),dp(s.return,a,c)}function Xp(s,a,c,f,g,b){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g,treeForkCount:b}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=c,E.tailMode=g,E.treeForkCount=b)}function Vv(s,a,c){var f=a.pendingProps,g=f.revealOrder,b=f.tail;f=f.children;var E=bt.current,C=(E&2)!==0;if(C?(E=E&1|2,a.flags|=128):E&=1,te(bt,E),Gt(s,a,f,c),f=Ue?El:0,!C&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&qv(s,c,a);else if(s.tag===19)qv(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)s=c.alternate,s!==null&&Bu(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Xp(a,!1,g,c,b,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&Bu(s)===null){a.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}Xp(a,!0,c,null,b,f);break;case"together":Xp(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function si(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),Ji|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(Qo(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,c=Zr(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=Zr(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function Qp(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Nu(s)))}function MA(s,a,c){switch(a.tag){case 3:et(a,a.stateNode.containerInfo),Pi(a,xt,s.memoizedState.cache),Fs();break;case 27:case 5:On(a);break;case 4:et(a,a.stateNode.containerInfo);break;case 10:Pi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,kp(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Fi(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Hv(s,a,c):(Fi(a),s=si(s,a,c),s!==null?s.sibling:null);Fi(a);break;case 19:var g=(s.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(Qo(s,a,c,!1),f=(c&a.childLanes)!==0),g){if(f)return Vv(s,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),te(bt,bt.current),f)break;return null;case 22:return a.lanes=0,zv(s,a,c,a.pendingProps);case 24:Pi(a,xt,s.memoizedState.cache)}return si(s,a,c)}function Fv(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)kt=!0;else{if(!Qp(s,c)&&(a.flags&128)===0)return kt=!1,MA(s,a,c);kt=(s.flags&131072)!==0}else kt=!1,Ue&&(a.flags&1048576)!==0&&kb(a,El,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(s=Js(a.elementType),a.type=s,typeof s=="function")rp(s)?(f=Zs(s,f),a.tag=1,a=$v(null,a,s,f,c)):(a.tag=0,a=Fp(null,a,s,f,c));else{if(s!=null){var g=s.$$typeof;if(g===j){a.tag=11,a=Dv(null,a,s,f,c);break e}else if(g===z){a.tag=14,a=jv(null,a,s,f,c);break e}}throw a=me(s)||s,Error(r(306,a,""))}}return a;case 0:return Fp(s,a,a.type,a.pendingProps,c);case 1:return f=a.type,g=Zs(f,a.pendingProps),$v(s,a,f,g,c);case 3:e:{if(et(a,a.stateNode.containerInfo),s===null)throw Error(r(387));f=a.pendingProps;var b=a.memoizedState;g=b.element,bp(s,a),Rl(a,f,null,c);var E=a.memoizedState;if(f=E.cache,Pi(a,xt,f),f!==b.cache&&fp(a,[xt],c,!0),Ml(),f=E.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Pv(s,a,f,c);break e}else if(f!==g){g=Jn(Error(r(424)),a),Tl(g),a=Pv(s,a,f,c);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(rt=er(s.firstChild),Vt=a,Ue=!0,Ui=null,Qn=!0,c=zb(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Fs(),f===g){a=si(s,a,c);break e}Gt(s,a,f,c)}a=a.child}return a;case 26:return Ju(s,a),s===null?(c=nx(a.type,null,a.pendingProps,null))?a.memoizedState=c:Ue||(c=a.type,s=a.pendingProps,f=fd(Se.current).createElement(c),f[Ke]=a,f[Pt]=s,Kt(f,c,s),ct(f),a.stateNode=f):a.memoizedState=nx(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return On(a),s===null&&Ue&&(f=a.stateNode=Zw(a.type,a.pendingProps,Se.current),Vt=a,Qn=!0,g=rt,es(a.type)?(Mm=g,rt=er(f.firstChild)):rt=g),Gt(s,a,a.pendingProps.children,c),Ju(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ue&&((g=f=rt)&&(f=aO(f,a.type,a.pendingProps,Qn),f!==null?(a.stateNode=f,Vt=a,rt=er(f.firstChild),Qn=!1,g=!0):g=!1),g||$i(a)),On(a),g=a.type,b=a.pendingProps,E=s!==null?s.memoizedProps:null,f=b.children,Cm(g,b)?f=null:E!==null&&Cm(g,E)&&(a.flags|=32),a.memoizedState!==null&&(g=Tp(s,a,SA,null,null,c),Ql._currentValue=g),Ju(s,a),Gt(s,a,f,c),a.child;case 6:return s===null&&Ue&&((s=c=rt)&&(c=lO(c,a.pendingProps,Qn),c!==null?(a.stateNode=c,Vt=a,rt=null,s=!0):s=!1),s||$i(a)),null;case 13:return Hv(s,a,c);case 4:return et(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=Xs(a,null,f,c):Gt(s,a,f,c),a.child;case 11:return Dv(s,a,a.type,a.pendingProps,c);case 7:return Gt(s,a,a.pendingProps,c),a.child;case 8:return Gt(s,a,a.pendingProps.children,c),a.child;case 12:return Gt(s,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,Pi(a,a.type,f.value),Gt(s,a,f.children,c),a.child;case 9:return g=a.type._context,f=a.pendingProps.children,Ks(a),g=Ft(g),f=f(g),a.flags|=1,Gt(s,a,f,c),a.child;case 14:return jv(s,a,a.type,a.pendingProps,c);case 15:return Lv(s,a,a.type,a.pendingProps,c);case 19:return Vv(s,a,c);case 31:return NA(s,a,c);case 22:return zv(s,a,c,a.pendingProps);case 24:return Ks(a),f=Ft(xt),s===null?(g=mp(),g===null&&(g=Qe,b=hp(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),a.memoizedState={parent:f,cache:g},yp(a),Pi(a,xt,g)):((s.lanes&c)!==0&&(bp(s,a),Rl(a,null,null,c),Ml()),g=s.memoizedState,b=a.memoizedState,g.parent!==f?(g={parent:f,cache:f},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Pi(a,xt,f)):(f=b.cache,Pi(a,xt,f),f!==g.cache&&fp(a,[xt],c,!0))),Gt(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function oi(s){s.flags|=4}function Zp(s,a,c,f,g){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(bw())s.flags|=8192;else throw Ys=ju,gp}else s.flags&=-16777217}function Gv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!ax(a))if(bw())s.flags|=8192;else throw Ys=ju,gp}function Xu(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Lo():536870912,s.lanes|=a,ua|=a)}function Bl(s,a){if(!Ue)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function it(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(a)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=c,a}function RA(s,a,c){var f=a.pendingProps;switch(ap(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(a),null;case 1:return it(a),null;case 3:return c=a.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),ni(xt),qe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Xo(a)?oi(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,cp())),it(a),null;case 26:var g=a.type,b=a.memoizedState;return s===null?(oi(a),b!==null?(it(a),Gv(a,b)):(it(a),Zp(a,g,null,f,c))):b?b!==s.memoizedState?(oi(a),it(a),Gv(a,b)):(it(a),a.flags&=-16777217):(s=s.memoizedProps,s!==f&&oi(a),it(a),Zp(a,g,s,f,c)),null;case 27:if(ur(a),c=Se.current,g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==f&&oi(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return it(a),null}s=re.current,Xo(a)?Tb(a):(s=Zw(g,f,c),a.stateNode=s,oi(a))}return it(a),null;case 5:if(ur(a),g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==f&&oi(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return it(a),null}if(b=re.current,Xo(a))Tb(a);else{var E=fd(Se.current);switch(b){case 1:b=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=E.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?E.createElement("select",{is:f.is}):E.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?E.createElement(g,{is:f.is}):E.createElement(g)}}b[Ke]=a,b[Pt]=f;e:for(E=a.child;E!==null;){if(E.tag===5||E.tag===6)b.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===a)break e;for(;E.sibling===null;){if(E.return===null||E.return===a)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}a.stateNode=b;e:switch(Kt(b,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&oi(a)}}return it(a),Zp(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,c),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==f&&oi(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(s=Se.current,Xo(a)){if(s=a.stateNode,c=a.memoizedProps,f=null,g=Vt,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}s[Ke]=a,s=!!(s.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||Hw(s.nodeValue,c)),s||$i(a,!0)}else s=fd(s).createTextNode(f),s[Ke]=a,a.stateNode=s}return it(a),null;case 31:if(c=a.memoizedState,s===null||s.memoizedState!==null){if(f=Xo(a),c!==null){if(s===null){if(!f)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ke]=a}else Fs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;it(a),s=!1}else c=cp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return a.flags&256?(Ln(a),a):(Ln(a),null);if((a.flags&128)!==0)throw Error(r(558))}return it(a),null;case 13:if(f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Xo(a),f!==null&&f.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Ke]=a}else Fs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;it(a),g=!1}else g=cp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Ln(a),a):(Ln(a),null)}return Ln(a),(a.flags&128)!==0?(a.lanes=c,a):(c=f!==null,s=s!==null&&s.memoizedState!==null,c&&(f=a.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)),c!==s&&c&&(a.child.flags|=8192),Xu(a,a.updateQueue),it(a),null);case 4:return qe(),s===null&&xm(a.stateNode.containerInfo),it(a),null;case 10:return ni(a.type),it(a),null;case 19:if(G(bt),f=a.memoizedState,f===null)return it(a),null;if(g=(a.flags&128)!==0,b=f.rendering,b===null)if(g)Bl(f,!1);else{if(pt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Bu(s),b!==null){for(a.flags|=128,Bl(f,!1),s=b.updateQueue,a.updateQueue=s,Xu(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)wb(c,s),c=c.sibling;return te(bt,bt.current&1|2),Ue&&ei(a,f.treeForkCount),a.child}s=s.sibling}f.tail!==null&&cn()>nd&&(a.flags|=128,g=!0,Bl(f,!1),a.lanes=4194304)}else{if(!g)if(s=Bu(b),s!==null){if(a.flags|=128,g=!0,s=s.updateQueue,a.updateQueue=s,Xu(a,s),Bl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!Ue)return it(a),null}else 2*cn()-f.renderingStartTime>nd&&c!==536870912&&(a.flags|=128,g=!0,Bl(f,!1),a.lanes=4194304);f.isBackwards?(b.sibling=a.child,a.child=b):(s=f.last,s!==null?s.sibling=b:a.child=b,f.last=b)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=cn(),s.sibling=null,c=bt.current,te(bt,g?c&1|2:c&1),Ue&&ei(a,f.treeForkCount),s):(it(a),null);case 22:case 23:return Ln(a),Sp(),f=a.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&(it(a),a.subtreeFlags&6&&(a.flags|=8192)):it(a),c=a.updateQueue,c!==null&&Xu(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),s!==null&&G(Ws),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ni(xt),it(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function DA(s,a){switch(ap(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ni(xt),qe(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return ur(a),null;case 31:if(a.memoizedState!==null){if(Ln(a),a.alternate===null)throw Error(r(340));Fs()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Ln(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Fs()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return G(bt),null;case 4:return qe(),null;case 10:return ni(a.type),null;case 22:case 23:return Ln(a),Sp(),s!==null&&G(Ws),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ni(xt),null;case 25:return null;default:return null}}function Kv(s,a){switch(ap(a),a.tag){case 3:ni(xt),qe();break;case 26:case 27:case 5:ur(a);break;case 4:qe();break;case 31:a.memoizedState!==null&&Ln(a);break;case 13:Ln(a);break;case 19:G(bt);break;case 10:ni(a.type);break;case 22:case 23:Ln(a),Sp(),s!==null&&G(Ws);break;case 24:ni(xt)}}function Ul(s,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&s)===s){f=void 0;var b=c.create,E=c.inst;f=b(),E.destroy=f}c=c.next}while(c!==g)}}catch(C){Fe(a,a.return,C)}}function Ki(s,a,c){try{var f=a.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&s)===s){var E=f.inst,C=E.destroy;if(C!==void 0){E.destroy=void 0,g=a;var M=c,H=C;try{H()}catch(F){Fe(g,M,F)}}}f=f.next}while(f!==b)}}catch(F){Fe(a,a.return,F)}}function Wv(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{Bb(a,c)}catch(f){Fe(s,s.return,f)}}}function Jv(s,a,c){c.props=Zs(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(f){Fe(s,a,f)}}function $l(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof c=="function"?s.refCleanup=c(f):c.current=f}}catch(g){Fe(s,a,g)}}function Dr(s,a){var c=s.ref,f=s.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){Fe(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Fe(s,a,g)}else c.current=null}function Yv(s){var a=s.type,c=s.memoizedProps,f=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){Fe(s,s.return,g)}}function em(s,a,c){try{var f=s.stateNode;tO(f,s.type,c,a),f[Pt]=a}catch(g){Fe(s,s.return,g)}}function Xv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&es(s.type)||s.tag===4}function tm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Xv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&es(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function nm(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Re));else if(f!==4&&(f===27&&es(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(nm(s,a,c),s=s.sibling;s!==null;)nm(s,a,c),s=s.sibling}function Qu(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(f!==4&&(f===27&&es(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Qu(s,a,c),s=s.sibling;s!==null;)Qu(s,a,c),s=s.sibling}function Qv(s){var a=s.stateNode,c=s.memoizedProps;try{for(var f=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Kt(a,f,c),a[Ke]=s,a[Pt]=c}catch(b){Fe(s,s.return,b)}}var ai=!1,Et=!1,rm=!1,Zv=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function jA(s,a){if(s=s.containerInfo,Em=vd,s=db(s),Yh(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var E=0,C=-1,M=-1,H=0,F=0,J=s,q=null;t:for(;;){for(var V;J!==c||g!==0&&J.nodeType!==3||(C=E+g),J!==b||f!==0&&J.nodeType!==3||(M=E+f),J.nodeType===3&&(E+=J.nodeValue.length),(V=J.firstChild)!==null;)q=J,J=V;for(;;){if(J===s)break t;if(q===c&&++H===g&&(C=E),q===b&&++F===f&&(M=E),(V=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=V}c=C===-1||M===-1?null:{start:C,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for(Tm={focusedElem:s,selectionRange:c},vd=!1,Lt=a;Lt!==null;)if(a=Lt,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Lt=s;else for(;Lt!==null;){switch(a=Lt,b=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)g=s[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,c=a,g=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var se=Zs(c.type,g);s=f.getSnapshotBeforeUpdate(se,b),f.__reactInternalSnapshotBeforeUpdate=s}catch(ge){Fe(c,c.return,ge)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)Am(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Am(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Lt=s;break}Lt=a.return}}function ew(s,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:ci(s,c),f&4&&Ul(5,c);break;case 1:if(ci(s,c),f&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(E){Fe(c,c.return,E)}else{var g=Zs(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(E){Fe(c,c.return,E)}}f&64&&Wv(c),f&512&&$l(c,c.return);break;case 3:if(ci(s,c),f&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Bb(s,a)}catch(E){Fe(c,c.return,E)}}break;case 27:a===null&&f&4&&Qv(c);case 26:case 5:ci(s,c),a===null&&f&4&&Yv(c),f&512&&$l(c,c.return);break;case 12:ci(s,c);break;case 31:ci(s,c),f&4&&rw(s,c);break;case 13:ci(s,c),f&4&&iw(s,c),f&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=qA.bind(null,c),cO(s,c))));break;case 22:if(f=c.memoizedState!==null||ai,!f){a=a!==null&&a.memoizedState!==null||Et,g=ai;var b=Et;ai=f,(Et=a)&&!b?ui(s,c,(c.subtreeFlags&8772)!==0):ci(s,c),ai=g,Et=b}break;case 30:break;default:ci(s,c)}}function tw(s){var a=s.alternate;a!==null&&(s.alternate=null,tw(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Kr(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var at=null,Sn=!1;function li(s,a,c){for(c=c.child;c!==null;)nw(s,a,c),c=c.sibling}function nw(s,a,c){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(tn,c)}catch{}switch(c.tag){case 26:Et||Dr(c,a),li(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Et||Dr(c,a);var f=at,g=Sn;es(c.type)&&(at=c.stateNode,Sn=!1),li(s,a,c),Jl(c.stateNode),at=f,Sn=g;break;case 5:Et||Dr(c,a);case 6:if(f=at,g=Sn,at=null,li(s,a,c),at=f,Sn=g,at!==null)if(Sn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(c.stateNode)}catch(b){Fe(c,a,b)}else try{at.removeChild(c.stateNode)}catch(b){Fe(c,a,b)}break;case 18:at!==null&&(Sn?(s=at,Ww(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),ba(s)):Ww(at,c.stateNode));break;case 4:f=at,g=Sn,at=c.stateNode.containerInfo,Sn=!0,li(s,a,c),at=f,Sn=g;break;case 0:case 11:case 14:case 15:Ki(2,c,a),Et||Ki(4,c,a),li(s,a,c);break;case 1:Et||(Dr(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Jv(c,a,f)),li(s,a,c);break;case 21:li(s,a,c);break;case 22:Et=(f=Et)||c.memoizedState!==null,li(s,a,c),Et=f;break;default:li(s,a,c)}}function rw(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ba(s)}catch(c){Fe(a,a.return,c)}}}function iw(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ba(s)}catch(c){Fe(a,a.return,c)}}function LA(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Zv),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Zv),a;default:throw Error(r(435,s.tag))}}function Zu(s,a){var c=LA(s);a.forEach(function(f){if(!c.has(f)){c.add(f);var g=VA.bind(null,s,f);f.then(g,g)}})}function kn(s,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],b=s,E=a,C=E;e:for(;C!==null;){switch(C.tag){case 27:if(es(C.type)){at=C.stateNode,Sn=!1;break e}break;case 5:at=C.stateNode,Sn=!1;break e;case 3:case 4:at=C.stateNode.containerInfo,Sn=!0;break e}C=C.return}if(at===null)throw Error(r(160));nw(b,E,g),at=null,Sn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)sw(a,s),a=a.sibling}var br=null;function sw(s,a){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:kn(a,s),En(s),f&4&&(Ki(3,s,s.return),Ul(3,s),Ki(5,s,s.return));break;case 1:kn(a,s),En(s),f&512&&(Et||c===null||Dr(c,c.return)),f&64&&ai&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=br;if(kn(a,s),En(s),f&512&&(Et||c===null||Dr(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=s.memoizedState,c===null)if(f===null)if(s.stateNode===null){e:{f=s.type,c=s.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Li]||b[Ke]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),Kt(b,f,c),b[Ke]=s,ct(b),f=b;break e;case"link":var E=sx("link","href",g).get(f+(c.href||""));if(E){for(var C=0;C<E.length;C++)if(b=E[C],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(C,1);break t}}b=g.createElement(f),Kt(b,f,c),g.head.appendChild(b);break;case"meta":if(E=sx("meta","content",g).get(f+(c.content||""))){for(C=0;C<E.length;C++)if(b=E[C],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(C,1);break t}}b=g.createElement(f),Kt(b,f,c),g.head.appendChild(b);break;default:throw Error(r(468,f))}b[Ke]=s,ct(b),f=b}s.stateNode=f}else ox(g,s.type,s.stateNode);else s.stateNode=ix(g,f,s.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?ox(g,s.type,s.stateNode):ix(g,f,s.memoizedProps)):f===null&&s.stateNode!==null&&em(s,s.memoizedProps,c.memoizedProps)}break;case 27:kn(a,s),En(s),f&512&&(Et||c===null||Dr(c,c.return)),c!==null&&f&4&&em(s,s.memoizedProps,c.memoizedProps);break;case 5:if(kn(a,s),En(s),f&512&&(Et||c===null||Dr(c,c.return)),s.flags&32){g=s.stateNode;try{Kn(g,"")}catch(se){Fe(s,s.return,se)}}f&4&&s.stateNode!=null&&(g=s.memoizedProps,em(s,g,c!==null?c.memoizedProps:g)),f&1024&&(rm=!0);break;case 6:if(kn(a,s),En(s),f&4){if(s.stateNode===null)throw Error(r(162));f=s.memoizedProps,c=s.stateNode;try{c.nodeValue=f}catch(se){Fe(s,s.return,se)}}break;case 3:if(md=null,g=br,br=hd(a.containerInfo),kn(a,s),br=g,En(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{ba(a.containerInfo)}catch(se){Fe(s,s.return,se)}rm&&(rm=!1,ow(s));break;case 4:f=br,br=hd(s.stateNode.containerInfo),kn(a,s),En(s),br=f;break;case 12:kn(a,s),En(s);break;case 31:kn(a,s),En(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Zu(s,f)));break;case 13:kn(a,s),En(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(td=cn()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Zu(s,f)));break;case 22:g=s.memoizedState!==null;var M=c!==null&&c.memoizedState!==null,H=ai,F=Et;if(ai=H||g,Et=F||M,kn(a,s),Et=F,ai=H,En(s),f&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||M||ai||Et||eo(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){M=c=a;try{if(b=M.stateNode,g)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{C=M.stateNode;var J=M.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;C.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(se){Fe(M,M.return,se)}}}else if(a.tag===6){if(c===null){M=a;try{M.stateNode.nodeValue=g?"":M.memoizedProps}catch(se){Fe(M,M.return,se)}}}else if(a.tag===18){if(c===null){M=a;try{var V=M.stateNode;g?Jw(V,!0):Jw(M.stateNode,!1)}catch(se){Fe(M,M.return,se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=s.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Zu(s,c))));break;case 19:kn(a,s),En(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Zu(s,f)));break;case 30:break;case 21:break;default:kn(a,s),En(s)}}function En(s){var a=s.flags;if(a&2){try{for(var c,f=s.return;f!==null;){if(Xv(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,b=tm(s);Qu(s,b,g);break;case 5:var E=c.stateNode;c.flags&32&&(Kn(E,""),c.flags&=-33);var C=tm(s);Qu(s,C,E);break;case 3:case 4:var M=c.stateNode.containerInfo,H=tm(s);nm(s,H,M);break;default:throw Error(r(161))}}catch(F){Fe(s,s.return,F)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function ow(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;ow(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function ci(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ew(s,a.alternate,a),a=a.sibling}function eo(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ki(4,a,a.return),eo(a);break;case 1:Dr(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Jv(a,a.return,c),eo(a);break;case 27:Jl(a.stateNode);case 26:case 5:Dr(a,a.return),eo(a);break;case 22:a.memoizedState===null&&eo(a);break;case 30:eo(a);break;default:eo(a)}s=s.sibling}}function ui(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,g=s,b=a,E=b.flags;switch(b.tag){case 0:case 11:case 15:ui(g,b,c),Ul(4,b);break;case 1:if(ui(g,b,c),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(H){Fe(f,f.return,H)}if(f=b,g=f.updateQueue,g!==null){var C=f.stateNode;try{var M=g.shared.hiddenCallbacks;if(M!==null)for(g.shared.hiddenCallbacks=null,g=0;g<M.length;g++)Ib(M[g],C)}catch(H){Fe(f,f.return,H)}}c&&E&64&&Wv(b),$l(b,b.return);break;case 27:Qv(b);case 26:case 5:ui(g,b,c),c&&f===null&&E&4&&Yv(b),$l(b,b.return);break;case 12:ui(g,b,c);break;case 31:ui(g,b,c),c&&E&4&&rw(g,b);break;case 13:ui(g,b,c),c&&E&4&&iw(g,b);break;case 22:b.memoizedState===null&&ui(g,b,c),$l(b,b.return);break;case 30:break;default:ui(g,b,c)}a=a.sibling}}function im(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Cl(c))}function sm(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Cl(s))}function vr(s,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)aw(s,a,c,f),a=a.sibling}function aw(s,a,c,f){var g=a.flags;switch(a.tag){case 0:case 11:case 15:vr(s,a,c,f),g&2048&&Ul(9,a);break;case 1:vr(s,a,c,f);break;case 3:vr(s,a,c,f),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Cl(s)));break;case 12:if(g&2048){vr(s,a,c,f),s=a.stateNode;try{var b=a.memoizedProps,E=b.id,C=b.onPostCommit;typeof C=="function"&&C(E,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(M){Fe(a,a.return,M)}}else vr(s,a,c,f);break;case 31:vr(s,a,c,f);break;case 13:vr(s,a,c,f);break;case 23:break;case 22:b=a.stateNode,E=a.alternate,a.memoizedState!==null?b._visibility&2?vr(s,a,c,f):Pl(s,a):b._visibility&2?vr(s,a,c,f):(b._visibility|=2,aa(s,a,c,f,(a.subtreeFlags&10256)!==0||!1)),g&2048&&im(E,a);break;case 24:vr(s,a,c,f),g&2048&&sm(a.alternate,a);break;default:vr(s,a,c,f)}}function aa(s,a,c,f,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=s,E=a,C=c,M=f,H=E.flags;switch(E.tag){case 0:case 11:case 15:aa(b,E,C,M,g),Ul(8,E);break;case 23:break;case 22:var F=E.stateNode;E.memoizedState!==null?F._visibility&2?aa(b,E,C,M,g):Pl(b,E):(F._visibility|=2,aa(b,E,C,M,g)),g&&H&2048&&im(E.alternate,E);break;case 24:aa(b,E,C,M,g),g&&H&2048&&sm(E.alternate,E);break;default:aa(b,E,C,M,g)}a=a.sibling}}function Pl(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,f=a,g=f.flags;switch(f.tag){case 22:Pl(c,f),g&2048&&im(f.alternate,f);break;case 24:Pl(c,f),g&2048&&sm(f.alternate,f);break;default:Pl(c,f)}a=a.sibling}}var Hl=8192;function la(s,a,c){if(s.subtreeFlags&Hl)for(s=s.child;s!==null;)lw(s,a,c),s=s.sibling}function lw(s,a,c){switch(s.tag){case 26:la(s,a,c),s.flags&Hl&&s.memoizedState!==null&&xO(c,br,s.memoizedState,s.memoizedProps);break;case 5:la(s,a,c);break;case 3:case 4:var f=br;br=hd(s.stateNode.containerInfo),la(s,a,c),br=f;break;case 22:s.memoizedState===null&&(f=s.alternate,f!==null&&f.memoizedState!==null?(f=Hl,Hl=16777216,la(s,a,c),Hl=f):la(s,a,c));break;default:la(s,a,c)}}function cw(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function ql(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Lt=f,dw(f,s)}cw(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)uw(s),s=s.sibling}function uw(s){switch(s.tag){case 0:case 11:case 15:ql(s),s.flags&2048&&Ki(9,s,s.return);break;case 3:ql(s);break;case 12:ql(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,ed(s)):ql(s);break;default:ql(s)}}function ed(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Lt=f,dw(f,s)}cw(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ki(8,a,a.return),ed(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,ed(a));break;default:ed(a)}s=s.sibling}}function dw(s,a){for(;Lt!==null;){var c=Lt;switch(c.tag){case 0:case 11:case 15:Ki(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Cl(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Lt=f;else e:for(c=s;Lt!==null;){f=Lt;var g=f.sibling,b=f.return;if(tw(f),f===c){Lt=null;break e}if(g!==null){g.return=b,Lt=g;break e}Lt=b}}}var zA={getCacheForType:function(s){var a=Ft(xt),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c},cacheSignal:function(){return Ft(xt).controller.signal}},IA=typeof WeakMap=="function"?WeakMap:Map,He=0,Qe=null,je=null,ze=0,Ve=0,zn=null,Wi=!1,ca=!1,om=!1,di=0,pt=0,Ji=0,to=0,am=0,In=0,ua=0,Vl=null,Tn=null,lm=!1,td=0,fw=0,nd=1/0,rd=null,Yi=null,Mt=0,Xi=null,da=null,fi=0,cm=0,um=null,hw=null,Fl=0,dm=null;function Bn(){return(He&2)!==0&&ze!==0?ze&-ze:P.T!==null?ym():zh()}function pw(){if(In===0)if((ze&536870912)===0||Ue){var s=Or;Or<<=1,(Or&3932160)===0&&(Or=262144),In=s}else In=536870912;return s=jn.current,s!==null&&(s.flags|=32),In}function Cn(s,a,c){(s===Qe&&(Ve===2||Ve===9)||s.cancelPendingCommit!==null)&&(fa(s,0),Qi(s,ze,In,!1)),Nr(s,c),((He&2)===0||s!==Qe)&&(s===Qe&&((He&2)===0&&(to|=c),pt===4&&Qi(s,ze,In,!1)),jr(s))}function mw(s,a,c){if((He&6)!==0)throw Error(r(327));var f=!c&&(a&127)===0&&(a&s.expiredLanes)===0||hr(s,a),g=f?$A(s,a):hm(s,a,!0),b=f;do{if(g===0){ca&&!f&&Qi(s,a,0,!1);break}else{if(c=s.current.alternate,b&&!BA(c)){g=hm(s,a,!1),b=!1;continue}if(g===2){if(b=a,s.errorRecoveryDisabledLanes&b)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var C=s;g=Vl;var M=C.current.memoizedState.isDehydrated;if(M&&(fa(C,E).flags|=256),E=hm(C,E,!1),E!==2){if(om&&!M){C.errorRecoveryDisabledLanes|=b,to|=b,g=4;break e}b=Tn,Tn=g,b!==null&&(Tn===null?Tn=b:Tn.push.apply(Tn,b))}g=E}if(b=!1,g!==2)continue}}if(g===1){fa(s,0),Qi(s,a,0,!0);break}e:{switch(f=s,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Qi(f,a,In,!Wi);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=td+300-cn(),10<g)){if(Qi(f,a,In,!Wi),jo(f,0,!0)!==0)break e;fi=a,f.timeoutHandle=Gw(gw.bind(null,f,c,Tn,rd,lm,a,In,to,ua,Wi,b,"Throttled",-0,0),g);break e}gw(f,c,Tn,rd,lm,a,In,to,ua,Wi,b,null,-0,0)}}break}while(!0);jr(s)}function gw(s,a,c,f,g,b,E,C,M,H,F,J,q,V){if(s.timeoutHandle=-1,J=a.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Re},lw(a,b,J);var se=(b&62914560)===b?td-cn():(b&4194048)===b?fw-cn():0;if(se=SO(J,se),se!==null){fi=b,s.cancelPendingCommit=se(Ew.bind(null,s,a,b,c,f,g,E,C,M,F,J,null,q,V)),Qi(s,b,E,!H);return}}Ew(s,a,b,c,f,g,E,C,M)}function BA(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],b=g.getSnapshot;g=g.value;try{if(!Rn(b(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qi(s,a,c,f){a&=~am,a&=~to,s.suspendedLanes|=a,s.pingedLanes&=~a,f&&(s.warmLanes|=a),f=s.expirationTimes;for(var g=a;0<g;){var b=31-rn(g),E=1<<b;f[b]=-1,g&=~E}c!==0&&zo(s,c,a)}function id(){return(He&6)===0?(Gl(0),!1):!0}function fm(){if(je!==null){if(Ve===0)var s=je.return;else s=je,ti=Gs=null,Ap(s),na=null,Al=0,s=je;for(;s!==null;)Kv(s.alternate,s),s=s.return;je=null}}function fa(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,iO(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),fi=0,fm(),Qe=s,je=c=Zr(s.current,null),ze=a,Ve=0,zn=null,Wi=!1,ca=hr(s,a),om=!1,ua=In=am=to=Ji=pt=0,Tn=Vl=null,lm=!1,(a&8)!==0&&(a|=a&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=a;0<f;){var g=31-rn(f),b=1<<g;a|=s[g],f&=~b}return di=a,Tu(),c}function yw(s,a){Ae=null,P.H=zl,a===ta||a===Du?(a=Db(),Ve=3):a===gp?(a=Db(),Ve=4):Ve=a===Vp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,zn=a,je===null&&(pt=1,Ku(s,Jn(a,s.current)))}function bw(){var s=jn.current;return s===null?!0:(ze&4194048)===ze?Zn===null:(ze&62914560)===ze||(ze&536870912)!==0?s===Zn:!1}function vw(){var s=P.H;return P.H=zl,s===null?zl:s}function ww(){var s=P.A;return P.A=zA,s}function sd(){pt=4,Wi||(ze&4194048)!==ze&&jn.current!==null||(ca=!0),(Ji&134217727)===0&&(to&134217727)===0||Qe===null||Qi(Qe,ze,In,!1)}function hm(s,a,c){var f=He;He|=2;var g=vw(),b=ww();(Qe!==s||ze!==a)&&(rd=null,fa(s,a)),a=!1;var E=pt;e:do try{if(Ve!==0&&je!==null){var C=je,M=zn;switch(Ve){case 8:fm(),E=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(a=!0);var H=Ve;if(Ve=0,zn=null,ha(s,C,M,H),c&&ca){E=0;break e}break;default:H=Ve,Ve=0,zn=null,ha(s,C,M,H)}}UA(),E=pt;break}catch(F){yw(s,F)}while(!0);return a&&s.shellSuspendCounter++,ti=Gs=null,He=f,P.H=g,P.A=b,je===null&&(Qe=null,ze=0,Tu()),E}function UA(){for(;je!==null;)xw(je)}function $A(s,a){var c=He;He|=2;var f=vw(),g=ww();Qe!==s||ze!==a?(rd=null,nd=cn()+500,fa(s,a)):ca=hr(s,a);e:do try{if(Ve!==0&&je!==null){a=je;var b=zn;t:switch(Ve){case 1:Ve=0,zn=null,ha(s,a,b,1);break;case 2:case 9:if(Mb(b)){Ve=0,zn=null,Sw(a);break}a=function(){Ve!==2&&Ve!==9||Qe!==s||(Ve=7),jr(s)},b.then(a,a);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:Mb(b)?(Ve=0,zn=null,Sw(a)):(Ve=0,zn=null,ha(s,a,b,7));break;case 5:var E=null;switch(je.tag){case 26:E=je.memoizedState;case 5:case 27:var C=je;if(E?ax(E):C.stateNode.complete){Ve=0,zn=null;var M=C.sibling;if(M!==null)je=M;else{var H=C.return;H!==null?(je=H,od(H)):je=null}break t}}Ve=0,zn=null,ha(s,a,b,5);break;case 6:Ve=0,zn=null,ha(s,a,b,6);break;case 8:fm(),pt=6;break e;default:throw Error(r(462))}}PA();break}catch(F){yw(s,F)}while(!0);return ti=Gs=null,P.H=f,P.A=g,He=c,je!==null?0:(Qe=null,ze=0,Tu(),pt)}function PA(){for(;je!==null&&!lu();)xw(je)}function xw(s){var a=Fv(s.alternate,s,di);s.memoizedProps=s.pendingProps,a===null?od(s):je=a}function Sw(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=Uv(c,a,a.pendingProps,a.type,void 0,ze);break;case 11:a=Uv(c,a,a.pendingProps,a.type.render,a.ref,ze);break;case 5:Ap(a);default:Kv(c,a),a=je=wb(a,di),a=Fv(c,a,di)}s.memoizedProps=s.pendingProps,a===null?od(s):je=a}function ha(s,a,c,f){ti=Gs=null,Ap(a),na=null,Al=0;var g=a.return;try{if(OA(s,g,a,c,ze)){pt=1,Ku(s,Jn(c,s.current)),je=null;return}}catch(b){if(g!==null)throw je=g,b;pt=1,Ku(s,Jn(c,s.current)),je=null;return}a.flags&32768?(Ue||f===1?s=!0:ca||(ze&536870912)!==0?s=!1:(Wi=s=!0,(f===2||f===9||f===3||f===6)&&(f=jn.current,f!==null&&f.tag===13&&(f.flags|=16384))),kw(a,s)):od(a)}function od(s){var a=s;do{if((a.flags&32768)!==0){kw(a,Wi);return}s=a.return;var c=RA(a.alternate,a,di);if(c!==null){je=c;return}if(a=a.sibling,a!==null){je=a;return}je=a=s}while(a!==null);pt===0&&(pt=5)}function kw(s,a){do{var c=DA(s.alternate,s);if(c!==null){c.flags&=32767,je=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){je=s;return}je=s=c}while(s!==null);pt=6,je=null}function Ew(s,a,c,f,g,b,E,C,M){s.cancelPendingCommit=null;do ad();while(Mt!==0);if((He&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(b=a.lanes|a.childLanes,b|=tp,jh(s,c,b,E,C,M),s===Qe&&(je=Qe=null,ze=0),da=a,Xi=s,fi=c,cm=b,um=g,hw=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,FA(js,function(){return Ow(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=P.T,P.T=null,g=Y.p,Y.p=2,E=He,He|=4;try{jA(s,a,c)}finally{He=E,Y.p=g,P.T=f}}Mt=1,Tw(),Cw(),_w()}}function Tw(){if(Mt===1){Mt=0;var s=Xi,a=da,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var f=Y.p;Y.p=2;var g=He;He|=4;try{sw(a,s);var b=Tm,E=db(s.containerInfo),C=b.focusedElem,M=b.selectionRange;if(E!==C&&C&&C.ownerDocument&&ub(C.ownerDocument.documentElement,C)){if(M!==null&&Yh(C)){var H=M.start,F=M.end;if(F===void 0&&(F=H),"selectionStart"in C)C.selectionStart=H,C.selectionEnd=Math.min(F,C.value.length);else{var J=C.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var V=q.getSelection(),se=C.textContent.length,ge=Math.min(M.start,se),Xe=M.end===void 0?ge:Math.min(M.end,se);!V.extend&&ge>Xe&&(E=Xe,Xe=ge,ge=E);var B=cb(C,ge),D=cb(C,Xe);if(B&&D&&(V.rangeCount!==1||V.anchorNode!==B.node||V.anchorOffset!==B.offset||V.focusNode!==D.node||V.focusOffset!==D.offset)){var $=J.createRange();$.setStart(B.node,B.offset),V.removeAllRanges(),ge>Xe?(V.addRange($),V.extend(D.node,D.offset)):($.setEnd(D.node,D.offset),V.addRange($))}}}}for(J=[],V=C;V=V.parentNode;)V.nodeType===1&&J.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<J.length;C++){var K=J[C];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}vd=!!Em,Tm=Em=null}finally{He=g,Y.p=f,P.T=c}}s.current=a,Mt=2}}function Cw(){if(Mt===2){Mt=0;var s=Xi,a=da,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var f=Y.p;Y.p=2;var g=He;He|=4;try{ew(s,a.alternate,a)}finally{He=g,Y.p=f,P.T=c}}Mt=3}}function _w(){if(Mt===4||Mt===3){Mt=0,Ro();var s=Xi,a=da,c=fi,f=hw;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Mt=5:(Mt=0,da=Xi=null,Aw(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Yi=null),Is(c),a=a.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(tn,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=P.T,g=Y.p,Y.p=2,P.T=null;try{for(var b=s.onRecoverableError,E=0;E<f.length;E++){var C=f[E];b(C.value,{componentStack:C.stack})}}finally{P.T=a,Y.p=g}}(fi&3)!==0&&ad(),jr(s),g=s.pendingLanes,(c&261930)!==0&&(g&42)!==0?s===dm?Fl++:(Fl=0,dm=s):Fl=0,Gl(0)}}function Aw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Cl(a)))}function ad(){return Tw(),Cw(),_w(),Ow()}function Ow(){if(Mt!==5)return!1;var s=Xi,a=cm;cm=0;var c=Is(fi),f=P.T,g=Y.p;try{Y.p=32>c?32:c,P.T=null,c=um,um=null;var b=Xi,E=fi;if(Mt=0,da=Xi=null,fi=0,(He&6)!==0)throw Error(r(331));var C=He;if(He|=4,uw(b.current),aw(b,b.current,E,c),He=C,Gl(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(tn,b)}catch{}return!0}finally{Y.p=g,P.T=f,Aw(s,a)}}function Nw(s,a,c){a=Jn(c,a),a=qp(s.stateNode,a,2),s=Vi(s,a,2),s!==null&&(Nr(s,2),jr(s))}function Fe(s,a,c){if(s.tag===3)Nw(s,s,c);else for(;a!==null;){if(a.tag===3){Nw(a,s,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Yi===null||!Yi.has(f))){s=Jn(c,s),c=Mv(2),f=Vi(a,c,2),f!==null&&(Rv(c,f,a,s),Nr(f,2),jr(f));break}}a=a.return}}function pm(s,a,c){var f=s.pingCache;if(f===null){f=s.pingCache=new IA;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(om=!0,g.add(c),s=HA.bind(null,s,a,c),a.then(s,s))}function HA(s,a,c){var f=s.pingCache;f!==null&&f.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,Qe===s&&(ze&c)===c&&(pt===4||pt===3&&(ze&62914560)===ze&&300>cn()-td?(He&2)===0&&fa(s,0):am|=c,ua===ze&&(ua=0)),jr(s)}function Mw(s,a){a===0&&(a=Lo()),s=qs(s,a),s!==null&&(Nr(s,a),jr(s))}function qA(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),Mw(s,c)}function VA(s,a){var c=0;switch(s.tag){case 31:case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),Mw(s,c)}function FA(s,a){return Mo(s,a)}var ld=null,pa=null,mm=!1,cd=!1,gm=!1,Zi=0;function jr(s){s!==pa&&s.next===null&&(pa===null?ld=pa=s:pa=pa.next=s),cd=!0,mm||(mm=!0,KA())}function Gl(s,a){if(!gm&&cd){gm=!0;do for(var c=!1,f=ld;f!==null;){if(s!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var E=f.suspendedLanes,C=f.pingedLanes;b=(1<<31-rn(42|s)+1)-1,b&=g&~(E&~C),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Lw(f,b))}else b=ze,b=jo(f,f===Qe?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||hr(f,b)||(c=!0,Lw(f,b));f=f.next}while(c);gm=!1}}function GA(){Rw()}function Rw(){cd=mm=!1;var s=0;Zi!==0&&rO()&&(s=Zi);for(var a=cn(),c=null,f=ld;f!==null;){var g=f.next,b=Dw(f,a);b===0?(f.next=null,c===null?ld=g:c.next=g,g===null&&(pa=c)):(c=f,(s!==0||(b&3)!==0)&&(cd=!0)),f=g}Mt!==0&&Mt!==5||Gl(s),Zi!==0&&(Zi=0)}function Dw(s,a){for(var c=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var E=31-rn(b),C=1<<E,M=g[E];M===-1?((C&c)===0||(C&f)!==0)&&(g[E]=du(C,a)):M<=a&&(s.expiredLanes|=C),b&=~C}if(a=Qe,c=ze,c=jo(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,c===0||s===a&&(Ve===2||Ve===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&bn(f),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||hr(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(f!==null&&bn(f),Is(c)){case 2:case 8:c=en;break;case 32:c=js;break;case 268435456:c=sl;break;default:c=js}return f=jw.bind(null,s),c=Mo(c,f),s.callbackPriority=a,s.callbackNode=c,a}return f!==null&&f!==null&&bn(f),s.callbackPriority=2,s.callbackNode=null,2}function jw(s,a){if(Mt!==0&&Mt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(ad()&&s.callbackNode!==c)return null;var f=ze;return f=jo(s,s===Qe?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(mw(s,f,a),Dw(s,cn()),s.callbackNode!=null&&s.callbackNode===c?jw.bind(null,s):null)}function Lw(s,a){if(ad())return null;mw(s,a,!0)}function KA(){sO(function(){(He&6)!==0?Mo(il,GA):Rw()})}function ym(){if(Zi===0){var s=Zo;s===0&&(s=Do,Do<<=1,(Do&261888)===0&&(Do=256)),Zi=s}return Zi}function zw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ho(""+s)}function Iw(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function WA(s,a,c,f,g){if(a==="submit"&&c&&c.stateNode===g){var b=zw((g[Pt]||null).action),E=f.submitter;E&&(a=(a=E[Pt]||null)?zw(a.formAction):E.getAttribute("formAction"),a!==null&&(b=a,E=null));var C=new xu("action","action",null,f,g);s.push({event:C,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Zi!==0){var M=E?Iw(g,E):new FormData(g);Ip(c,{pending:!0,data:M,method:g.method,action:b},null,M)}}else typeof b=="function"&&(C.preventDefault(),M=E?Iw(g,E):new FormData(g),Ip(c,{pending:!0,data:M,method:g.method,action:b},b,M))},currentTarget:g}]})}}for(var bm=0;bm<ep.length;bm++){var vm=ep[bm],JA=vm.toLowerCase(),YA=vm[0].toUpperCase()+vm.slice(1);yr(JA,"on"+YA)}yr(pb,"onAnimationEnd"),yr(mb,"onAnimationIteration"),yr(gb,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr(fA,"onTransitionRun"),yr(hA,"onTransitionStart"),yr(pA,"onTransitionCancel"),yr(yb,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function Bw(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],g=f.event;f=f.listeners;e:{var b=void 0;if(a)for(var E=f.length-1;0<=E;E--){var C=f[E],M=C.instance,H=C.currentTarget;if(C=C.listener,M!==b&&g.isPropagationStopped())break e;b=C,g.currentTarget=H;try{b(g)}catch(F){Eu(F)}g.currentTarget=null,b=M}else for(E=0;E<f.length;E++){if(C=f[E],M=C.instance,H=C.currentTarget,C=C.listener,M!==b&&g.isPropagationStopped())break e;b=C,g.currentTarget=H;try{b(g)}catch(F){Eu(F)}g.currentTarget=null,b=M}}}}function Le(s,a){var c=a[Bo];c===void 0&&(c=a[Bo]=new Set);var f=s+"__bubble";c.has(f)||(Uw(a,s,2,!1),c.add(f))}function wm(s,a,c){var f=0;a&&(f|=4),Uw(c,s,f,a)}var ud="_reactListening"+Math.random().toString(36).slice(2);function xm(s){if(!s[ud]){s[ud]=!0,Mn.forEach(function(c){c!=="selectionchange"&&(XA.has(c)||wm(c,!1,s),wm(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[ud]||(a[ud]=!0,wm("selectionchange",!1,a))}}function Uw(s,a,c,f){switch(px(a)){case 2:var g=TO;break;case 8:g=CO;break;default:g=zm}c=g.bind(null,a,c,s),g=void 0,!Ph||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(a,c,{capture:!0,passive:g}):s.addEventListener(a,c,!0):g!==void 0?s.addEventListener(a,c,{passive:g}):s.addEventListener(a,c,!1)}function Sm(s,a,c,f,g){var b=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var C=f.stateNode.containerInfo;if(C===g)break;if(E===4)for(E=f.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;C!==null;){if(E=Wr(C),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){f=b=E;continue e}C=C.parentNode}}f=f.return}Vy(function(){var H=b,F=gr(c),J=[];e:{var q=bb.get(s);if(q!==void 0){var V=xu,se=s;switch(s){case"keypress":if(vu(c)===0)break e;case"keydown":case"keyup":V=V_;break;case"focusin":se="focus",V=Fh;break;case"focusout":se="blur",V=Fh;break;case"beforeblur":case"afterblur":V=Fh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=R_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=K_;break;case pb:case mb:case gb:V=L_;break;case yb:V=J_;break;case"scroll":case"scrollend":V=N_;break;case"wheel":V=X_;break;case"copy":case"cut":case"paste":V=I_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Jy;break;case"toggle":case"beforetoggle":V=Z_}var ge=(a&4)!==0,Xe=!ge&&(s==="scroll"||s==="scrollend"),B=ge?q!==null?q+"Capture":null:q;ge=[];for(var D=H,$;D!==null;){var K=D;if($=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||$===null||B===null||(K=ml(D,B),K!=null&&ge.push(Wl(D,K,$))),Xe)break;D=D.return}0<ge.length&&(q=new V(q,se,null,c,F),J.push({event:q,listeners:ge}))}}if((a&7)===0){e:{if(q=s==="mouseover"||s==="pointerover",V=s==="mouseout"||s==="pointerout",q&&c!==tt&&(se=c.relatedTarget||c.fromElement)&&(Wr(se)||se[wt]))break e;if((V||q)&&(q=F.window===F?F:(q=F.ownerDocument)?q.defaultView||q.parentWindow:window,V?(se=c.relatedTarget||c.toElement,V=H,se=se?Wr(se):null,se!==null&&(Xe=o(se),ge=se.tag,se!==Xe||ge!==5&&ge!==27&&ge!==6)&&(se=null)):(V=null,se=H),V!==se)){if(ge=Ky,K="onMouseLeave",B="onMouseEnter",D="mouse",(s==="pointerout"||s==="pointerover")&&(ge=Jy,K="onPointerLeave",B="onPointerEnter",D="pointer"),Xe=V==null?q:Jr(V),$=se==null?q:Jr(se),q=new ge(K,D+"leave",V,c,F),q.target=Xe,q.relatedTarget=$,K=null,Wr(F)===H&&(ge=new ge(B,D+"enter",se,c,F),ge.target=$,ge.relatedTarget=Xe,K=ge),Xe=K,V&&se)t:{for(ge=QA,B=V,D=se,$=0,K=B;K;K=ge(K))$++;K=0;for(var fe=D;fe;fe=ge(fe))K++;for(;0<$-K;)B=ge(B),$--;for(;0<K-$;)D=ge(D),K--;for(;$--;){if(B===D||D!==null&&B===D.alternate){ge=B;break t}B=ge(B),D=ge(D)}ge=null}else ge=null;V!==null&&$w(J,q,V,ge,!1),se!==null&&Xe!==null&&$w(J,Xe,se,ge,!0)}}e:{if(q=H?Jr(H):window,V=q.nodeName&&q.nodeName.toLowerCase(),V==="select"||V==="input"&&q.type==="file")var $e=rb;else if(tb(q))if(ib)$e=cA;else{$e=aA;var ce=oA}else V=q.nodeName,!V||V.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?H&&pl(H.elementType)&&($e=rb):$e=lA;if($e&&($e=$e(s,H))){nb(J,$e,c,F);break e}ce&&ce(s,q,H),s==="focusout"&&H&&q.type==="number"&&H.memoizedProps.value!=null&&Us(q,"number",q.value)}switch(ce=H?Jr(H):window,s){case"focusin":(tb(ce)||ce.contentEditable==="true")&&(Fo=ce,Xh=H,kl=null);break;case"focusout":kl=Xh=Fo=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,fb(J,c,F);break;case"selectionchange":if(dA)break;case"keydown":case"keyup":fb(J,c,F)}var Oe;if(Kh)e:{switch(s){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Vo?Zy(s,c)&&(Ie="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ie="onCompositionStart");Ie&&(Yy&&c.locale!=="ko"&&(Vo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Vo&&(Oe=Fy()):(Ii=F,Hh="value"in Ii?Ii.value:Ii.textContent,Vo=!0)),ce=dd(H,Ie),0<ce.length&&(Ie=new Wy(Ie,s,null,c,F),J.push({event:Ie,listeners:ce}),Oe?Ie.data=Oe:(Oe=eb(c),Oe!==null&&(Ie.data=Oe)))),(Oe=tA?nA(s,c):rA(s,c))&&(Ie=dd(H,"onBeforeInput"),0<Ie.length&&(ce=new Wy("onBeforeInput","beforeinput",null,c,F),J.push({event:ce,listeners:Ie}),ce.data=Oe)),WA(J,s,H,c,F)}Bw(J,a)})}function Wl(s,a,c){return{instance:s,listener:a,currentTarget:c}}function dd(s,a){for(var c=a+"Capture",f=[];s!==null;){var g=s,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=ml(s,c),g!=null&&f.unshift(Wl(s,g,b)),g=ml(s,a),g!=null&&f.push(Wl(s,g,b))),s.tag===3)return f;s=s.return}return[]}function QA(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function $w(s,a,c,f,g){for(var b=a._reactName,E=[];c!==null&&c!==f;){var C=c,M=C.alternate,H=C.stateNode;if(C=C.tag,M!==null&&M===f)break;C!==5&&C!==26&&C!==27||H===null||(M=H,g?(H=ml(c,b),H!=null&&E.unshift(Wl(c,H,M))):g||(H=ml(c,b),H!=null&&E.push(Wl(c,H,M)))),c=c.return}E.length!==0&&s.push({event:a,listeners:E})}var ZA=/\r\n?/g,eO=/\u0000|\uFFFD/g;function Pw(s){return(typeof s=="string"?s:""+s).replace(ZA,`
`).replace(eO,"")}function Hw(s,a){return a=Pw(a),Pw(s)===a}function Ye(s,a,c,f,g,b){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||Kn(s,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&Kn(s,""+f);break;case"className":$o(s,"class",f);break;case"tabIndex":$o(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":$o(s,c,f);break;case"style":yu(s,f,b);break;case"data":if(a!=="object"){$o(s,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Ho(""+f),s.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(a!=="input"&&Ye(s,a,"name",g.name,g,null),Ye(s,a,"formEncType",g.formEncType,g,null),Ye(s,a,"formMethod",g.formMethod,g,null),Ye(s,a,"formTarget",g.formTarget,g,null)):(Ye(s,a,"encType",g.encType,g,null),Ye(s,a,"method",g.method,g,null),Ye(s,a,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Ho(""+f),s.setAttribute(c,f);break;case"onClick":f!=null&&(s.onclick=Re);break;case"onScroll":f!=null&&Le("scroll",s);break;case"onScrollEnd":f!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}c=Ho(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""+f):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":f===!0?s.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,f):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(c,f):s.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(c):s.setAttribute(c,f);break;case"popover":Le("beforetoggle",s),Le("toggle",s),Uo(s,"popover",f);break;case"xlinkActuate":mr(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":mr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":mr(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":mr(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":mr(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":mr(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":mr(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":mr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":mr(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Uo(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Bh.get(c)||c,Uo(s,c,f))}}function km(s,a,c,f,g,b){switch(c){case"style":yu(s,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof f=="string"?Kn(s,f):(typeof f=="number"||typeof f=="bigint")&&Kn(s,""+f);break;case"onScroll":f!=null&&Le("scroll",s);break;case"onScrollEnd":f!=null&&Le("scrollend",s);break;case"onClick":f!=null&&(s.onclick=Re);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ll.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),b=s[Pt]||null,b=b!=null?b[c]:null,typeof b=="function"&&s.removeEventListener(a,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,f,g);break e}c in s?s[c]=f:f===!0?s.setAttribute(c,""):Uo(s,c,f)}}}function Kt(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var f=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var E=c[b];if(E!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ye(s,a,b,E,c,null)}}g&&Ye(s,a,"srcSet",c.srcSet,c,null),f&&Ye(s,a,"src",c.src,c,null);return;case"input":Le("invalid",s);var C=b=E=g=null,M=null,H=null;for(f in c)if(c.hasOwnProperty(f)){var F=c[f];if(F!=null)switch(f){case"name":g=F;break;case"type":E=F;break;case"checked":M=F;break;case"defaultChecked":H=F;break;case"value":b=F;break;case"defaultValue":C=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,a));break;default:Ye(s,a,f,F,c,null)}}Po(s,b,C,M,H,E,g,!1);return;case"select":Le("invalid",s),f=E=b=null;for(g in c)if(c.hasOwnProperty(g)&&(C=c[g],C!=null))switch(g){case"value":b=C;break;case"defaultValue":E=C;break;case"multiple":f=C;default:Ye(s,a,g,C,c,null)}a=b,c=E,s.multiple=!!f,a!=null?Yr(s,!!f,a,!1):c!=null&&Yr(s,!!f,c,!0);return;case"textarea":Le("invalid",s),b=g=f=null;for(E in c)if(c.hasOwnProperty(E)&&(C=c[E],C!=null))switch(E){case"value":f=C;break;case"defaultValue":g=C;break;case"children":b=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:Ye(s,a,E,C,c,null)}gu(s,f,g,b);return;case"option":for(M in c)if(c.hasOwnProperty(M)&&(f=c[M],f!=null))switch(M){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ye(s,a,M,f,c,null)}return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(f=0;f<Kl.length;f++)Le(Kl[f],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in c)if(c.hasOwnProperty(H)&&(f=c[H],f!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ye(s,a,H,f,c,null)}return;default:if(pl(a)){for(F in c)c.hasOwnProperty(F)&&(f=c[F],f!==void 0&&km(s,a,F,f,c,void 0));return}}for(C in c)c.hasOwnProperty(C)&&(f=c[C],f!=null&&Ye(s,a,C,f,c,null))}function tO(s,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,E=null,C=null,M=null,H=null,F=null;for(V in c){var J=c[V];if(c.hasOwnProperty(V)&&J!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":M=J;default:f.hasOwnProperty(V)||Ye(s,a,V,null,f,J)}}for(var q in f){var V=f[q];if(J=c[q],f.hasOwnProperty(q)&&(V!=null||J!=null))switch(q){case"type":b=V;break;case"name":g=V;break;case"checked":H=V;break;case"defaultChecked":F=V;break;case"value":E=V;break;case"defaultValue":C=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,a));break;default:V!==J&&Ye(s,a,q,V,f,J)}}Bs(s,E,C,M,H,F,b,g);return;case"select":V=E=C=q=null;for(b in c)if(M=c[b],c.hasOwnProperty(b)&&M!=null)switch(b){case"value":break;case"multiple":V=M;default:f.hasOwnProperty(b)||Ye(s,a,b,null,f,M)}for(g in f)if(b=f[g],M=c[g],f.hasOwnProperty(g)&&(b!=null||M!=null))switch(g){case"value":q=b;break;case"defaultValue":C=b;break;case"multiple":E=b;default:b!==M&&Ye(s,a,g,b,f,M)}a=C,c=E,f=V,q!=null?Yr(s,!!c,q,!1):!!f!=!!c&&(a!=null?Yr(s,!!c,a,!0):Yr(s,!!c,c?[]:"",!1));return;case"textarea":V=q=null;for(C in c)if(g=c[C],c.hasOwnProperty(C)&&g!=null&&!f.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ye(s,a,C,null,f,g)}for(E in f)if(g=f[E],b=c[E],f.hasOwnProperty(E)&&(g!=null||b!=null))switch(E){case"value":q=g;break;case"defaultValue":V=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&Ye(s,a,E,g,f,b)}mu(s,q,V);return;case"option":for(var se in c)if(q=c[se],c.hasOwnProperty(se)&&q!=null&&!f.hasOwnProperty(se))switch(se){case"selected":s.selected=!1;break;default:Ye(s,a,se,null,f,q)}for(M in f)if(q=f[M],V=c[M],f.hasOwnProperty(M)&&q!==V&&(q!=null||V!=null))switch(M){case"selected":s.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Ye(s,a,M,q,f,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in c)q=c[ge],c.hasOwnProperty(ge)&&q!=null&&!f.hasOwnProperty(ge)&&Ye(s,a,ge,null,f,q);for(H in f)if(q=f[H],V=c[H],f.hasOwnProperty(H)&&q!==V&&(q!=null||V!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,a));break;default:Ye(s,a,H,q,f,V)}return;default:if(pl(a)){for(var Xe in c)q=c[Xe],c.hasOwnProperty(Xe)&&q!==void 0&&!f.hasOwnProperty(Xe)&&km(s,a,Xe,void 0,f,q);for(F in f)q=f[F],V=c[F],!f.hasOwnProperty(F)||q===V||q===void 0&&V===void 0||km(s,a,F,q,f,V);return}}for(var B in c)q=c[B],c.hasOwnProperty(B)&&q!=null&&!f.hasOwnProperty(B)&&Ye(s,a,B,null,f,q);for(J in f)q=f[J],V=c[J],!f.hasOwnProperty(J)||q===V||q==null&&V==null||Ye(s,a,J,q,f,V)}function qw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nO(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var g=c[f],b=g.transferSize,E=g.initiatorType,C=g.duration;if(b&&C&&qw(E)){for(E=0,C=g.responseEnd,f+=1;f<c.length;f++){var M=c[f],H=M.startTime;if(H>C)break;var F=M.transferSize,J=M.initiatorType;F&&qw(J)&&(M=M.responseEnd,E+=F*(M<C?1:(C-H)/(M-H)))}if(--f,a+=8*(b+E)/(g.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Em=null,Tm=null;function fd(s){return s.nodeType===9?s:s.ownerDocument}function Vw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Cm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var _m=null;function rO(){var s=window.event;return s&&s.type==="popstate"?s===_m?!1:(_m=s,!0):(_m=null,!1)}var Gw=typeof setTimeout=="function"?setTimeout:void 0,iO=typeof clearTimeout=="function"?clearTimeout:void 0,Kw=typeof Promise=="function"?Promise:void 0,sO=typeof queueMicrotask=="function"?queueMicrotask:typeof Kw<"u"?function(s){return Kw.resolve(null).then(s).catch(oO)}:Gw;function oO(s){setTimeout(function(){throw s})}function es(s){return s==="head"}function Ww(s,a){var c=a,f=0;do{var g=c.nextSibling;if(s.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(f===0){s.removeChild(g),ba(a);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Jl(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Jl(c);for(var b=c.firstChild;b;){var E=b.nextSibling,C=b.nodeName;b[Li]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=E}}else c==="body"&&Jl(s.ownerDocument.body);c=g}while(c);ba(a)}function Jw(s,a){var c=s;s=0;do{var f=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=f}while(c)}function Am(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Am(c),Kr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function aO(s,a,c,f){for(;s.nodeType===1;){var g=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[Li])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=er(s.nextSibling),s===null)break}return null}function lO(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=er(s.nextSibling),s===null))return null;return s}function Yw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=er(s.nextSibling),s===null))return null;return s}function Om(s){return s.data==="$?"||s.data==="$~"}function Nm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function cO(s,a){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||c.readyState!=="loading")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function er(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Mm=null;function Xw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(a===0)return er(s.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}s=s.nextSibling}return null}function Qw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return s;a--}else c!=="/$"&&c!=="/&"||a++}s=s.previousSibling}return null}function Zw(s,a,c){switch(a=fd(c),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Jl(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Kr(s)}var tr=new Map,ex=new Set;function hd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var hi=Y.d;Y.d={f:uO,r:dO,D:fO,C:hO,L:pO,m:mO,X:yO,S:gO,M:bO};function uO(){var s=hi.f(),a=id();return s||a}function dO(s){var a=vn(s);a!==null&&a.tag===5&&a.type==="form"?yv(a):hi.r(s)}var ma=typeof document>"u"?null:document;function tx(s,a,c){var f=ma;if(f&&typeof a=="string"&&a){var g=qt(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),ex.has(g)||(ex.add(g),s={rel:s,crossOrigin:c,href:a},f.querySelector(g)===null&&(a=f.createElement("link"),Kt(a,"link",s),ct(a),f.head.appendChild(a)))}}function fO(s){hi.D(s),tx("dns-prefetch",s,null)}function hO(s,a){hi.C(s,a),tx("preconnect",s,a)}function pO(s,a,c){hi.L(s,a,c);var f=ma;if(f&&s&&a){var g='link[rel="preload"][as="'+qt(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+qt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+qt(c.imageSizes)+'"]')):g+='[href="'+qt(s)+'"]';var b=g;switch(a){case"style":b=ga(s);break;case"script":b=ya(s)}tr.has(b)||(s=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),tr.set(b,s),f.querySelector(g)!==null||a==="style"&&f.querySelector(Yl(b))||a==="script"&&f.querySelector(Xl(b))||(a=f.createElement("link"),Kt(a,"link",s),ct(a),f.head.appendChild(a)))}}function mO(s,a){hi.m(s,a);var c=ma;if(c&&s){var f=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+qt(f)+'"][href="'+qt(s)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ya(s)}if(!tr.has(b)&&(s=m({rel:"modulepreload",href:s},a),tr.set(b,s),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Xl(b)))return}f=c.createElement("link"),Kt(f,"link",s),ct(f),c.head.appendChild(f)}}}function gO(s,a,c){hi.S(s,a,c);var f=ma;if(f&&s){var g=Ht(f).hoistableStyles,b=ga(s);a=a||"default";var E=g.get(b);if(!E){var C={loading:0,preload:null};if(E=f.querySelector(Yl(b)))C.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":a},c),(c=tr.get(b))&&Rm(s,c);var M=E=f.createElement("link");ct(M),Kt(M,"link",s),M._p=new Promise(function(H,F){M.onload=H,M.onerror=F}),M.addEventListener("load",function(){C.loading|=1}),M.addEventListener("error",function(){C.loading|=2}),C.loading|=4,pd(E,a,f)}E={type:"stylesheet",instance:E,count:1,state:C},g.set(b,E)}}}function yO(s,a){hi.X(s,a);var c=ma;if(c&&s){var f=Ht(c).hoistableScripts,g=ya(s),b=f.get(g);b||(b=c.querySelector(Xl(g)),b||(s=m({src:s,async:!0},a),(a=tr.get(g))&&Dm(s,a),b=c.createElement("script"),ct(b),Kt(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function bO(s,a){hi.M(s,a);var c=ma;if(c&&s){var f=Ht(c).hoistableScripts,g=ya(s),b=f.get(g);b||(b=c.querySelector(Xl(g)),b||(s=m({src:s,async:!0,type:"module"},a),(a=tr.get(g))&&Dm(s,a),b=c.createElement("script"),ct(b),Kt(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function nx(s,a,c,f){var g=(g=Se.current)?hd(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=ga(c.href),c=Ht(g).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=ga(c.href);var b=Ht(g).hoistableStyles,E=b.get(s);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,E),(b=g.querySelector(Yl(s)))&&!b._p&&(E.instance=b,E.state.loading=5),tr.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},tr.set(s,c),b||vO(g,s,c,E.state))),a&&f===null)throw Error(r(528,""));return E}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ya(c),c=Ht(g).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ga(s){return'href="'+qt(s)+'"'}function Yl(s){return'link[rel="stylesheet"]['+s+"]"}function rx(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function vO(s,a,c,f){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=s.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),Kt(a,"link",c),ct(a),s.head.appendChild(a))}function ya(s){return'[src="'+qt(s)+'"]'}function Xl(s){return"script[async]"+s}function ix(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=s.querySelector('style[data-href~="'+qt(c.href)+'"]');if(f)return a.instance=f,ct(f),f;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),ct(f),Kt(f,"style",g),pd(f,c.precedence,s),a.instance=f;case"stylesheet":g=ga(c.href);var b=s.querySelector(Yl(g));if(b)return a.state.loading|=4,a.instance=b,ct(b),b;f=rx(c),(g=tr.get(g))&&Rm(f,g),b=(s.ownerDocument||s).createElement("link"),ct(b);var E=b;return E._p=new Promise(function(C,M){E.onload=C,E.onerror=M}),Kt(b,"link",f),a.state.loading|=4,pd(b,c.precedence,s),a.instance=b;case"script":return b=ya(c.src),(g=s.querySelector(Xl(b)))?(a.instance=g,ct(g),g):(f=c,(g=tr.get(b))&&(f=m({},c),Dm(f,g)),s=s.ownerDocument||s,g=s.createElement("script"),ct(g),Kt(g,"link",f),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,pd(f,c.precedence,s));return a.instance}function pd(s,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,E=0;E<f.length;E++){var C=f[E];if(C.dataset.precedence===a)b=C;else if(b!==g)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function Rm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Dm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var md=null;function sx(s,a,c){if(md===null){var f=new Map,g=md=new Map;g.set(c,f)}else g=md,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(s))return f;for(f.set(s,null),c=c.getElementsByTagName(s),g=0;g<c.length;g++){var b=c[g];if(!(b[Li]||b[Ke]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(a)||"";E=s+E;var C=f.get(E);C?C.push(b):f.set(E,[b])}}return f}function ox(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function wO(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ax(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function xO(s,a,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=ga(f.href),b=a.querySelector(Yl(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=gd.bind(s),a.then(s,s)),c.state.loading|=4,c.instance=b,ct(b);return}b=a.ownerDocument||a,f=rx(f),(g=tr.get(g))&&Rm(f,g),b=b.createElement("link"),ct(b);var E=b;E._p=new Promise(function(C,M){E.onload=C,E.onerror=M}),Kt(b,"link",f),c.instance=b}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=gd.bind(s),a.addEventListener("load",c),a.addEventListener("error",c))}}var jm=0;function SO(s,a){return s.stylesheets&&s.count===0&&bd(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var f=setTimeout(function(){if(s.stylesheets&&bd(s,s.stylesheets),s.unsuspend){var b=s.unsuspend;s.unsuspend=null,b()}},6e4+a);0<s.imgBytes&&jm===0&&(jm=62500*nO());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&bd(s,s.stylesheets),s.unsuspend)){var b=s.unsuspend;s.unsuspend=null,b()}},(s.imgBytes>jm?50:800)+a);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var yd=null;function bd(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,yd=new Map,a.forEach(kO,s),yd=null,gd.call(s))}function kO(s,a){if(!(a.state.loading&4)){var c=yd.get(s);if(c)var f=c.get(null);else{c=new Map,yd.set(s,c);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var E=g[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),f=E)}f&&c.set(null,f)}g=a.instance,E=g.getAttribute("data-precedence"),b=c.get(E)||f,b===f&&c.set(null,g),c.set(E,g),this.count++,f=gd.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var Ql={$$typeof:A,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function EO(s,a,c,f,g,b,E,C,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=al(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=al(0),this.hiddenUpdates=al(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function lx(s,a,c,f,g,b,E,C,M,H,F,J){return s=new EO(s,a,c,E,M,H,F,J,C),a=1,b===!0&&(a|=24),b=Dn(3,null,null,a),s.current=b,b.stateNode=s,a=hp(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:a},yp(b),s}function cx(s){return s?(s=Wo,s):Wo}function ux(s,a,c,f,g,b){g=cx(g),f.context===null?f.context=g:f.pendingContext=g,f=qi(a),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=Vi(s,f,a),c!==null&&(Cn(c,s,a),Nl(c,s,a))}function dx(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function Lm(s,a){dx(s,a),(s=s.alternate)&&dx(s,a)}function fx(s){if(s.tag===13||s.tag===31){var a=qs(s,67108864);a!==null&&Cn(a,s,67108864),Lm(s,67108864)}}function hx(s){if(s.tag===13||s.tag===31){var a=Bn();a=fu(a);var c=qs(s,a);c!==null&&Cn(c,s,a),Lm(s,a)}}var vd=!0;function TO(s,a,c,f){var g=P.T;P.T=null;var b=Y.p;try{Y.p=2,zm(s,a,c,f)}finally{Y.p=b,P.T=g}}function CO(s,a,c,f){var g=P.T;P.T=null;var b=Y.p;try{Y.p=8,zm(s,a,c,f)}finally{Y.p=b,P.T=g}}function zm(s,a,c,f){if(vd){var g=Im(f);if(g===null)Sm(s,a,f,wd,c),mx(s,f);else if(AO(g,s,a,c,f))f.stopPropagation();else if(mx(s,f),a&4&&-1<_O.indexOf(s)){for(;g!==null;){var b=vn(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=fr(b.pendingLanes);if(E!==0){var C=b;for(C.pendingLanes|=2,C.entangledLanes|=2;E;){var M=1<<31-rn(E);C.entanglements[1]|=M,E&=~M}jr(b),(He&6)===0&&(nd=cn()+500,Gl(0))}}break;case 31:case 13:C=qs(b,2),C!==null&&Cn(C,b,2),id(),Lm(b,2)}if(b=Im(f),b===null&&Sm(s,a,f,wd,c),b===g)break;g=b}g!==null&&f.stopPropagation()}else Sm(s,a,f,null,c)}}function Im(s){return s=gr(s),Bm(s)}var wd=null;function Bm(s){if(wd=null,s=Wr(s),s!==null){var a=o(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=l(a),s!==null)return s;s=null}else if(c===31){if(s=u(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return wd=s,null}function px(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(un()){case il:return 2;case en:return 8;case js:case jt:return 32;case sl:return 268435456;default:return 32}default:return 32}}var Um=!1,ts=null,ns=null,rs=null,Zl=new Map,ec=new Map,is=[],_O="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mx(s,a){switch(s){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Zl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ec.delete(a.pointerId)}}function tc(s,a,c,f,g,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},a!==null&&(a=vn(a),a!==null&&fx(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function AO(s,a,c,f,g){switch(a){case"focusin":return ts=tc(ts,s,a,c,f,g),!0;case"dragenter":return ns=tc(ns,s,a,c,f,g),!0;case"mouseover":return rs=tc(rs,s,a,c,f,g),!0;case"pointerover":var b=g.pointerId;return Zl.set(b,tc(Zl.get(b)||null,s,a,c,f,g)),!0;case"gotpointercapture":return b=g.pointerId,ec.set(b,tc(ec.get(b)||null,s,a,c,f,g)),!0}return!1}function gx(s){var a=Wr(s.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){s.blockedOn=a,Nn(s.priority,function(){hx(c)});return}}else if(a===31){if(a=u(c),a!==null){s.blockedOn=a,Nn(s.priority,function(){hx(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xd(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=Im(s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);tt=f,c.target.dispatchEvent(f),tt=null}else return a=vn(c),a!==null&&fx(a),s.blockedOn=c,!1;a.shift()}return!0}function yx(s,a,c){xd(s)&&c.delete(a)}function OO(){Um=!1,ts!==null&&xd(ts)&&(ts=null),ns!==null&&xd(ns)&&(ns=null),rs!==null&&xd(rs)&&(rs=null),Zl.forEach(yx),ec.forEach(yx)}function Sd(s,a){s.blockedOn===a&&(s.blockedOn=null,Um||(Um=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,OO)))}var kd=null;function bx(s){kd!==s&&(kd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){kd===s&&(kd=null);for(var a=0;a<s.length;a+=3){var c=s[a],f=s[a+1],g=s[a+2];if(typeof f!="function"){if(Bm(f||c)===null)continue;break}var b=vn(c);b!==null&&(s.splice(a,3),a-=3,Ip(b,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function ba(s){function a(M){return Sd(M,s)}ts!==null&&Sd(ts,s),ns!==null&&Sd(ns,s),rs!==null&&Sd(rs,s),Zl.forEach(a),ec.forEach(a);for(var c=0;c<is.length;c++){var f=is[c];f.blockedOn===s&&(f.blockedOn=null)}for(;0<is.length&&(c=is[0],c.blockedOn===null);)gx(c),c.blockedOn===null&&is.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],b=c[f+1],E=g[Pt]||null;if(typeof b=="function")E||bx(c);else if(E){var C=null;if(b&&b.hasAttribute("formAction")){if(g=b,E=b[Pt]||null)C=E.formAction;else if(Bm(g)!==null)continue}else C=E.action;typeof C=="function"?c[f+1]=C:(c.splice(f,3),f-=3),bx(c)}}}function vx(){function s(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function $m(s){this._internalRoot=s}Ed.prototype.render=$m.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,f=Bn();ux(c,f,s,a,null,null)},Ed.prototype.unmount=$m.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;ux(s.current,2,null,s,null,null),id(),a[wt]=null}};function Ed(s){this._internalRoot=s}Ed.prototype.unstable_scheduleHydration=function(s){if(s){var a=zh();s={blockedOn:null,target:s,priority:a};for(var c=0;c<is.length&&a!==0&&a<is[c].priority;c++);is.splice(c,0,s),c===0&&gx(s)}};var wx=e.version;if(wx!=="19.2.4")throw Error(r(527,wx,"19.2.4"));Y.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var NO={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{tn=Td.inject(NO),nn=Td}catch{}}return rc.createRoot=function(s,a){if(!i(s))throw Error(r(299));var c=!1,f="",g=_v,b=Av,E=Ov;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=lx(s,1,!1,null,null,c,f,null,g,b,E,vx),s[wt]=a.current,xm(s),new $m(a)},rc.hydrateRoot=function(s,a,c){if(!i(s))throw Error(r(299));var f=!1,g="",b=_v,E=Av,C=Ov,M=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.formState!==void 0&&(M=c.formState)),a=lx(s,1,!0,a,c??null,f,g,M,b,E,C,vx),a.context=cx(null),c=a.current,f=Bn(),f=fu(f),g=qi(f),g.callback=null,Vi(c,g,f),c=f,a.current.lanes=c,Nr(a,c),jr(a),s[wt]=a.current,xm(s),new Ed(a)},rc.version="19.2.4",rc}var Nx;function UO(){if(Nx)return qm.exports;Nx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qm.exports=BO(),qm.exports}var $O=UO();const PO=L0($O);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mx="popstate";function HO(t={}){function e(i,o){let{pathname:l="/",search:u="",hash:d=""}=_o(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ug("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=i.location.href,h=d.indexOf("#");u=h===-1?d:d.slice(0,h)}return u+"#"+(typeof o=="string"?o:Oc(o))}function r(i,o){Cr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return VO(e,n,r,t)}function dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qO(){return Math.random().toString(36).substring(2,10)}function Rx(t,e){return{usr:t.state,key:t.key,idx:e}}function Ug(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:n,key:e&&e.key||r||qO()}}function Oc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function _o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function VO(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let k=p(),T=k==null?null:k-h;h=k,d&&d({action:u,location:x.location,delta:T})}function y(k,T){u="PUSH";let _=Ug(x.location,k,T);n&&n(_,k),h=p()+1;let A=Rx(_,h),j=x.createHref(_);try{l.pushState(A,"",j)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(j)}o&&d&&d({action:u,location:x.location,delta:1})}function v(k,T){u="REPLACE";let _=Ug(x.location,k,T);n&&n(_,k),h=p();let A=Rx(_,h),j=x.createHref(_);l.replaceState(A,"",j),o&&d&&d({action:u,location:x.location,delta:0})}function w(k){return FO(k)}let x={get action(){return u},get location(){return t(i,l)},listen(k){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Mx,m),d=k,()=>{i.removeEventListener(Mx,m),d=null}},createHref(k){return e(i,k)},createURL:w,encodeLocation(k){let T=w(k);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:v,go(k){return l.go(k)}};return x}function FO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Oc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function fk(t,e,n="/"){return GO(t,e,n,!1)}function GO(t,e,n,r){let i=typeof e=="string"?_o(e):e,o=Ai(i.pathname||"/",n);if(o==null)return null;let l=hk(t);KO(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=iN(o);u=nN(l[d],h,r)}return u}function hk(t,e=[],n=[],r="",i=!1){let o=(l,u,d=i,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;dt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=Ti([r,p.relativePath]),y=n.concat(p);l.children&&l.children.length>0&&(dt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),hk(l.children,e,y,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:eN(m,l.index),routesMeta:y})};return t.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,u);else for(let h of pk(l.path))o(l,u,!0,h)}),e}function pk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=pk(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function KO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var WO=/^:[\w-]+$/,JO=3,YO=2,XO=1,QO=10,ZO=-2,Dx=t=>t==="*";function eN(t,e){let n=t.split("/"),r=n.length;return n.some(Dx)&&(r+=ZO),e&&(r+=YO),n.filter(i=>!Dx(i)).reduce((i,o)=>i+(WO.test(o)?JO:o===""?XO:QO),r)}function tN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function nN(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=uf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),y=d.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=uf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:Ti([o,m.pathname]),pathnameBase:lN(Ti([o,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(o=Ti([o,m.pathnameBase]))}return l}function uf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},y)=>{if(p==="*"){let w=u[y]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[y];return m&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function rN(t,e=!1,n=!0){Cr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function iN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ai(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var sN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function oN(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?_o(t):t,o;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?o=jx(n.substring(1),"/"):o=jx(n,e)):o=e,{pathname:o,search:cN(r),hash:uN(i)}}function jx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Km(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mk(t){let e=aN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function gk(t,e,n,r=!1){let i;typeof t=="string"?i=_o(t):(i={...t},dt(!i.pathname||!i.pathname.includes("?"),Km("?","pathname","search",i)),dt(!i.pathname||!i.pathname.includes("#"),Km("#","pathname","hash",i)),dt(!i.search||!i.search.includes("#"),Km("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let m=e.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}u=m>=0?e[m]:"/"}let d=oN(i,u),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var Ti=t=>t.join("/").replace(/\/\/+/g,"/"),lN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,dN=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function fN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function hN(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var yk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bk(t,e){let n=t;if(typeof n!="string"||!sN.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(yk)try{let o=new URL(window.location.href),l=n.startsWith("//")?new URL(o.protocol+n):new URL(n),u=Ai(l.pathname,e);l.origin===o.origin&&u!=null?n=u+l.search+l.hash:i=!0}catch{Cr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vk=["POST","PUT","PATCH","DELETE"];new Set(vk);var pN=["GET",...vk];new Set(pN);var Ya=O.createContext(null);Ya.displayName="DataRouter";var lh=O.createContext(null);lh.displayName="DataRouterState";var mN=O.createContext(!1),wk=O.createContext({isTransitioning:!1});wk.displayName="ViewTransition";var gN=O.createContext(new Map);gN.displayName="Fetchers";var yN=O.createContext(null);yN.displayName="Await";var cr=O.createContext(null);cr.displayName="Navigation";var Qc=O.createContext(null);Qc.displayName="Location";var Oi=O.createContext({outlet:null,matches:[],isDataRoute:!1});Oi.displayName="Route";var z0=O.createContext(null);z0.displayName="RouteError";var xk="REACT_ROUTER_ERROR",bN="REDIRECT",vN="ROUTE_ERROR_RESPONSE";function wN(t){if(t.startsWith(`${xk}:${bN}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function xN(t){if(t.startsWith(`${xk}:${vN}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new dN(e.status,e.statusText,e.data)}catch{}}function SN(t,{relative:e}={}){dt(Zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=O.useContext(cr),{hash:i,pathname:o,search:l}=eu(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Ti([n,o])),r.createHref({pathname:u,search:l,hash:i})}function Zc(){return O.useContext(Qc)!=null}function As(){return dt(Zc(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Qc).location}var Sk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kk(t){O.useContext(cr).static||O.useLayoutEffect(t)}function kN(){let{isDataRoute:t}=O.useContext(Oi);return t?zN():EN()}function EN(){dt(Zc(),"useNavigate() may be used only in the context of a <Router> component.");let t=O.useContext(Ya),{basename:e,navigator:n}=O.useContext(cr),{matches:r}=O.useContext(Oi),{pathname:i}=As(),o=JSON.stringify(mk(r)),l=O.useRef(!1);return kk(()=>{l.current=!0}),O.useCallback((d,h={})=>{if(Cr(l.current,Sk),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=gk(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ti([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,o,i,t])}O.createContext(null);function eu(t,{relative:e}={}){let{matches:n}=O.useContext(Oi),{pathname:r}=As(),i=JSON.stringify(mk(n));return O.useMemo(()=>gk(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function TN(t,e){return Ek(t,e)}function Ek(t,e,n,r,i){var _;dt(Zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=O.useContext(cr),{matches:l}=O.useContext(Oi),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let A=m&&m.path||"";Ck(h,!m||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let y=As(),v;if(e){let A=typeof e=="string"?_o(e):e;dt(p==="/"||((_=A.pathname)==null?void 0:_.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${A.pathname}" was given in the \`location\` prop.`),v=A}else v=y;let w=v.pathname||"/",x=w;if(p!=="/"){let A=p.replace(/^\//,"").split("/");x="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let k=fk(t,{pathname:x});Cr(m||k!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Cr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=NN(k&&k.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:Ti([p,o.encodeLocation?o.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:Ti([p,o.encodeLocation?o.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),l,n,r,i);return e&&T?O.createElement(Qc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function CN(){let t=LN(),e=fN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:o},"ErrorBoundary")," or"," ",O.createElement("code",{style:o},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,l)}var _N=O.createElement(CN,null),Tk=class extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=xN(t.digest);n&&(t=n)}let e=t!==void 0?O.createElement(Oi.Provider,{value:this.props.routeContext},O.createElement(z0.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?O.createElement(AN,{error:t},e):e}};Tk.contextType=mN;var Wm=new WeakMap;function AN({children:t,error:e}){let{basename:n}=O.useContext(cr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=wN(e.digest);if(r){let i=Wm.get(e);if(i)throw i;let o=bk(r.location,n);if(yk&&!Wm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Wm.set(e,l),l}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function ON({routeContext:t,match:e,children:n}){let r=O.useContext(Ya);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(Oi.Provider,{value:t},n)}function NN(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n==null?void 0:n.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);dt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(n)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:y,errors:v}=n,w=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=n&&r?(p,m)=>{var y,v;r(p,{location:n.location,params:((v=(y=n.matches)==null?void 0:y[0])==null?void 0:v.params)??{},unstable_pattern:hN(n.matches),errorInfo:m})}:void 0;return o.reduceRight((p,m,y)=>{let v,w=!1,x=null,k=null;n&&(v=l&&m.route.id?l[m.route.id]:void 0,x=m.route.errorElement||_N,u&&(d<0&&y===0?(Ck("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,k=null):d===y&&(w=!0,k=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,y+1)),_=()=>{let A;return v?A=x:w?A=k:m.route.Component?A=O.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=p,O.createElement(ON,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?O.createElement(Tk,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:h}):_()},null)}function I0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MN(t){let e=O.useContext(Ya);return dt(e,I0(t)),e}function RN(t){let e=O.useContext(lh);return dt(e,I0(t)),e}function DN(t){let e=O.useContext(Oi);return dt(e,I0(t)),e}function B0(t){let e=DN(t),n=e.matches[e.matches.length-1];return dt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function jN(){return B0("useRouteId")}function LN(){var r;let t=O.useContext(z0),e=RN("useRouteError"),n=B0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function zN(){let{router:t}=MN("useNavigate"),e=B0("useNavigate"),n=O.useRef(!1);return kk(()=>{n.current=!0}),O.useCallback(async(i,o={})=>{Cr(n.current,Sk),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var Lx={};function Ck(t,e,n){!e&&!Lx[t]&&(Lx[t]=!0,Cr(!1,n))}O.memo(IN);function IN({routes:t,future:e,state:n,onError:r}){return Ek(t,void 0,n,r,e)}function Aa(t){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:l}){dt(!Zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:u,navigator:i,static:o,unstable_useTransitions:l,future:{}}),[u,i,o,l]);typeof n=="string"&&(n=_o(n));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:v="default"}=n,w=O.useMemo(()=>{let x=Ai(h,u);return x==null?null:{location:{pathname:x,search:p,hash:m,state:y,key:v},navigationType:r}},[u,h,p,m,y,v,r]);return Cr(w!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:O.createElement(cr.Provider,{value:d},O.createElement(Qc.Provider,{children:e,value:w}))}function UN({children:t,location:e}){return TN($g(t),e)}function $g(t,e=[]){let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let o=[...e,i];if(r.type===O.Fragment){n.push.apply(n,$g(r.props.children,o));return}dt(r.type===Aa,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=$g(r.props.children,o)),n.push(l)}),n}var ef="get",tf="application/x-www-form-urlencoded";function ch(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function $N(t){return ch(t)&&t.tagName.toLowerCase()==="button"}function PN(t){return ch(t)&&t.tagName.toLowerCase()==="form"}function HN(t){return ch(t)&&t.tagName.toLowerCase()==="input"}function qN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VN(t,e){return t.button===0&&(!e||e==="_self")&&!qN(t)}var Cd=null;function FN(){if(Cd===null)try{new FormData(document.createElement("form"),0),Cd=!1}catch{Cd=!0}return Cd}var GN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jm(t){return t!=null&&!GN.has(t)?(Cr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tf}"`),null):t}function KN(t,e){let n,r,i,o,l;if(PN(t)){let u=t.getAttribute("action");r=u?Ai(u,e):null,n=t.getAttribute("method")||ef,i=Jm(t.getAttribute("enctype"))||tf,o=new FormData(t)}else if($N(t)||HN(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(r=d?Ai(d,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||ef,i=Jm(t.getAttribute("formenctype"))||Jm(u.getAttribute("enctype"))||tf,o=new FormData(u,t),!FN()){let{name:h,type:p,value:m}=t;if(p==="image"){let y=h?`${h}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else h&&o.append(h,m)}}else{if(ch(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ef,r=null,i=tf,l=t}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function U0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function WN(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Ai(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function JN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function XN(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await JN(o,n);return l.links?l.links():[]}return[]}));return t2(r.flat(1).filter(YN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function zx(t,e,n,r,i,o){let l=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,u=(d,h)=>{var p;return n[h].pathname!==d.pathname||((p=n[h].route.path)==null?void 0:p.endsWith("*"))&&n[h].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,h)=>l(d,h)||u(d,h)):o==="data"?e.filter((d,h)=>{var m;let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function QN(t,e,{includeHydrateFallback:n}={}){return ZN(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function ZN(t){return[...new Set(t)]}function e2(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function t2(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(e2(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function _k(){let t=O.useContext(Ya);return U0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function n2(){let t=O.useContext(lh);return U0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $0=O.createContext(void 0);$0.displayName="FrameworkContext";function Ak(){let t=O.useContext($0);return U0(t,"You must render this element inside a <HydratedRouter> element"),t}function r2(t,e){let n=O.useContext($0),[r,i]=O.useState(!1),[o,l]=O.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,y=O.useRef(null);O.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let x=T=>{T.forEach(_=>{l(_.isIntersecting)})},k=new IntersectionObserver(x,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[t]),O.useEffect(()=>{if(r){let x=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{i(!0)},w=()=>{i(!1),l(!1)};return n?t!=="intent"?[o,y,{}]:[o,y,{onFocus:ic(u,v),onBlur:ic(d,w),onMouseEnter:ic(h,v),onMouseLeave:ic(p,w),onTouchStart:ic(m,v)}]:[!1,y,{}]}function ic(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function i2({page:t,...e}){let{router:n}=_k(),r=O.useMemo(()=>fk(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?O.createElement(o2,{page:t,matches:r,...e}):null}function s2(t){let{manifest:e,routeModules:n}=Ak(),[r,i]=O.useState([]);return O.useEffect(()=>{let o=!1;return XN(t,e,n).then(l=>{o||i(l)}),()=>{o=!0}},[t,e,n]),r}function o2({page:t,matches:e,...n}){let r=As(),{future:i,manifest:o,routeModules:l}=Ak(),{basename:u}=_k(),{loaderData:d,matches:h}=n2(),p=O.useMemo(()=>zx(t,e,h,o,r,"data"),[t,e,h,o,r]),m=O.useMemo(()=>zx(t,e,h,o,r,"assets"),[t,e,h,o,r]),y=O.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,k=!1;if(e.forEach(_=>{var j;let A=o.routes[_.route.id];!A||!A.hasLoader||(!p.some(I=>I.route.id===_.route.id)&&_.route.id in d&&((j=l[_.route.id])!=null&&j.shouldRevalidate)||A.hasClientLoader?k=!0:x.add(_.route.id))}),x.size===0)return[];let T=WN(t,u,i.unstable_trailingSlashAwareDataRequests,"data");return k&&x.size>0&&T.searchParams.set("_routes",e.filter(_=>x.has(_.route.id)).map(_=>_.route.id).join(",")),[T.pathname+T.search]},[u,i.unstable_trailingSlashAwareDataRequests,d,r,o,p,e,t,l]),v=O.useMemo(()=>QN(m,o),[m,o]),w=s2(m);return O.createElement(O.Fragment,null,y.map(x=>O.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>O.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),w.map(({key:x,link:k})=>O.createElement("link",{key:x,nonce:n.nonce,...k,crossOrigin:k.crossOrigin??n.crossOrigin})))}function a2(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var l2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l2&&(window.__reactRouterVersion="7.13.0")}catch{}function c2({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=O.useRef();i.current==null&&(i.current=HO({window:r,v5Compat:!0}));let o=i.current,[l,u]=O.useState({action:o.action,location:o.location}),d=O.useCallback(h=>{n===!1?u(h):O.startTransition(()=>u(h))},[n]);return O.useLayoutEffect(()=>o.listen(d),[o,d]),O.createElement(BN,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:n})}var Ok=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ao=O.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:u,target:d,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...v},w){let{basename:x,unstable_useTransitions:k}=O.useContext(cr),T=typeof h=="string"&&Ok.test(h),_=bk(h,x);h=_.to;let A=SN(h,{relative:i}),[j,I,N]=r2(r,v),z=h2(h,{replace:l,state:u,target:d,preventScrollReset:p,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:y,unstable_useTransitions:k});function U(ne){e&&e(ne),ne.defaultPrevented||z(ne)}let Z=O.createElement("a",{...v,...N,href:_.absoluteURL||A,onClick:_.isExternal||o?e:U,ref:a2(w,I),target:d,"data-discover":!T&&n==="render"?"true":void 0});return j&&!T?O.createElement(O.Fragment,null,Z,O.createElement(i2,{page:A})):Z});ao.displayName="Link";var u2=O.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:u,children:d,...h},p){let m=eu(l,{relative:h.relative}),y=As(),v=O.useContext(lh),{navigator:w,basename:x}=O.useContext(cr),k=v!=null&&b2(m)&&u===!0,T=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,_=y.pathname,A=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(_=_.toLowerCase(),A=A?A.toLowerCase():null,T=T.toLowerCase()),A&&x&&(A=Ai(A,x)||A);const j=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let I=_===T||!i&&_.startsWith(T)&&_.charAt(j)==="/",N=A!=null&&(A===T||!i&&A.startsWith(T)&&A.charAt(T.length)==="/"),z={isActive:I,isPending:N,isTransitioning:k},U=I?e:void 0,Z;typeof r=="function"?Z=r(z):Z=[r,I?"active":null,N?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let ne=typeof o=="function"?o(z):o;return O.createElement(ao,{...h,"aria-current":U,className:Z,ref:p,style:ne,to:l,viewTransition:u},typeof d=="function"?d(z):d)});u2.displayName="NavLink";var d2=O.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:l=ef,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...v},w)=>{let{unstable_useTransitions:x}=O.useContext(cr),k=g2(),T=y2(u,{relative:h}),_=l.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&Ok.test(u),j=I=>{if(d&&d(I),I.defaultPrevented)return;I.preventDefault();let N=I.nativeEvent.submitter,z=(N==null?void 0:N.getAttribute("formmethod"))||l,U=()=>k(N||I.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:i,state:o,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y});x&&n!==!1?O.startTransition(()=>U()):U()};return O.createElement("form",{ref:w,method:_,action:T,onSubmit:r?d:j,...v,"data-discover":!A&&t==="render"?"true":void 0})});d2.displayName="Form";function f2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nk(t){let e=O.useContext(Ya);return dt(e,f2(t)),e}function h2(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let h=kN(),p=As(),m=eu(t,{relative:o});return O.useCallback(y=>{if(VN(y,e)){y.preventDefault();let v=n!==void 0?n:Oc(p)===Oc(m),w=()=>h(t,{replace:v,state:r,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});d?O.startTransition(()=>w()):w()}},[p,h,m,n,r,e,t,i,o,l,u,d])}var p2=0,m2=()=>`__${String(++p2)}__`;function g2(){let{router:t}=Nk("useSubmit"),{basename:e}=O.useContext(cr),n=jN(),r=t.fetch,i=t.navigate;return O.useCallback(async(o,l={})=>{let{action:u,method:d,encType:h,formData:p,body:m}=KN(o,e);if(l.navigate===!1){let y=l.fetcherKey||m2();await r(y,n,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,flushSync:l.flushSync})}else await i(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,n])}function y2(t,{relative:e}={}){let{basename:n}=O.useContext(cr),r=O.useContext(Oi);dt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...eu(t||".",{relative:e})},l=As();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Ti([n,o.pathname])),Oc(o)}function b2(t,{relative:e}={}){let n=O.useContext(wk);dt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Nk("useViewTransitionState"),i=eu(t,{relative:e});if(!n.isTransitioning)return!1;let o=Ai(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Ai(n.nextLocation.pathname,r)||n.nextLocation.pathname;return uf(i.pathname,l)!=null||uf(i.pathname,o)!=null}var P0=dk();const v2=L0(P0),sc={cmsOptions:[{id:"none",name:" (Standard)",desc:" HTML5"},{id:"china_cms",name:" CMS",desc:"//MetInfo"},{id:"global_cms",name:" CMS",desc:"WordPress/DrupalSEO "},{id:"wechat_editor",name:"",desc:" <style>  CSS"}],roles:[{id:"content_expert",name:"B2B ",desc:""},{id:"industry_consultant",name:"",desc:"MECE"},{id:"consulting_firm",name:"/MBB ",desc:""},{id:"marketing_master",name:"",desc:""}],brands:[{id:"filez_std",name:"",desc:""},{id:"think_innovative",name:"",desc:""},{id:"lenovo_global",name:"",desc:"ESG"},{id:"partner",name:"",desc:""}],industries:[{id:"biopharma",name:"",painPoints:"FDA 21 CFR Part 11 "},{id:"finance",name:"/",painPoints:"IPO/M&A "},{id:"manufacturing",name:"/",painPoints:"IP"},{id:"semiconductor",name:"",painPoints:"EDA /"},{id:"new_energy",name:"",painPoints:""},{id:"state_digital",name:"",painPoints:""},{id:"government",name:"/",painPoints:""}],products:[{id:"ai_kb",name:"Filez AI ",features:"RAG"},{id:"ai_idp",name:"Filez AI ",features:"IDP/"},{id:"ai_platform",name:"Filez AI ",features:""},{id:"content_collab",name:"Filez ",features:""},{id:"vdr",name:"Filez-VDR ",features:""},{id:"filez_disk",name:"Filez ",features:""},{id:"zbox_assistant",name:"Filez  2.0",features:""}],audiences:[{id:"cio",name:"CIO/CTO",focus:""},{id:"tech",name:"IT/",focus:"API"},{id:"ceo",name:"CEO/",focus:"ROI"},{id:"business",name:"",focus:""}],journeyStages:[{id:"awareness",name:"1. ",desc:""},{id:"consideration",name:"2. ",desc:""},{id:"decision",name:"3. /",desc:"ROISLA"},{id:"retention",name:"4. ",desc:""}],styles:[{id:"whitepaper",name:"/",desc:""},{id:"case_study",name:"",desc:"---"},{id:"consultative",name:"",desc:""},{id:"story",name:"",desc:""},{id:"wechat",name:"",desc:""},{id:"pr",name:"PR ",desc:""}],ctaStrategies:[{id:"soft_asset",name:" (Whitepaper)",desc:""},{id:"hard_demo",name:" (Book a Demo)",desc:"1v1"},{id:"diagnostic",name:"",desc:""},{id:"limited_offer",name:"",desc:" FOMO"},{id:"consultation",name:"",desc:""},{id:"free_trial",name:"",desc:"0"}],layoutStyles:[{id:"none",name:"",desc:"",css:""},{id:"mckinsey",name:"",desc:"",css:"/* McKinsey Style */ h1 { font-family: 'Georgia'; border-bottom: 1px solid #ddd; }"},{id:"gartner",name:"Gartner ",desc:"",css:"/* Gartner Style */ .card { border-left: 5px solid #0056b3; }"},{id:"tech_blog",name:"",desc:"",css:"--bg-body: #0d1117; font-family: 'Fira Code';"},{id:"official",name:"",desc:"",css:"/* Official */ h1 { color: #d60000; text-align: center; }"},{id:"newsletter",name:"",desc:"",css:"max-width: 680px; margin: 0 auto;"}],multimodalOptions:[{id:"video",name:"",desc:"/"},{id:"data_viz",name:"",desc:"Markdown  Mermaid"},{id:"interactive",name:"",desc:"ROI "},{id:"audio",name:"",desc:""}],competitors:[{id:"ideals",name:"iDeals",category:"VDR",edge:""},{id:"intralinks",name:"Intralinks",category:"VDR",edge:""},{id:"datasite",name:"Datasite",category:"VDR",edge:""},{id:"public_cloud",name:" (BAT)",category:"General",edge:""},{id:"box",name:"Box",category:"General",edge:""},{id:"aishu",name:"",category:"Vertical",edge:""}],channels:[{id:"wechat",name:"",desc:"",iconName:"Smartphone"},{id:"website",name:"/",desc:"SEOH",iconName:"Monitor"},{id:"edm",name:"EDM ",desc:"Table",iconName:"Mail"},{id:"report",name:"",desc:"PDF",iconName:"FileText"}],headlineStrategies:[{id:"fomo",name:"/",desc:""},{id:"benefit",name:"",desc:""},{id:"curiosity",name:"/",desc:""},{id:"authority",name:"/",desc:""},{id:"data",name:"",desc:""},{id:"zhihu",name:"/",desc:""}],wordCounts:[{id:"auto",name:"",desc:""},{id:"short",name:" (500-800)",desc:""},{id:"medium",name:" (1200-1500)",desc:""},{id:"long",name:" (2000-3000)",desc:""},{id:"ultra_long",name:" (5000+)",desc:""}],languages:[{id:"zh_cn",name:""},{id:"zh_tw",name:""},{id:"en",name:"English"}],geoStructures:[{id:"direct_answer",name:"",desc:""},{id:"listicle",name:"/",desc:"1.2.3."},{id:"comparison_table",name:"",desc:""},{id:"faq",name:"Q&A ",desc:""}],imageStyles:[{id:"mckinsey",name:"",desc:"Minimalist, clean, red accents"},{id:"gartner",name:"Gartner ",desc:"Dark blue tech, quadrant diagrams"},{id:"tech_future",name:"",desc:"Cyberpunk, neon, data streams"},{id:"enterprise",name:"",desc:"High-end corporate, bright office"},{id:"3d_iso",name:"3D ",desc:"Unreal Engine 5 render, clean lines"}],imageRatios:[{id:"16:9",name:"16:9 ()"},{id:"4:3",name:"4:3 (PPT)"},{id:"1:1",name:"1:1 ()"}],marketingHooks:[{id:"none",name:"",desc:""},{id:"cognitive_conflict",name:"",desc:""},{id:"loss_aversion",name:"",desc:""},{id:"golden_circle",name:"",desc:"Why-How-What"},{id:"story_bridge",name:"",desc:""},{id:"data_shock",name:"",desc:""}],distributionChannels:[{id:"linkedin",name:"LinkedIn ",desc:""},{id:"wechat_moment",name:"/",desc:""},{id:"xiaohongshu",name:"",desc:"Emoji"},{id:"video_script",name:"",desc:""}],tones:[{id:"professional",name:"",desc:""},{id:"innovative",name:"",desc:""},{id:"empathetic",name:"",desc:""},{id:"urgent",name:"",desc:""},{id:"authoritative",name:"",desc:""}]};function uh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function w2(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function d(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})}const x2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class H0 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class S2 extends H0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ix extends H0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Bx extends H0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Pg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Pg||(Pg={}));class k2{constructor(e,{headers:n={},customFetch:r,region:i=Pg.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=x2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return w2(this,arguments,void 0,function*(n,r={}){var i;let o,l;try{const{headers:u,method:d,body:h,signal:p,timeout:m}=r;let y={},{region:v}=r;v||(v=this.region);const w=new URL(`${this.url}/${n}`);v&&v!=="any"&&(y["x-region"]=v,w.searchParams.set("forceFunctionRegion",v));let x;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(y["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(y["Content-Type"]="application/json",x=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?x=JSON.stringify(h):x=h;let k=p;m&&(l=new AbortController,o=setTimeout(()=>l.abort(),m),p?(k=l.signal,p.addEventListener("abort",()=>l.abort())):k=l.signal);const T=yield this.fetch(w.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:x,signal:k}).catch(I=>{throw new S2(I)}),_=T.headers.get("x-relay-error");if(_&&_==="true")throw new Ix(T);if(!T.ok)throw new Bx(T);let A=((i=T.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return A==="application/json"?j=yield T.json():A==="application/octet-stream"||A==="application/pdf"?j=yield T.blob():A==="text/event-stream"?j=T:A==="multipart/form-data"?j=yield T.formData():j=yield T.text(),{data:j,error:null,response:T}}catch(u){return{data:null,error:u,response:u instanceof Bx||u instanceof Ix?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var E2=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},T2=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,u=null,d=null,h=o.status,p=o.statusText;if(o.ok){var m,y;if(n.method!=="HEAD"){var v;const T=await o.text();T===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((v=n.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?u=T:u=JSON.parse(T))}const x=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),k=(y=o.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");x&&k&&k.length>1&&(d=parseInt(k[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var w;const x=await o.text();try{l=JSON.parse(x),Array.isArray(l)&&o.status===404&&(u=[],l=null,h=200,p="OK")}catch{o.status===404&&x===""?(h=204,p="No Content"):l={message:x}}if(l&&n.isMaybeSingle&&(!(l==null||(w=l.details)===null||w===void 0)&&w.includes("0 rows"))&&(l=null,h=200,p="OK"),l&&n.shouldThrowOnError)throw new E2(l)}return{error:l,data:u,count:d,status:h,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var l;let u="",d="",h="";const p=o==null?void 0:o.cause;if(p){var m,y,v,w;const T=(m=p==null?void 0:p.message)!==null&&m!==void 0?m:"",_=(y=p==null?void 0:p.code)!==null&&y!==void 0?y:"";u=`${(v=o==null?void 0:o.name)!==null&&v!==void 0?v:"FetchError"}: ${o==null?void 0:o.message}`,u+=`

Caused by: ${(w=p==null?void 0:p.name)!==null&&w!==void 0?w:"Error"}: ${T}`,_&&(u+=` (${_})`),p!=null&&p.stack&&(u+=`
${p.stack}`)}else{var x;u=(x=o==null?void 0:o.stack)!==null&&x!==void 0?x:""}const k=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(h="",d="Request was aborted (timeout or manual cancellation)",k>this.urlLengthLimit&&(d+=`. Note: Your request URL is ${k} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((p==null?void 0:p.name)==="HeadersOverflowError"||(p==null?void 0:p.code)==="UND_ERR_HEADERS_OVERFLOW")&&(h="",d="HTTP headers exceeded server limits (typically 16KB)",k>this.urlLengthLimit&&(d+=`. Your request URL is ${k} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:u,hint:d,code:h},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},C2=class extends T2{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const u=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Ux=new RegExp("[,()]");var Oa=class extends C2{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Ux.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Ux.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},_2=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join(""),{url:u,headers:d}=this.cloneRequestState();return u.searchParams.set("select",l),r&&d.append("Prefer",`count=${r}`),new Oa({method:i,url:u,headers:d,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);o.searchParams.set("columns",d.join(","))}}return new Oa({method:i,url:o,headers:l,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const l="POST",{url:u,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&u.searchParams.set("on_conflict",e),r&&d.append("Prefer",`count=${r}`),i||d.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(h.length>0){const p=[...new Set(h)].map(m=>`"${m}"`);u.searchParams.set("columns",p.join(","))}}return new Oa({method:l,url:u,headers:d,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Oa({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Oa({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Nc(t){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(t)}function A2(t,e){if(Nc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O2(t){var e=A2(t,"string");return Nc(e)=="symbol"?e:e+""}function N2(t,e,n){return(e=O2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _d(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$x(Object(n),!0).forEach(function(r){N2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$x(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var M2=class Mk{constructor(e,{headers:n={},schema:r,fetch:i,timeout:o,urlLengthLimit:l=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=l;const u=i??globalThis.fetch;o!==void 0&&o>0?this.fetch=(d,h)=>{const p=new AbortController,m=setTimeout(()=>p.abort(),o),y=h==null?void 0:h.signal;if(y){if(y.aborted)return clearTimeout(m),u(d,h);const v=()=>{clearTimeout(m),p.abort()};return y.addEventListener("abort",v,{once:!0}),u(d,_d(_d({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(m),y.removeEventListener("abort",v)})}return u(d,_d(_d({},h),{},{signal:p.signal})).finally(()=>clearTimeout(m))}:this.fetch=u}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _2(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new Mk(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var l;let u;const d=new URL(`${this.url}/rpc/${e}`);let h;const p=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(p)),m=r&&Object.values(n).some(p);m?(u="POST",h=n):r||i?(u=r?"HEAD":"GET",Object.entries(n).filter(([v,w])=>w!==void 0).map(([v,w])=>[v,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([v,w])=>{d.searchParams.append(v,w)})):(u="POST",h=n);const y=new Headers(this.headers);return m?y.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&y.set("Prefer",`count=${o}`),new Oa({method:u,url:d,headers:y,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class R2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const D2="2.95.3",j2=`realtime-js/${D2}`,L2="1.0.0",Rk="2.0.0",Px=Rk,Hg=1e4,z2=1e3,I2=100;var us;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(us||(us={}));var Dt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Dt||(Dt={}));var Sr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Sr||(Sr={}));var qg;(function(t){t.websocket="websocket"})(qg||(qg={}));var lo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(lo||(lo={}));class B2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,r){var i,o;const l=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",d=(o=e.join_ref)!==null&&o!==void 0?o:"",h=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+h.length+m.length,v=new ArrayBuffer(this.HEADER_LENGTH+y);let w=new DataView(v),x=0;w.setUint8(x++,this.KINDS.userBroadcastPush),w.setUint8(x++,d.length),w.setUint8(x++,u.length),w.setUint8(x++,l.length),w.setUint8(x++,h.length),w.setUint8(x++,m.length),w.setUint8(x++,n),Array.from(d,T=>w.setUint8(x++,T.charCodeAt(0))),Array.from(u,T=>w.setUint8(x++,T.charCodeAt(0))),Array.from(l,T=>w.setUint8(x++,T.charCodeAt(0))),Array.from(h,T=>w.setUint8(x++,T.charCodeAt(0))),Array.from(m,T=>w.setUint8(x++,T.charCodeAt(0)));var k=new Uint8Array(v.byteLength+r.byteLength);return k.set(new Uint8Array(v),0),k.set(new Uint8Array(r),v.byteLength),k.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,l,u,d]=r;return n({join_ref:i,ref:o,topic:l,event:u,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const h=r.decode(e.slice(d,d+i));d=d+i;const p=r.decode(e.slice(d,d+o));d=d+o;const m=r.decode(e.slice(d,d+l));d=d+l;const y=e.slice(d,e.byteLength),v=u===this.JSON_ENCODING?JSON.parse(r.decode(y)):y,w={type:this.BROADCAST_EVENT,event:p,payload:v};return l>0&&(w.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Dk{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(nt||(nt={}));const Hx=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=U2(l,t,e,i),o),{}):{}},U2=(t,e,n,r)=>{const i=e.find(u=>u.name===t),o=i==null?void 0:i.type,l=n[t];return o&&!r.includes(o)?jk(o,l):Vg(l)},jk=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return q2(e,n)}switch(t){case nt.bool:return $2(e);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return P2(e);case nt.json:case nt.jsonb:return H2(e);case nt.timestamp:return V2(e);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return Vg(e);default:return Vg(e)}},Vg=t=>t,$2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},P2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},H2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},q2=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>jk(e,u))}return t},V2=t=>typeof t=="string"?t.replace(" ","T"):t,Lk=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ym{constructor(e,n,r={},i=Hg){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(qx||(qx={}));class yc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yc.syncState(this.state,i,o,l),this.pendingDiffs.forEach(d=>{this.state=yc.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=yc.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),l=this.transformState(n),u={},d={};return this.map(o,(h,p)=>{l[h]||(d[h]=p)}),this.map(l,(h,p)=>{const m=o[h];if(m){const y=p.map(k=>k.presence_ref),v=m.map(k=>k.presence_ref),w=p.filter(k=>v.indexOf(k.presence_ref)<0),x=m.filter(k=>y.indexOf(k.presence_ref)<0);w.length>0&&(u[h]=w),x.length>0&&(d[h]=x)}else u[h]=p}),this.syncDiff(o,{joins:u,leaves:d},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,d)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(d),p.length>0){const m=e[u].map(v=>v.presence_ref),y=p.filter(v=>m.indexOf(v.presence_ref)<0);e[u].unshift(...y)}r(u,p,d)}),this.map(l,(u,d)=>{let h=e[u];if(!h)return;const p=d.map(m=>m.presence_ref);h=h.filter(m=>p.indexOf(m.presence_ref)<0),e[u]=h,i(u,h,d),h.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Vx||(Vx={}));var bc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(bc||(bc={}));var wi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(wi||(wi={}));class La{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ym(this,Sr.join,this.params,this.timeout),this.rejoinTimer=new Dk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new yc(this),this.broadcastEndpointURL=Lk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Dt.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[bc.PRESENCE]&&this.bindings[bc.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(wi.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(wi.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){e==null||e(wi.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,k=(w=x==null?void 0:x.length)!==null&&w!==void 0?w:0,T=[];for(let _=0;_<k;_++){const A=x[_],{filter:{event:j,schema:I,table:N,filter:z}}=A,U=v&&v[_];if(U&&U.event===j&&La.isFilterValueEqual(U.schema,I)&&La.isFilterValueEqual(U.table,N)&&La.isFilterValueEqual(U.filter,z))T.push(Object.assign(Object.assign({},A),{id:U.id}));else{this.unsubscribe(),this.state=Dt.errored,e==null||e(wi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(wi.SUBSCRIBED);return}}).receive("error",v=>{this.state=Dt.errored,e==null||e(wi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(wi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Dt.joined&&e===bc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const h=await u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,d;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Dt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ym(this,Sr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Dt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ym(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>I2){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:h,join:p}=Sr;if(r&&[u,d,h,p].indexOf(l)>=0&&r!==this._joinRef())return;let y=this._onMessage(l,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var w,x,k;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((k=(x=v.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===l}).map(v=>v.callback(y,r)):(o=this.bindings[l])===null||o===void 0||o.filter(v=>{var w,x,k,T,_,A;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const j=v.id,I=(w=v.filter)===null||w===void 0?void 0:w.event;return j&&((x=n.ids)===null||x===void 0?void 0:x.includes(j))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const j=(_=(T=v==null?void 0:v.filter)===null||T===void 0?void 0:T.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return j==="*"||j===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:x,table:k,commit_timestamp:T,type:_,errors:A}=w;y=Object.assign(Object.assign({},{schema:x,table:k,commit_timestamp:T,eventType:_,new:{},old:{},errors:A}),this._getPayloadRecords(w))}v.callback(y,r)})}_isClosed(){return this.state===Dt.closed}_isJoined(){return this.state===Dt.joined}_isJoining(){return this.state===Dt.joining}_isLeaving(){return this.state===Dt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&La.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Sr.close,{},e)}_onError(e){this._on(Sr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Hx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Hx(e.columns,e.old_record)),n}}const Xm=()=>{},Ad={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},F2=[1e3,2e3,5e3,1e4],G2=1e4,K2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class W2{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hg,this.transport=null,this.heartbeatIntervalMs=Ad.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xm,this.ref=0,this.reconnectTimer=null,this.vsn=Px,this.logger=Xm,this.conn=null,this.sendBuffer=[],this.serializer=new B2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${qg.websocket}`,this.httpEndpoint=Lk(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=R2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return n==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case us.connecting:return lo.Connecting;case us.open:return lo.Open;case us.closing:return lo.Closing;default:return lo.Closed}}isConnected(){return this.connectionState()===lo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new La(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(z2,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ad.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:l}=n,u=l?`(${l})`:"",d=o.status||"";this.log("receive",`${d} ${r} ${i} ${u}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===us.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===us.open||this.conn.readyState===us.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Sr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([K2],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:j2};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Sr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Dk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ad.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,l,u,d,h,p,m,y,v;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Hg,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ad.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Xm,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:Px,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(w=>F2[w-1]||G2),this.vsn){case L2:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:((w,x)=>x(JSON.stringify(w))),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:((w,x)=>x(JSON.parse(w)));break;case Rk:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Mc=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function J2(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function Y2(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function X2(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:l}){const u=J2(t.baseUrl,r,i),d=await Y2(t.auth),h=await e(u,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...d,...l},body:o?JSON.stringify(o):void 0}),p=await h.text(),m=(h.headers.get("content-type")||"").includes("application/json"),y=m&&p?JSON.parse(p):p;if(!h.ok){const v=m?y:void 0,w=v==null?void 0:v.error;throw new Mc((w==null?void 0:w.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:v})}return{status:h.status,headers:h.headers,data:y}}}}function Od(t){return t.join("")}var Q2=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Od(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Od(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Od(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Od(t.namespace)}`}),!0}catch(e){if(e instanceof Mc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Mc&&n.status===409)return;throw n}}};function va(t){return t.join("")}var Z2=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${va(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${va(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${va(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${va(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${va(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${va(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Mc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Mc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},eM=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=X2({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Q2(this.client,e),this.tableOps=new Z2(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},dh=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function fh(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Nd=class extends dh{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zk=class extends dh{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const tM=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),nM=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Fg=t=>{if(Array.isArray(t))return t.map(n=>Fg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Fg(r)}),e},rM=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(t)}function iM(t,e){if(Rc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sM(t){var e=iM(t,"string");return Rc(e)=="symbol"?e:e+""}function oM(t,e,n){return(e=sM(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fx(Object(n),!0).forEach(function(r){oM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fx(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Gx=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},aM=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t,o=i.status||500;if(typeof i.json=="function")i.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";e(new Nd(Gx(l),o,u,r))}).catch(()=>{if(r==="vectors"){const l=o+"";e(new Nd(i.statusText||`HTTP ${o} error`,o,l,r))}else{const l=o+"";e(new Nd(i.statusText||`HTTP ${o} error`,o,l,r))}});else{const l=o+"";e(new Nd(i.statusText||`HTTP ${o} error`,o,l,r))}}else e(new zk(Gx(t),t,r))},lM=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?ve(ve({},i),n):(nM(r)?(i.headers=ve({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),ve(ve({},i),n))};async function oc(t,e,n,r,i,o,l){return new Promise((u,d)=>{t(n,lM(e,r,i,o)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;if(l==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>u(h)).catch(h=>aM(h,d,r,l))})}function Ik(t="storage"){return{get:async(e,n,r,i)=>oc(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,o)=>oc(e,"POST",n,i,o,r,t),put:async(e,n,r,i,o)=>oc(e,"PUT",n,i,o,r,t),head:async(e,n,r,i)=>oc(e,"HEAD",n,ve(ve({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,o)=>oc(e,"DELETE",n,i,o,r,t)}}const cM=Ik("storage"),{get:Dc,post:xr,put:Gg,head:uM,remove:q0}=cM,$n=Ik("vectors");var Xa=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=tM(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(fh(n))return{data:null,error:n};throw n}}},dM=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(fh(e))return{data:null,error:e};throw e}}};let Bk;Bk=Symbol.toStringTag;var fM=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Bk]="BlobDownloadBuilder",this.promise=null}asStream(){return new dM(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(fh(e))return{data:null,error:e};throw e}}};const hM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var pM=class extends Xa{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let o;const l=ve(ve({},Kx),r);let u=ve(ve({},i.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",i.encodeMetadata(d)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),d&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(d))):(o=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(d))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(u=ve(ve({},u),r.headers));const h=i._removeEmptyFolders(e),p=i._getFinalPath(h),m=await(t=="PUT"?Gg:xr)(i.fetch,`${i.url}/object/${p}`,o,ve({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:h,id:m.Id,fullPath:m.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),l=i._getFinalPath(o),u=new URL(i.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",e),i.handleOperation(async()=>{let d;const h=ve({upsert:Kx.upsert},r),p=ve(ve({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",h.cacheControl)):(d=n,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:o,fullPath:(await Gg(i.fetch,u.toString(),d,{headers:p})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=ve({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await xr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(n.url+o.url),u=l.searchParams.get("token");if(!u)throw new dh("No token returned by API");return{signedUrl:l.toString(),path:t,token:u}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await xr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await xr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),o=await xr(r.fetch,`${r.url}/object/sign/${i}`,ve({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${l}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await xr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(l=>ve(ve({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${o}`):null}))})}download(t,e,n){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),u=()=>Dc(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0},n);return new fM(u,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Fg(await Dc(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await uM(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(fh(r)&&r instanceof zk){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await q0(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=ve(ve(ve({},hM),e),{},{prefix:t||""});return await xr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=ve({},t);return await xr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const mM="2.95.3",tu={"X-Client-Info":`storage-js/${mM}`};var gM=class extends Xa{constructor(t,e={},n,r){const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const o=i.href.replace(/\/$/,""),l=ve(ve({},tu),e);super(o,l,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await Dc(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Dc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await xr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await Gg(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await xr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await q0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},yM=class extends Xa{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=ve(ve({},tu),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await xr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Dc(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await q0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!rM(t))throw new dh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new eM({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const l=i[o];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(i,u),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}},bM=class extends Xa{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=ve(ve({},tu),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await $n.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await $n.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},vM=class extends Xa{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=ve(ve({},tu),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},wM=class extends Xa{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=ve(ve({},tu),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},xM=class extends wM{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new SM(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},SM=class extends bM{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ve(ve({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ve(ve({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new kM(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},kM=class extends vM{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ve(ve({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ve(ve({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ve(ve({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ve(ve({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ve(ve({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},EM=class extends gM{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new pM(this.url,this.headers,t,this.fetch)}get vectors(){return new xM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yM(this.url+"/iceberg",this.headers,this.fetch)}};const Uk="2.95.3",Na=30*1e3,Kg=3,Qm=Kg*Na,TM="http://localhost:9999",CM="supabase.auth.token",_M={"X-Client-Info":`gotrue-js/${Uk}`},Wg="X-Supabase-Api-Version",$k={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,OM=600*1e3;class jc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class NM extends jc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function MM(t){return ue(t)&&t.name==="AuthApiError"}class co extends jc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ni extends jc{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Un extends Ni{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zm(t){return ue(t)&&t.name==="AuthSessionMissingError"}class wa extends Ni{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Md extends Ni{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Rd extends Ni{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function RM(t){return ue(t)&&t.name==="AuthImplicitGrantRedirectError"}class Wx extends Ni{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class DM extends Ni{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Jg extends Ni{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function eg(t){return ue(t)&&t.name==="AuthRetryableFetchError"}class Jx extends Ni{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Yg extends Ni{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yx=` 	
\r=`.split(""),jM=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Yx.length;e+=1)t[Yx[e].charCodeAt(0)]=-2;for(let e=0;e<df.length;e+=1)t[df[e].charCodeAt(0)]=e;return t})();function Xx(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(df[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(df[r]),e.queuedBits-=6}}function Pk(t,e,n){const r=jM[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Qx(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{IM(l,r,n)};for(let l=0;l<t.length;l+=1)Pk(t.charCodeAt(l),i,o);return e.join("")}function LM(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function zM(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}LM(r,e)}}function IM(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ia(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Pk(t.charCodeAt(i),n,r);return new Uint8Array(e)}function BM(t){const e=[];return zM(t,n=>e.push(n)),new Uint8Array(e)}function fo(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Xx(i,n,r)),Xx(null,n,r),e.join("")}function UM(t){return Math.round(Date.now()/1e3)+t}function $M(){return Symbol("auth-callback")}const Jt=()=>typeof window<"u"&&typeof document<"u",no={tested:!1,writable:!1},Hk=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(no.tested)return no.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),no.tested=!0,no.writable=!0}catch{no.tested=!0,no.writable=!1}return no.writable};function PM(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const qk=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),HM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ma=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ro=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Wt=async(t,e)=>{await t.removeItem(e)};class hh{constructor(){this.promise=new hh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}hh.promiseConstructor=Promise;function Dd(t){const e=t.split(".");if(e.length!==3)throw new Yg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!AM.test(e[r]))throw new Yg("JWT not in base64url format");return{header:JSON.parse(Qx(e[0])),payload:JSON.parse(Qx(e[1])),signature:Ia(e[2]),raw:{header:e[0],payload:e[1]}}}async function qM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function VM(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){i(l);return}}})()})}function FM(t){return("0"+t.toString(16)).substr(-2)}function GM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,FM).join("")}async function KM(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function WM(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await KM(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xa(t,e,n=!1){const r=GM();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ma(t,`${e}-code-verifier`,i);const o=await WM(r);return[o,r===o?"plain":"s256"]}const JM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YM(t){const e=t.headers.get(Wg);if(!e||!e.match(JM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function XM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function QM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ZM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sa(t){if(!ZM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function eR(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Zx(t){return JSON.parse(JSON.stringify(t))}const oo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tR=[502,503,504];async function e1(t){var e;if(!HM(t))throw new Jg(oo(t),0);if(tR.includes(t.status))throw new Jg(oo(t),t.status);let n;try{n=await t.json()}catch(o){throw new co(oo(o),o)}let r;const i=YM(t);if(i&&i.getTime()>=$k["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Jx(oo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Un}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Jx(oo(n),t.status,n.weak_password.reasons);throw new NM(oo(n),t.status||500,r)}const nR=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ye(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Wg]||(o[Wg]=$k["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await rR(t,e,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function rR(t,e,n,r,i,o){const l=nR(e,r,i,o);let u;try{u=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new Jg(oo(d),0)}if(u.ok||await e1(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await e1(d)}}function wr(t){var e;let n=null;oR(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=UM(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function t1(t){const e=wr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ps(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function iR(t){return{data:t,error:null}}function sR(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,l=uh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function n1(t){return t}function oR(t){return t.access_token&&t.refresh_token&&t.expires_in}const ng=["global","local","others"];class aR{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=qk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ng[0]){if(ng.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ng.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ps})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=uh(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:sR,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ps})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},p=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:n1});if(p.error)throw p.error;const m=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(d=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);h[`${k}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(ue(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Sa(e);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ps})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Sa(e);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ps})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Sa(e);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ps})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Sa(e.userId);try{const{data:n,error:r}=await ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Sa(e.userId),Sa(e.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},p=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:n1});if(p.error)throw p.error;const m=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(d=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);h[`${k}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(ue(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}}function r1(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ka={debug:!!(globalThis&&Hk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class lR extends Vk{}async function cR(t,e,n){ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ka.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new lR(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ka.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function uR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Fk(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function dR(t){return parseInt(t,16)}function fR(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function hR(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:d,resources:h,scheme:p,uri:m,version:y}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=Fk(t.address),w=p?`${p}://${r}`:r,x=t.statement?`${t.statement}
`:"",k=`${w} wants you to sign in with your Ethereum account:
${v}

${x}`;let T=`URI: ${m}
Version: ${y}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),u&&(T+=`
Not Before: ${u.toISOString()}`),d&&(T+=`
Request ID: ${d}`),h){let _=`
Resources:`;for(const A of h){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);_+=`
- ${A}`}T+=_}return`${k}
${T}`}class Tt extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class ff extends Tt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function pR({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(Gk(l)){if(o.rp.id!==l)return new Tt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function mR({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Gk(r)){if(n.rpId!==r)return new Tt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class gR{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const yR=new gR;function bR(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=uh(t,["challenge","user","excludeCredentials"]),o=Ia(e).buffer,l=Object.assign(Object.assign({},n),{id:Ia(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const h=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:Ia(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function vR(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=uh(t,["challenge","allowCredentials"]),i=Ia(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Ia(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function wR(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:fo(new Uint8Array(t.response.attestationObject)),clientDataJSON:fo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function xR(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:fo(new Uint8Array(i.authenticatorData)),clientDataJSON:fo(new Uint8Array(i.clientDataJSON)),signature:fo(new Uint8Array(i.signature)),userHandle:i.userHandle?fo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Gk(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function i1(){var t,e;return!!(Jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function SR(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ff("Browser returned unexpected credential type",e)}:{data:null,error:new ff("Empty credential response",e)}}catch(e){return{data:null,error:pR({error:e,options:t})}}}async function kR(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ff("Browser returned unexpected credential type",e)}:{data:null,error:new ff("Empty credential response",e)}}catch(e){return{data:null,error:mR({error:e,options:t})}}}const ER={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},TR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function hf(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(e(l)){const u=r[o];e(u)?r[o]=hf(u,l):r[o]=hf(l)}else r[o]=l}return r}function CR(t,e){return hf(ER,t,e||{})}function _R(t,e){return hf(TR,t,e||{})}class AR{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){var l;try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:d};const h=i??yR.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;if(!p.name){const m=r;if(m)p.name=`${p.id}:${m}`;else{const v=(await this.client.getUser()).data.user,w=((l=v==null?void 0:v.user_metadata)===null||l===void 0?void 0:l.name)||(v==null?void 0:v.email)||(v==null?void 0:v.id)||"User";p.name=`${p.id}:${w}`}}p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=CR(u.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:m,error:y}=await SR({publicKey:p,signal:h});return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}case"request":{const p=_R(u.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:m,error:y}=await kR(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:h}));return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}}}catch(u){return ue(u)?{data:null,error:u}:{data:null,error:new co("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new jc("rpId is required for WebAuthn authentication")};try{if(!i1())return{data:null,error:new co("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(l){return ue(l)?{data:null,error:l}:{data:null,error:new co("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new jc("rpId is required for WebAuthn registration")};try{if(!i1())return{data:null,error:new co("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:u};const{data:d,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(l){return ue(l)?{data:null,error:l}:{data:null,error:new co("Unexpected error in register",l)}}}}uR();const OR={url:TM,storageKey:CM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_M,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function s1(t,e,n){return await n()}const Ea={};class Lc{get jwks(){var e,n;return(n=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},OR),e);if(this.storageKey=o.storageKey,this.instanceID=(n=Lc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Lc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Jt()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new aR({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=qk(o.fetch),this.lock=o.lock||s1,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Jt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=cR:this.lock=s1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new AR(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Hk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=r1(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=r1(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Uk}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Jt()&&(n=PM(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Jt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),RM(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ue(n)?this._returnResult({error:n}):this._returnResult({error:new co("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:wr}),{data:l,error:u}=o;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(o){if(ue(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:p,password:m,options:y}=e;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await xa(this.storage,this.storageKey)),o=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:m,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:w},xform:wr})}else if("phone"in e){const{phone:p,password:m,options:y}=e;o=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:wr})}else throw new Md("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return await Wt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(o){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ue(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:t1})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:t1})}else throw new Md("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new wa;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,l,u,d,h,p,m,y;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:x,wallet:k,statement:T,options:_}=e;let A;if(Jt())if(typeof k=="object")A=k;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")A=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=k}const j=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),I=await A.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=Fk(I[0]);let z=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!z){const Z=await A.request({method:"eth_chainId"});z=dR(Z)}const U={domain:j.host,address:N,statement:T,uri:j.href,version:"1",chainId:z,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=_==null?void 0:_.signInWithEthereum)===null||p===void 0?void 0:p.resources};v=hR(U),w=await A.request({method:"personal_sign",params:[fR(v),N]})}try{const{data:x,error:k}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:w},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:wr});if(k)throw k;if(!x||!x.session||!x.user){const T=new wa;return this._returnResult({data:{user:null,session:null},error:T})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:k})}catch(x){if(ue(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,o,l,u,d,h,p,m,y,v;let w,x;if("message"in e)w=e.message,x=e.signature;else{const{chain:k,wallet:T,statement:_,options:A}=e;let j;if(Jt())if(typeof T=="object")j=T;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=T}const I=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),_?{statement:_}:null));let z;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")z=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)z=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)w=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),x=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${I.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(i=(r=A==null?void 0:A.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=A==null?void 0:A.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((l=A==null?void 0:A.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((u=A==null?void 0:A.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((d=A==null?void 0:A.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((h=A==null?void 0:A.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((m=(p=A==null?void 0:A.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...A.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(w),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:k,error:T}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:fo(x)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:wr});if(T)throw T;if(!k||!k.session||!k.user){const _=new wa;return this._returnResult({data:{user:null,session:null},error:_})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:T})}catch(k){if(ue(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(e){const n=await ro(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new DM;const{data:o,error:l}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:wr});if(await Wt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const u=new wa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ue(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=e,u=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:wr}),{data:d,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d||!d.session||!d.user){const p=new wa;return this._returnResult({data:{user:null,session:null},error:p})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:h})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,l;try{if("email"in e){const{email:u,options:d}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await xa(this.storage,this.storageKey));const{error:m}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:u,options:d}=e,{data:h,error:p}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Md("You must provide either an email or phone number.")}catch(u){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:wr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,h=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await xa(this.storage,this.storageKey));const h=await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:iR});return!((o=h.data)===null||o===void 0)&&o.url&&Jt()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ue(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Un;const{error:i}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ue(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:l}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:l,error:u}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new Md("You must provide either an email or phone number and a type")}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ro(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Qm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await ro(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=tg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=eR(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ps}):await this._useSession(async n=>{var r,i,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Un}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:ps})})}catch(n){if(ue(n))return Zm(n)&&(await this._removeSession(),await Wt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Un;const l=i.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await xa(this.storage,this.storageKey));const{data:h,error:p}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:ps});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ue(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Un;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:l}=Dd(e.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(ue(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Un;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Jt())throw new Rd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Rd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Wx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Rd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Wx("No code detected.");const{data:_,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:d,token_type:h}=e;if(!o||!u||!l||!h)throw new Rd("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(u);let y=p+m;d&&(y=parseInt(d));const v=y-p;v*1e3<=Na&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const w=y-m;p-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,p):p-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,p);const{data:x,error:k}=await this._getUser(o);if(k)throw k;const T={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:m,expires_at:y,refresh_token:l,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(ue(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ro(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o&&!Zm(o))return this._returnResult({error:o});const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(MM(u)&&(u.status===404||u.status===401||u.status===403)||Zm(u)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Wt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=$M(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await xa(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ue(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,d,h,p;const{data:m,error:y}=o;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",v,{headers:this.headers,jwt:(p=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Jt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ue(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:l,provider:u,token:d,access_token:h,nonce:p}=e,m=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:wr}),{data:y,error:v}=m;return v?this._returnResult({data:{user:null,session:null},error:v}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new wa}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:v}))}catch(i){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await VM(async i=>(i>0&&await qM(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:wr})),(i,o)=>{const l=200*Math.pow(2,i);return o&&eg(o)&&Date.now()+l-r<Na})}catch(r){if(this._debug(n,"error",r),ue(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Jt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ro(this.storage,this.storageKey);if(i&&this.userStorage){let l=await ro(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Ma(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:tg()}else if(i&&!i.user&&!i.user){const l=await ro(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Wt(this.storage,this.storageKey+"-user"),await Ma(this.storage,this.storageKey,i)):i.user=tg()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Qm;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Qm}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),eg(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Un;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new hh;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Un;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),ue(o)){const l={data:null,error:o};return eg(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Wt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ma(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Zx(i);await Ma(this.storage,this.storageKey,o)}else{const i=Zx(n);await Ma(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Wt(this.storage,this.storageKey),await Wt(this.storage,this.storageKey+"-code-verifier"),await Wt(this.storage,this.storageKey+"-user"),this.userStorage&&await Wt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Na);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Na);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Na}ms, refresh threshold is ${Kg} ticks`),i<=Kg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Vk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await xa(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:h}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&d.type==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?wR(e.webauthn.credential_response):xR(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:bR(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:vR(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,o;if(e)try{const{payload:v}=Dd(e);let w=null;v.aal&&(w=v.aal);let x=w;const{data:{user:k},error:T}=await this.getUser(e);if(T)return this._returnResult({data:null,error:T});((r=(n=k==null?void 0:k.factors)===null||n===void 0?void 0:n.filter(j=>j.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(x="aal2");const A=v.amr||[];return{data:{currentLevel:w,nextLevel:x,currentAuthenticationMethods:A},error:null}}catch(v){if(ue(v))return this._returnResult({data:null,error:v});throw v}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Dd(l.access_token);let h=null;d.aal&&(h=d.aal);let p=h;((o=(i=l.user.factors)===null||i===void 0?void 0:i.filter(v=>v.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const y=d.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Un})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Un});const l=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Un});const l=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ye(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Un})})}catch(e){if(ue(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ye(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Un})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+OM>i)return r;const{data:o,error:l}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:w}=await this.getSession();if(w||!v.session)return this._returnResult({data:null,error:w});r=v.session.access_token}const{header:i,payload:o,signature:l,raw:{header:u,payload:d}}=Dd(r);n!=null&&n.allowExpired||XM(o.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:o,header:i,signature:l},error:null}}const p=QM(i.alg),m=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,l,BM(`${u}.${d}`)))throw new Yg("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}}Lc.nextInstanceID={};const NR=Lc,MR="2.95.3";let dc="";typeof Deno<"u"?dc="deno":typeof document<"u"?dc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dc="react-native":dc="node";const RR={"X-Client-Info":`supabase-js-${dc}/${MR}`},DR={headers:RR},jR={schema:"public"},LR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zR={};function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function IR(t,e){if(zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BR(t){var e=IR(t,"string");return zc(e)=="symbol"?e:e+""}function UR(t,e,n){return(e=BR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o1(Object(n),!0).forEach(function(r){UR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const $R=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),PR=()=>Headers,HR=(t,e,n)=>{const r=$R(n),i=PR();return async(o,l)=>{var u;const d=(u=await e())!==null&&u!==void 0?u:t;let h=new i(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(o,gt(gt({},l),{},{headers:h}))}};function qR(t){return t.endsWith("/")?t:t+"/"}function VR(t,e){var n,r;const{db:i,auth:o,realtime:l,global:u}=t,{db:d,auth:h,realtime:p,global:m}=e,y={db:gt(gt({},d),i),auth:gt(gt({},h),o),realtime:gt(gt({},p),l),storage:{},global:gt(gt(gt({},m),u),{},{headers:gt(gt({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function FR(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var GR=class extends NR{constructor(t){super(t)}},KR=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=FR(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:jR,realtime:zR,auth:gt(gt({},LR),{},{storageKey:l}),global:DR},d=VR(n??{},u);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=d.auth)!==null&&h!==void 0?h:{},this.headers,d.global.fetch)}this.fetch=HR(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(gt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new M2(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch,timeout:d.db.timeout,urlLengthLimit:d.db.urlLengthLimit}),this.storage=new EM(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new k2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:l,lock:u,debug:d,throwOnError:h},p,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new GR({url:this.authUrl.href,headers:gt(gt({},y),p),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:l,lock:u,debug:d,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new W2(this.realtimeUrl.href,gt(gt({},t),{},{params:gt(gt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const WR=(t,e,n)=>new KR(t,e,n);function JR(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}JR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const YR="https://snenumqfhpeztspcryfa.supabase.co",XR="sb_publishable_2dXx2E7XLAAn8e3D657F2g_t66mE67p",zt=WR(YR,XR),Kk=O.createContext(void 0),QR=({children:t})=>{const[e,n]=O.useState(sc),[r,i]=O.useState(!0),[o,l]=O.useState(null),u=async()=>{i(!0),l(null);try{const{data:y,error:v}=await zt.from("prompt_configurations").select("*");if(v)throw v;if(!y||y.length===0)console.log("No data found in Supabase, using local defaults."),n(sc);else{const w=JSON.parse(JSON.stringify(sc));y.forEach(x=>{const k=x.category;if(w[k]){const T={id:x.option_id,name:x.name,desc:x.description,...x.extra_data},_=w[k].findIndex(A=>A.id===T.id);_>=0?w[k][_]=T:w[k].push(T)}}),n(w)}}catch(y){console.error("Error fetching data:",y),l(y.message),n(sc)}finally{i(!1)}};O.useEffect(()=>{u()},[]);const d=async(y,v)=>{const w={...e};n(x=>({...x,[y]:[...x[y],v]}));try{const{id:x,name:k,desc:T,..._}=v,{error:A}=await zt.from("prompt_configurations").insert({category:y,option_id:x,name:k,description:T,extra_data:_});if(A)throw A}catch(x){console.error("Error adding item:",x),l(x.message),n(w),alert("Failed to save to database: "+x.message)}},h=async(y,v,w)=>{const x={...e};n(k=>({...k,[y]:k[y].map(T=>T.id===v?w:T)}));try{const{id:k,name:T,desc:_,...A}=w,{error:j}=await zt.from("prompt_configurations").update({option_id:k,name:T,description:_,extra_data:A,updated_at:new Date().toISOString()}).match({category:y,option_id:v});if(j)throw j}catch(k){console.error("Error updating item:",k),l(k.message),n(x),alert("Failed to update database: "+k.message)}},p=async(y,v)=>{const w={...e};n(x=>({...x,[y]:x[y].filter(k=>k.id!==v)}));try{const{error:x}=await zt.from("prompt_configurations").delete().match({category:y,option_id:v});if(x)throw x}catch(x){console.error("Error deleting item:",x),l(x.message),n(w),alert("Failed to delete from database: "+x.message)}},m=async()=>{if(window.confirm("This will WIPE all DB data and reset to code defaults. Are you sure?")){i(!0);try{const{error:y}=await zt.from("prompt_configurations").delete().neq("id","00000000-0000-0000-0000-000000000000");if(y)throw y;n(sc),alert("Database cleared. Use SQL script to re-seed defaults if needed.")}catch(y){console.error("Reset failed",y),alert("Reset failed: "+y.message)}finally{i(!1)}}};return S.jsx(Kk.Provider,{value:{data:e,isLoading:r,error:o,addItem:d,updateItem:h,deleteItem:p,resetData:m},children:t})},Wk=()=>{const t=O.useContext(Kk);if(t===void 0)throw new Error("useData must be used within a DataProvider");return t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=t=>{const e=eD(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...u},d)=>O.createElement("svg",{ref:d,...tD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Jk("lucide",i),...!o&&!nD(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,p])=>O.createElement(h,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const n=O.forwardRef(({className:r,...i},o)=>O.createElement(rD,{ref:o,iconNode:e,className:Jk(`lucide-${ZR(a1(t))}`,`lucide-${t}`,r),...i}));return n.displayName=a1(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sD=_e("arrow-right",iD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],aD=_e("bold",oD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],cD=_e("bot",lD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],dD=_e("box",uD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hD=_e("calendar",fD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mD=_e("check",pD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yD=_e("chevron-right",gD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],l1=_e("circle-check-big",bD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wD=_e("clock",vD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Yk=_e("copy",xD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],kD=_e("database",SD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],TD=_e("download",ED);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],c1=_e("external-link",CD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],go=_e("file-text",_D);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],OD=_e("fingerprint-pattern",AD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],MD=_e("globe",ND);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Xg=_e("image",RD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],jD=_e("italic",DD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],zD=_e("layout-template",LD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],nf=_e("link",ID);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],UD=_e("list-ordered",BD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],PD=_e("list",$D);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rg=_e("loader-circle",HD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],VD=_e("mail",qD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],GD=_e("map",FD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],WD=_e("monitor",KD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],YD=_e("mouse-pointer-click",JD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],QD=_e("panels-top-left",XD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Xk=_e("pen-tool",ZD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tj=_e("pen",ej);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V0=_e("plus",nj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qk=_e("refresh-cw",rj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Qg=_e("save",ij);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oj=_e("settings",sj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],lj=_e("share-2",aj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],uj=_e("smartphone",cj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ic=_e("sparkles",dj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ph=_e("trash-2",fj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],pj=_e("upload",hj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gj=_e("user",mj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Zk=_e("wand-sparkles",yj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bc=_e("x",bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wj=_e("zap",vj),xj={Smartphone:uj,Monitor:WD,Mail:VD,FileText:go},Sj=()=>{const{data:t}=Wk(),[e,n]=O.useState("strategy"),[r,i]=O.useState(!1),[o,l]=O.useState(""),[u,d]=O.useState(!1),[h,p]=O.useState(!1),[m,y]=O.useState([]),[v,w]=O.useState(!1),[x,k]=O.useState(""),[T,_]=O.useState(!1),A=O.useRef(null),[j,I]=O.useState(t.roles[0]),[N,z]=O.useState(t.products[0]),[U,Z]=O.useState(t.industries[0]),[ne,Ee]=O.useState(t.audiences[0]),[le,Be]=O.useState(t.journeyStages[0]),[me,xe]=O.useState(""),[P,Y]=O.useState(""),[W,Ce]=O.useState(""),[De,L]=O.useState(""),[G,te]=O.useState(""),[re,be]=O.useState(""),[Se,pe]=O.useState([]),[et,qe]=O.useState(""),[On,ur]=O.useState(!1),[Fn,au]=O.useState(!1),[dr,nl]=O.useState(!1),Rs=O.useRef(null),[Ds,rl]=O.useState(""),[Gr,Mo]=O.useState(""),[bn,lu]=O.useState(t.geoStructures[0]),[Ro,cn]=O.useState(!1),[un,il]=O.useState(t.brands[0]),[en,js]=O.useState(t.marketingHooks[0]),[jt,sl]=O.useState(t.styles[0]),[dn,cu]=O.useState(t.tones[0]),[tn,nn]=O.useState(t.headlineStrategies[0]),[$t,rn]=O.useState(!0),[Ls,uu]=O.useState(""),[ol,Do]=O.useState(""),[Or,zs]=O.useState(""),[fr,jo]=O.useState(""),[hr,du]=O.useState(""),[Lo,al]=O.useState(""),[Nr,jh]=O.useState(""),[zo,Lh]=O.useState([]),[Io,fu]=O.useState(""),[Is,zh]=O.useState(""),[Nn,pr]=O.useState(t.imageStyles[0]),[Ke,Pt]=O.useState(t.imageRatios[0]),[wt,Bo]=O.useState(t.ctaStrategies[0]),[ji,hu]=O.useState(""),[Ot,Li]=O.useState(t.channels[0]),[Kr,Wr]=O.useState([]),[vn,Jr]=O.useState("markdown"),[Ht,ct]=O.useState(t.layoutStyles[0]),[Mn,ll]=O.useState(t.cmsOptions[0]),[fn,zi]=O.useState(t.wordCounts[0]),[Gn,cl]=O.useState(t.languages[0]);O.useEffect(()=>{(async()=>{const{data:Q,error:We}=await zt.from("prompt_templates").select("*").order("created_at",{ascending:!1});!We&&Q&&y(Q)})()},[]),O.useEffect(()=>{!j&&t.roles.length>0&&I(t.roles[0]),!N&&t.products.length>0&&z(t.products[0])},[t]),O.useEffect(()=>{U&&U.painPoints&&Y(U.painPoints)},[U]),O.useEffect(()=>{function R(Q){Rs.current&&!Rs.current.contains(Q.target)&&ur(!1),A.current&&!A.current.contains(Q.target)&&_(!1)}return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const pu=()=>({roleId:j==null?void 0:j.id,productId:N==null?void 0:N.id,industryId:U==null?void 0:U.id,audienceId:ne==null?void 0:ne.id,journeyStageId:le==null?void 0:le.id,customAudience:me,customPainPoint:P,customCoreValue:W,customMarketValue:De,customScenarios:G,customProof:re,competitorIds:Se,manualCompetitor:et,geoQuestion:Ds,geoKeywords:Gr,geoStructureId:bn==null?void 0:bn.id,brandId:un==null?void 0:un.id,marketingHookId:en==null?void 0:en.id,styleId:jt==null?void 0:jt.id,toneId:dn==null?void 0:dn.id,headlineStrategyId:tn==null?void 0:tn.id,imagePromptsEnabled:$t,imageStyleId:Nn==null?void 0:Nn.id,imageRatioId:Ke==null?void 0:Ke.id,topImage:Ls,middleImage:Or,bottomImage:hr,topImageLink:ol,middleImageLink:fr,bottomImageLink:Lo,channelId:Ot==null?void 0:Ot.id,distChannelIds:Kr,ctaStrategyId:wt==null?void 0:wt.id,ctaLink:ji,outputFormat:vn,layoutStyleId:Ht==null?void 0:Ht.id,cmsOptionId:Mn==null?void 0:Mn.id,wordCountId:fn==null?void 0:fn.id,languageId:Gn==null?void 0:Gn.id}),Ih=R=>{const Q=(We,Nt,qt)=>We.find(Bs=>Bs.id===Nt)||qt;I(Q(t.roles,R.roleId,t.roles[0])),z(Q(t.products,R.productId,t.products[0])),Z(Q(t.industries,R.industryId,t.industries[0])),Ee(Q(t.audiences,R.audienceId,t.audiences[0])),Be(Q(t.journeyStages,R.journeyStageId,t.journeyStages[0])),xe(R.customAudience||""),Y(R.customPainPoint||""),Ce(R.customCoreValue||""),L(R.customMarketValue||""),te(R.customScenarios||""),be(R.customProof||""),pe(R.competitorIds||[]),qe(R.manualCompetitor||""),rl(R.geoQuestion||""),Mo(R.geoKeywords||""),lu(Q(t.geoStructures,R.geoStructureId,t.geoStructures[0])),il(Q(t.brands,R.brandId,t.brands[0])),js(Q(t.marketingHooks,R.marketingHookId,t.marketingHooks[0])),sl(Q(t.styles,R.styleId,t.styles[0])),cu(Q(t.tones,R.toneId,t.tones[0])),nn(Q(t.headlineStrategies,R.headlineStrategyId,t.headlineStrategies[0])),rn(R.imagePromptsEnabled),pr(Q(t.imageStyles,R.imageStyleId,t.imageStyles[0])),Pt(Q(t.imageRatios,R.imageRatioId,t.imageRatios[0])),uu(R.topImage||""),zs(R.middleImage||""),du(R.bottomImage||""),Do(R.topImageLink||""),jo(R.middleImageLink||""),al(R.bottomImageLink||""),Li(Q(t.channels,R.channelId,t.channels[0])),Wr(R.distChannelIds||[]),Bo(Q(t.ctaStrategies,R.ctaStrategyId,t.ctaStrategies[0])),hu(R.ctaLink||""),Jr(R.outputFormat||"markdown"),ct(Q(t.layoutStyles,R.layoutStyleId,t.layoutStyles[0])),ll(Q(t.cmsOptions,R.cmsOptionId,t.cmsOptions[0])),zi(Q(t.wordCounts,R.wordCountId,t.wordCounts[0])),cl(Q(t.languages,R.languageId,t.languages[0]))},Uo=async()=>{if(!x.trim())return alert("");const R=pu();try{const{data:Q,error:We}=await zt.from("prompt_templates").insert({name:x,template_data:R}).select().single();if(We)throw We;y(Nt=>[Q,...Nt]),w(!1),k(""),alert("")}catch(Q){console.error("Failed to save template",Q),alert(": "+Q.message)}},$o=async R=>{if(window.confirm(""))try{const{error:Q}=await zt.from("prompt_templates").delete().eq("id",R);if(Q)throw Q;y(We=>We.filter(Nt=>Nt.id!==R))}catch(Q){alert(": "+Q.message)}};O.useEffect(()=>{if(!j||!N)return;(()=>{const Q=t.competitors.filter(Re=>Se.includes(Re.id));let We=Q.map(Re=>Re.name);et&&We.push(et);const Nt=We.join("");let qt="";We.length>0&&(qt=Fn?`**${Nt}**`:` **${Nt}**  ()`);const Bs=Q.length>0&&dr?`- **${Q.map(Re=>`${Re.name}"${Re.edge}"`).join("")}`:"";let Po="";const Us=(ji==null?void 0:ji.trim())||"https://example.com",Yr=(wt==null?void 0:wt.name)||"CTA",mu=`<div style="text-align: center; margin: 40px 0;"><a href="${Us}" style="background-color: #E2231A; color: #ffffff; padding: 14px 32px; text-decoration: none; border-radius: 6px; font-weight: bold;">${Yr.split(" (")[0]} </a></div>`,gu=`> ** [${Yr.split(" (")[0]}](${Us})**`;let Kn=[];const fl=(Re,tt,gr)=>{if(!(Re!=null&&Re.trim()))return null;if(vn==="html"){const Xr=`<img src="${Re.trim()}" alt="${gr}" style="max-width: 100%; border-radius: 8px;" />`;return tt!=null&&tt.trim()?`<a href="${tt.trim()}" target="_blank">${Xr}</a>`:Xr}else return tt!=null&&tt.trim()?`[![${gr}](${Re.trim()})](${tt.trim()})`:`![${gr}](${Re.trim()})`};if(Ls){const Re=fl(Ls,ol,"Hero");Re&&Kn.push(`- **Hero Image**: : \`${Re}\``)}if(Or){const Re=fl(Or,fr,"Body");Re&&Kn.push(`- **Body Image**: : \`${Re}\``)}if(hr){const Re=fl(hr,Lo,"Footer");Re&&Kn.push(`- **Footer Image**: CTA: \`${Re}\``)}const hl=Kn.length>0?`
**Image Injection**:
${Kn.join(`
`)}`:"";vn==="html"?Po=`5. ** (HTML - ${Ot==null?void 0:Ot.name})**
   -  HTML Markdown
   - **** max-width: 100%
   - ****${Ht==null?void 0:Ht.css}
   - **CMS**${Mn==null?void 0:Mn.desc}
   ${hl}
   - **** CTA \`${mu}\``:Po=`5. ** (Markdown)**
   -  Markdown
   - 
   ${hl}
   - ****${gu}`;const yu=Ds||Gr||Ro?`# GEO Optimization (AI )
   - **>"${Ds||""}"
   - ** ${bn==null?void 0:bn.name} 
   - **${Gr||""}
   ${Ro?"- **Technical SEO**:  Schema.org JSON-LD ":""}`:"",pl=$t?`# Image Generation Prompts
   - ****${Nn==null?void 0:Nn.name}
   - ****${Ke==null?void 0:Ke.name}
   - 3 Prompt (Midjourney)`:"",Bh=zo.length>0?`# Multimodal Placeholders
   ${zo.map(Re=>{const tt=t.multimodalOptions.find(gr=>gr.id===Re);return Re==="video"&&Io?`- **Video**: Embed YouTube link: ${Io}`:Re==="interactive"&&Is?`- **Interactive**: Design logic for "${Is}"`:`- **${tt==null?void 0:tt.name}**: ${tt==null?void 0:tt.desc}`}).join(`
`)}`:"",Uh=Kr.length>0?`# Content Atomization
   
   ${Kr.map(Re=>{const tt=t.distributionChannels.find(gr=>gr.id===Re);return`- **${tt==null?void 0:tt.name}**: ${tt==null?void 0:tt.desc}`}).join(`
`)}`:"",Ho=`# Role
 **${j==null?void 0:j.name}** (${j==null?void 0:j.desc})
****${un==null?void 0:un.name} (${un==null?void 0:un.desc})

# Task
 **${jt==null?void 0:jt.name}** **${Ot==null?void 0:Ot.name}**

# Context
1. ****${N==null?void 0:N.name} (${N==null?void 0:N.features})
2. ****${U==null?void 0:U.name} (: ${P})
3. ****${me||`${ne==null?void 0:ne.name} (${ne==null?void 0:ne.focus})`}
4. ****${fn==null?void 0:fn.name}
5. ****${Gn==null?void 0:Gn.name}
${Nr?`- ****${Nr}`:""}

# Journey Stage
**${le==null?void 0:le.name}** (${le==null?void 0:le.desc})

# Strategy (PMM)
1. ****${P}
2. ****${W||""}
   - **${De||"ROI "}
3. ****${G||""}
4. ****${re||""}
5. ****${qt}
   ${Bs}

# Conversion
****${wt==null?void 0:wt.name}
****${Us}
**Hook**${en==null?void 0:en.name} (${en==null?void 0:en.desc})

${yu}

# Tone
${dn==null?void 0:dn.name} (${dn==null?void 0:dn.desc})

# Output Requirements
1. ****5 [${tn==null?void 0:tn.name}] 
2. ****SEO Meta Description.
3. ****${(jt==null?void 0:jt.id)==="wechat"?"+Emoji":""}
${Po}

${Bh}
${Uh}
${pl}`;l(Ho.trim())})()},[t,j,N,U,ne,le,me,P,W,De,G,re,Se,et,Fn,dr,Ds,Gr,bn,Ro,un,en,jt,dn,tn,$t,Ls,Or,hr,ol,fr,Lo,Nr,zo,Io,Is,Nn,Ke,wt,ji,Ot,Kr,vn,Ht,Mn,fn,Gn]);const mr=async()=>{try{await navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),2e3)}catch(R){console.error("Copy failed",R)}},wn=async()=>{if(o){d(!0);try{const R={role:j==null?void 0:j.name,product:N==null?void 0:N.name,industry:U==null?void 0:U.name,format:jt==null?void 0:jt.name,channel:Ot==null?void 0:Ot.name},{error:Q}=await zt.from("generated_prompts").insert({prompt_content:o,settings:R});if(Q)throw Q;p(!0),setTimeout(()=>p(!1),2e3)}catch(R){alert("Failed to save: "+R.message)}finally{d(!1)}}},ul=R=>{pe(Q=>Q.includes(R)?Q.filter(We=>We!==R):[...Q,R])},dl=(R,Q)=>{const We=t.competitors.filter(Nt=>Nt.category===R);return We.length===0?null:S.jsxs("div",{className:"mb-2",children:[S.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1 px-2",children:Q}),We.map(Nt=>S.jsxs("div",{onClick:()=>ul(Nt.id),className:`cursor-pointer px-3 py-2 text-xs flex items-center hover:bg-slate-50 ${Se.includes(Nt.id)?"text-red-700 bg-red-50":"text-slate-600"}`,children:[S.jsx("div",{className:`w-3 h-3 border rounded mr-2 flex items-center justify-center ${Se.includes(Nt.id)?"bg-red-600 border-red-600":"border-slate-300"}`,children:Se.includes(Nt.id)&&S.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})}),Nt.name]},Nt.id))]})};return S.jsxs("div",{className:"h-full flex flex-col md:flex-row font-sans text-slate-800 overflow-hidden",children:[S.jsxs("div",{className:"w-full md:w-5/12 bg-white border-r border-slate-200 flex flex-col h-full shadow-xl z-10",children:[S.jsxs("div",{className:"p-4 border-b border-slate-100 bg-white z-20 flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-lg font-bold text-slate-900 tracking-tight",children:""}),S.jsx("p",{className:"text-xs text-slate-500 font-medium",children:" Prompt"})]}),S.jsxs("div",{className:"relative",ref:A,children:[S.jsxs("button",{onClick:()=>_(!T),className:"bg-slate-100 hover:bg-slate-200 text-slate-700 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center transition-colors",children:[S.jsx(zD,{className:"w-3 h-3 mr-1.5"})," "]}),T&&S.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-200 z-[100] animate-in fade-in zoom-in-95 duration-100",children:S.jsxs("div",{className:"p-1",children:[S.jsxs("button",{onClick:()=>{w(!0),_(!1)},className:"w-full text-left px-3 py-2 text-xs font-medium text-slate-700 hover:bg-slate-50 rounded-lg flex items-center",children:[S.jsx(Qg,{className:"w-3 h-3 mr-2 text-indigo-500"})," "]}),S.jsx("div",{className:"my-1 border-t border-slate-100"}),S.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[m.length===0&&S.jsx("div",{className:"px-3 py-2 text-xs text-slate-400 text-center",children:""}),m.map(R=>S.jsxs("div",{className:"group flex items-center justify-between px-3 py-2 hover:bg-slate-50 rounded-lg cursor-pointer",children:[S.jsx("span",{className:"text-xs text-slate-600 truncate flex-1",onClick:()=>{Ih(R.template_data),_(!1)},children:R.name}),S.jsx(ph,{className:"w-3 h-3 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:Q=>{Q.stopPropagation(),$o(R.id)}})]},R.id))]})]})})]})]}),S.jsxs("div",{className:"flex border-b border-slate-200 bg-slate-50",children:[S.jsxs("button",{onClick:()=>n("strategy"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${e==="strategy"?"bg-white text-red-700 border-t-2 border-red-600":"text-slate-500 hover:text-slate-700 hover:bg-slate-100"}`,children:[S.jsx(Xk,{className:"w-3 h-3 inline-block mr-1 mb-0.5"})," "]}),S.jsxs("button",{onClick:()=>n("visual"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${e==="visual"?"bg-white text-purple-700 border-t-2 border-purple-600":"text-slate-500 hover:text-slate-700 hover:bg-slate-100"}`,children:[S.jsx(QD,{className:"w-3 h-3 inline-block mr-1 mb-0.5"})," "]})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-5 scrollbar-thin scrollbar-thumb-slate-300",children:[e==="strategy"&&S.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-left-4 duration-300",children:[S.jsxs("div",{className:"bg-slate-50/50 p-4 rounded-xl border border-slate-200 space-y-4",children:[S.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[S.jsx(gj,{className:"w-4 h-4 text-slate-400"}),S.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500",children:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-500 mb-1",children:""}),S.jsx("select",{className:"w-full p-2.5 bg-white border border-slate-300 rounded-lg text-sm font-medium",value:j==null?void 0:j.id,onChange:R=>I(t.roles.find(Q=>Q.id===R.target.value)||t.roles[0]),children:t.roles.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))}),S.jsx("p",{className:"text-[10px] text-slate-400 mt-1 pl-1 bg-slate-100 p-1.5 rounded",children:j==null?void 0:j.desc})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-500 mb-1",children:""}),S.jsx("select",{className:"w-full p-2 bg-white border border-slate-300 rounded-lg text-sm",value:Gn==null?void 0:Gn.id,onChange:R=>cl(t.languages.find(Q=>Q.id===R.target.value)||t.languages[0]),children:t.languages.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-500 mb-1",children:""}),S.jsx("select",{className:"w-full p-2 bg-white border border-slate-300 rounded-lg text-sm text-red-700 font-medium",value:N==null?void 0:N.id,onChange:R=>z(t.products.find(Q=>Q.id===R.target.value)||t.products[0]),children:t.products.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-500 mb-1",children:""}),S.jsx("select",{className:"w-full p-2 bg-white border border-slate-300 rounded-lg text-sm",value:U==null?void 0:U.id,onChange:R=>Z(t.industries.find(Q=>Q.id===R.target.value)||t.industries[0]),children:t.industries.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-500 mb-1",children:""}),S.jsx("select",{className:"w-full p-2 bg-white border border-slate-300 rounded-lg text-sm",value:ne==null?void 0:ne.id,onChange:R=>Ee(t.audiences.find(Q=>Q.id===R.target.value)||t.audiences[0]),children:t.audiences.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]})]}),S.jsx("input",{type:"text",className:"w-full p-2 text-xs bg-white border border-slate-200 rounded-lg placeholder-slate-400 focus:ring-2 focus:ring-slate-200 outline-none",placeholder:" ()...",value:me,onChange:R=>xe(R.target.value)})]}),S.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-xl border border-indigo-100",children:[S.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[S.jsx(GD,{className:"w-4 h-4 text-indigo-500"}),S.jsx("h3",{className:"text-xs font-bold uppercase text-indigo-600",children:""})]}),S.jsx("select",{className:"w-full p-2.5 bg-white border border-indigo-200 rounded-lg text-sm text-indigo-900",value:le==null?void 0:le.id,onChange:R=>Be(t.journeyStages.find(Q=>Q.id===R.target.value)||t.journeyStages[0]),children:t.journeyStages.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))}),S.jsx("p",{className:"text-[10px] text-indigo-500 mt-1 pl-1",children:le==null?void 0:le.desc})]}),S.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-xl border border-amber-100/80 space-y-3",children:[S.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[S.jsx(Ic,{className:"w-4 h-4 text-amber-500"}),S.jsx("h3",{className:"text-xs font-bold uppercase text-amber-600",children:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-amber-700/70 mb-1",children:""}),S.jsx("textarea",{className:"w-full p-2.5 text-xs border border-amber-200 rounded-lg bg-white h-16",value:P,onChange:R=>Y(R.target.value)})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-amber-700/70 mb-1",children:""}),S.jsx("input",{className:"w-full p-2.5 text-xs border border-amber-200 rounded-lg bg-white",placeholder:"e.g. ",value:W,onChange:R=>Ce(R.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-amber-700/70 mb-1",children:""}),S.jsx("input",{className:"w-full p-2.5 text-xs border border-amber-200 rounded-lg bg-white",placeholder:"e.g. ROI +300%",value:De,onChange:R=>L(R.target.value)})]})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm relative z-50",children:[S.jsxs("div",{className:"flex justify-between items-center mb-3",children:[S.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500",children:""}),S.jsxs("div",{className:"flex items-center space-x-3",children:[S.jsxs("label",{className:"flex items-center cursor-pointer group",children:[S.jsx("input",{type:"checkbox",className:"mr-1.5 accent-red-600",checked:Fn,onChange:R=>au(R.target.checked)}),S.jsx("span",{className:"text-[10px] text-slate-500",children:""})]}),S.jsxs("label",{className:"flex items-center cursor-pointer group",children:[S.jsx("input",{type:"checkbox",className:"mr-1.5 accent-red-600",checked:dr,onChange:R=>nl(R.target.checked)}),S.jsx("span",{className:"text-[10px] text-slate-500",children:""})]})]})]}),S.jsxs("div",{className:"flex flex-wrap gap-2 mb-3 min-h-[30px]",children:[Se.map(R=>{const Q=t.competitors.find(We=>We.id===R);return Q?S.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-red-50 text-red-700 border border-red-100",children:[Q.name,S.jsx(Bc,{className:"w-3 h-3 ml-1.5 cursor-pointer",onClick:We=>{We.stopPropagation(),ul(R)}})]},R):null}),et&&S.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-50 text-purple-700 border border-purple-100",children:[et,S.jsx(Bc,{className:"w-3 h-3 ml-1.5 cursor-pointer",onClick:()=>qe("")})]})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsxs("div",{className:"relative",ref:Rs,children:[S.jsx("button",{onClick:()=>ur(!On),className:"w-full flex items-center justify-between p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-xs text-slate-600 hover:bg-white",children:S.jsxs("span",{className:"flex items-center",children:[S.jsx(V0,{className:"w-3 h-3 mr-1"})," ..."]})}),On&&S.jsxs("div",{className:"absolute top-full left-0 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-60 overflow-y-auto z-50",children:[dl("VDR","VDR "),dl("General"," / "),dl("Vertical"," / ")]})]}),S.jsx("input",{type:"text",className:"w-full p-2.5 text-xs bg-slate-50 border border-slate-200 rounded-lg focus:bg-white focus:ring-2 outline-none",placeholder:"...",value:et,onChange:R=>qe(R.target.value)})]})]}),S.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-xl border border-blue-100 space-y-3",children:[S.jsxs("div",{className:"flex items-center justify-between mb-1",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx(MD,{className:"w-4 h-4 text-blue-500"}),S.jsx("h3",{className:"text-xs font-bold uppercase text-blue-600",children:"GEO "})]}),S.jsxs("label",{className:"flex items-center cursor-pointer",children:[S.jsx("input",{type:"checkbox",className:"mr-1.5 accent-blue-600",checked:Ro,onChange:R=>cn(R.target.checked)}),S.jsx("span",{className:"text-[10px] text-blue-600 font-medium",children:"Schema.org"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-blue-700/70 mb-1",children:""}),S.jsx("input",{className:"w-full p-2.5 text-xs border border-blue-200 rounded-lg bg-white",placeholder:"e.g. ?",value:Ds,onChange:R=>rl(R.target.value)})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-blue-700/70 mb-1",children:""}),S.jsx("input",{className:"w-full p-2.5 text-xs border border-blue-200 rounded-lg bg-white",value:Gr,onChange:R=>Mo(R.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-blue-700/70 mb-1",children:""}),S.jsx("select",{className:"w-full p-2.5 text-xs border border-blue-200 rounded-lg bg-white",value:bn==null?void 0:bn.id,onChange:R=>lu(t.geoStructures.find(Q=>Q.id===R.target.value)||t.geoStructures[0]),children:t.geoStructures.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]})]})]})]}),e==="visual"&&S.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[S.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[S.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[S.jsx(OD,{className:"w-4 h-4 text-slate-500"}),S.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500",children:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-400 mb-1",children:""}),S.jsx("select",{className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm",value:un==null?void 0:un.id,onChange:R=>il(t.brands.find(Q=>Q.id===R.target.value)||t.brands[0]),children:t.brands.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-400 mb-1",children:""}),S.jsx("select",{className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm",value:en==null?void 0:en.id,onChange:R=>js(t.marketingHooks.find(Q=>Q.id===R.target.value)||t.marketingHooks[0]),children:t.marketingHooks.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-400 mb-1",children:""}),S.jsx("select",{className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm",value:jt==null?void 0:jt.id,onChange:R=>sl(t.styles.find(Q=>Q.id===R.target.value)||t.styles[0]),children:t.styles.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-400 mb-1",children:""}),S.jsx("select",{className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm",value:dn==null?void 0:dn.id,onChange:R=>cu(t.tones.find(Q=>Q.id===R.target.value)||t.tones[0]),children:t.tones.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-slate-400 mb-1",children:""}),S.jsx("select",{className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm",value:tn==null?void 0:tn.id,onChange:R=>nn(t.headlineStrategies.find(Q=>Q.id===R.target.value)||t.headlineStrategies[0]),children:t.headlineStrategies.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]})]}),S.jsxs("div",{className:"bg-purple-50/50 p-4 rounded-xl border border-purple-100/80",children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx(Xg,{className:"w-4 h-4 text-purple-600"}),S.jsx("label",{className:"text-xs font-bold uppercase text-purple-800",children:""})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("span",{className:"text-[10px] text-purple-600 mr-2 font-medium",children:$t?"":""}),S.jsx("div",{onClick:()=>rn(!$t),className:`w-9 h-5 rounded-full p-1 cursor-pointer transition-colors ${$t?"bg-purple-500":"bg-slate-300"}`,children:S.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transform transition-transform ${$t?"translate-x-4":"translate-x-0"}`})})]})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"bg-white/70 p-3 rounded-lg border border-purple-100",children:[S.jsxs("label",{className:"block text-[10px] font-semibold text-purple-800 mb-2 flex items-center",children:[S.jsx(nf,{className:"w-3 h-3 mr-1"}),"  (Multi-Position)"]}),S.jsx("input",{className:"w-full p-2 text-xs border border-purple-200 rounded-lg bg-white mb-2",placeholder:"Hero Image URL...",value:Ls,onChange:R=>uu(R.target.value)}),S.jsx("input",{className:"w-full p-2 text-xs border border-purple-200 rounded-lg bg-white mb-2",placeholder:"Body Image URL...",value:Or,onChange:R=>zs(R.target.value)}),S.jsx("input",{className:"w-full p-2 text-xs border border-purple-200 rounded-lg bg-white",placeholder:"Footer Image URL...",value:hr,onChange:R=>du(R.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-purple-700/70 mb-1",children:""}),S.jsx("input",{className:"w-full p-2 text-xs border border-purple-200 rounded-lg bg-white",placeholder:"e.g. ",value:Nr,onChange:R=>jh(R.target.value)})]}),$t&&S.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 pt-2 border-t border-purple-200/50",children:[S.jsx("select",{className:"p-1.5 bg-white border border-purple-200 rounded text-[10px]",value:Nn==null?void 0:Nn.id,onChange:R=>pr(t.imageStyles.find(Q=>Q.id===R.target.value)||t.imageStyles[0]),children:t.imageStyles.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))}),S.jsx("select",{className:"p-1.5 bg-white border border-purple-200 rounded text-[10px]",value:Ke==null?void 0:Ke.id,onChange:R=>Pt(t.imageRatios.find(Q=>Q.id===R.target.value)||t.imageRatios[0]),children:t.imageRatios.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]})]})]}),S.jsxs("div",{className:"bg-red-50/50 p-4 rounded-xl border border-red-100/80 shadow-sm space-y-4",children:[S.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[S.jsx(YD,{className:"w-4 h-4 text-red-500"}),S.jsx("h3",{className:"text-xs font-bold uppercase text-red-600",children:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-red-700/70 mb-1",children:"CTA "}),S.jsx("select",{className:"w-full p-2.5 bg-white border border-red-200 rounded-lg text-sm",value:wt==null?void 0:wt.id,onChange:R=>Bo(t.ctaStrategies.find(Q=>Q.id===R.target.value)||t.ctaStrategies[0]),children:t.ctaStrategies.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-semibold text-red-700/70 mb-1",children:""}),S.jsx("input",{className:"w-full p-2.5 text-xs border border-red-200 rounded-lg bg-white",placeholder:"https://...",value:ji,onChange:R=>hu(R.target.value)})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[S.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500 mb-3",children:""}),S.jsxs("div",{className:"mb-4",children:[S.jsxs("label",{className:"block text-[10px] font-semibold text-slate-400 mb-2 flex items-center",children:[S.jsx(wj,{className:"w-3 h-3 mr-1"})," "]}),S.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.channels.map(R=>{const Q=xj[R.iconName]||go;return S.jsxs("div",{onClick:()=>Li(R),className:`cursor-pointer px-3 py-2 rounded-lg text-xs border flex flex-col ${(Ot==null?void 0:Ot.id)===R.id?"bg-red-50 border-red-300 text-red-800":"bg-slate-50 border-slate-200 text-slate-600"}`,children:[S.jsxs("div",{className:"flex items-center mb-1",children:[S.jsx(Q,{className:"w-3 h-3 mr-1.5"}),S.jsx("span",{className:"font-medium",children:R.name})]}),S.jsx("span",{className:"text-[9px] opacity-70 truncate",children:R.desc})]},R.id)})})]}),S.jsxs("div",{className:"mb-4",children:[S.jsxs("label",{className:"block text-[10px] font-semibold text-slate-400 mb-2 flex items-center",children:[S.jsx(lj,{className:"w-3 h-3 mr-1"})," "]}),S.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.distributionChannels.map(R=>S.jsx("div",{onClick:()=>Wr(Q=>Q.includes(R.id)?Q.filter(We=>We!==R.id):[...Q,R.id]),className:`cursor-pointer px-3 py-2 rounded-lg text-xs border ${Kr.includes(R.id)?"bg-purple-50 border-purple-300 text-purple-800":"bg-slate-50 border-slate-200 text-slate-600"}`,children:R.name},R.id))})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[S.jsx("button",{onClick:()=>{Jr("markdown"),ct(t.layoutStyles[0])},className:`py-2 text-xs font-medium rounded-lg border ${vn==="markdown"?"bg-slate-800 text-white":"bg-white text-slate-600"}`,children:"Markdown"}),S.jsx("button",{onClick:()=>{Jr("html"),ct(t.layoutStyles[1])},className:`py-2 text-xs font-medium rounded-lg border ${vn==="html"?"bg-blue-600 text-white":"bg-white text-slate-600"}`,children:"HTML "})]}),vn==="html"&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{className:"block text-[10px] font-semibold text-blue-600 mb-1",children:"CSS "}),S.jsx("select",{className:"w-full p-2 bg-blue-50 border border-blue-200 rounded-lg text-xs",value:Ht==null?void 0:Ht.id,onChange:R=>ct(t.layoutStyles.find(Q=>Q.id===R.target.value)||t.layoutStyles[0]),children:t.layoutStyles.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]}),S.jsxs("div",{className:"mb-3",children:[S.jsxs("label",{className:"block text-[10px] font-semibold text-orange-600 mb-1 flex items-center",children:[S.jsx(dD,{className:"w-3 h-3 mr-1"})," CMS "]}),S.jsx("select",{className:"w-full p-2 bg-orange-50 border border-orange-200 rounded-lg text-xs",value:Mn==null?void 0:Mn.id,onChange:R=>ll(t.cmsOptions.find(Q=>Q.id===R.target.value)||t.cmsOptions[0]),children:t.cmsOptions.map(R=>S.jsx("option",{value:R.id,children:R.name},R.id))})]})]})]})]})]})]}),S.jsx("div",{className:"w-full md:w-7/12 bg-slate-100 flex flex-col h-full border-l border-slate-200",children:S.jsxs("div",{className:"p-6 md:p-8 flex-1 overflow-hidden flex flex-col",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("div",{children:[S.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center",children:[S.jsx(go,{className:"w-5 h-5 mr-2 text-red-600"}),"Prompt "]}),S.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ready for GPT-4o / Claude 3.5 Sonnet"})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsxs("button",{onClick:wn,disabled:u||h||!o,className:`flex items-center px-4 py-2.5 rounded-xl text-sm font-bold transition-all shadow-md transform active:scale-95 ${h?"bg-green-600 text-white":"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50"}`,children:[u?S.jsx("span",{className:"animate-spin mr-2",children:""}):h?S.jsx(l1,{className:"w-4 h-4 mr-2"}):S.jsx(Qg,{className:"w-4 h-4 mr-2"}),h?"":""]}),S.jsxs("button",{onClick:mr,className:`flex items-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-md transform active:scale-95 ${r?"bg-green-600 text-white":"bg-gradient-to-r from-red-600 to-red-700 text-white hover:shadow-lg"}`,children:[r?S.jsx(l1,{className:"w-4 h-4 mr-2"}):S.jsx(Yk,{className:"w-4 h-4 mr-2"})," ",r?"":" Prompt"]})]})]}),S.jsxs("div",{className:"flex-1 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden relative group",children:[S.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-purple-500 to-blue-500"}),S.jsx("div",{className:"h-full overflow-auto p-6 scrollbar-thin scrollbar-thumb-slate-200",children:S.jsx("pre",{className:"font-mono text-sm leading-relaxed text-slate-600 whitespace-pre-wrap break-words",children:o})})]})]})}),v&&S.jsx("div",{className:"fixed inset-0 bg-black/50 z-[101] flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm p-6 animate-in zoom-in-95",children:[S.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:""}),S.jsx("input",{className:"w-full border p-2 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"e.g. B2B LinkedIn ",value:x,onChange:R=>k(R.target.value),autoFocus:!0})]}),S.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[S.jsx("button",{onClick:()=>w(!1),className:"px-3 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:""}),S.jsx("button",{onClick:Uo,className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:""})]})]})]})})]})},u1=[{key:"roles",label:" (Roles)"},{key:"industries",label:" (Industries)"},{key:"products",label:" (Products)"},{key:"audiences",label:" (Audiences)"},{key:"styles",label:" (Styles)"},{key:"tones",label:" (Tones)"},{key:"brands",label:" (Brands)"},{key:"channels",label:" (Core)"},{key:"distributionChannels",label:" (Dist)"},{key:"competitors",label:""},{key:"journeyStages",label:""},{key:"ctaStrategies",label:"CTA "}],kj=()=>{var I;const{data:t,addItem:e,updateItem:n,deleteItem:r,resetData:i}=Wk(),[o,l]=O.useState("roles"),[u,d]=O.useState(null),[h,p]=O.useState(null),[m,y]=O.useState(!1),[v,w]=O.useState({id:"",name:"",desc:""}),x=t[o],k=N=>{d(N.id),p({...N})},T=()=>{u&&h&&(n(o,u,h),d(null),p(null))},_=N=>{window.confirm("")&&r(o,N)},A=()=>{if(!v.id||!v.name)return alert("ID and Name are required");e(o,v),y(!1),w({id:"",name:"",desc:""})},j=(N,z)=>o==="industries"?S.jsxs("div",{className:"mt-2",children:[S.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Pain Points"}),z?S.jsx("textarea",{className:"w-full text-xs p-2 border rounded",value:N.painPoints||"",onChange:U=>z&&p({...N,painPoints:U.target.value})}):S.jsx("p",{className:"text-xs text-slate-600 truncate",children:N.painPoints})]}):o==="products"?S.jsxs("div",{className:"mt-2",children:[S.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Features"}),z?S.jsx("input",{className:"w-full text-xs p-2 border rounded",value:N.features||"",onChange:U=>z&&p({...N,features:U.target.value})}):S.jsx("p",{className:"text-xs text-slate-600 truncate",children:N.features})]}):null;return S.jsxs("div",{className:"flex h-full bg-slate-50",children:[S.jsxs("div",{className:"w-48 md:w-64 bg-white border-r border-slate-200 overflow-y-auto",children:[S.jsx("div",{className:"p-4 border-b border-slate-100",children:S.jsx("h2",{className:"text-sm font-bold text-slate-800 uppercase tracking-wider",children:""})}),S.jsx("ul",{children:u1.map(N=>S.jsx("li",{children:S.jsx("button",{onClick:()=>l(N.key),className:`w-full text-left px-4 py-3 text-xs font-medium border-l-4 transition-all ${o===N.key?"border-blue-500 bg-blue-50 text-blue-700":"border-transparent text-slate-600 hover:bg-slate-50"}`,children:N.label})},N.key))}),S.jsx("div",{className:"p-4 mt-8 border-t border-slate-100",children:S.jsxs("button",{onClick:()=>{window.confirm("Reset all data to defaults?")&&i()},className:"flex items-center text-xs text-slate-400 hover:text-red-500 transition-colors",children:[S.jsx(Qk,{className:"w-3 h-3 mr-1"})," "]})})]}),S.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[S.jsxs("div",{className:"p-5 bg-white border-b border-slate-200 flex justify-between items-center shadow-sm z-10",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-lg font-bold text-slate-800",children:(I=u1.find(N=>N.key===o))==null?void 0:I.label}),S.jsx("p",{className:"text-xs text-slate-500",children:"Manage entries for prompt generation"})]}),S.jsxs("button",{onClick:()=>y(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-xs font-bold flex items-center transition-colors shadow-sm",children:[S.jsx(V0,{className:"w-4 h-4 mr-2"})," "]})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-5 scrollbar-thin",children:S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(N=>{const z=u===N.id,U=z?h:N;return S.jsxs("div",{className:`bg-white p-4 rounded-xl border shadow-sm transition-all ${z?"ring-2 ring-blue-400 border-blue-400":"border-slate-200 hover:shadow-md"}`,children:[S.jsxs("div",{className:"flex justify-between items-start mb-2",children:[z?S.jsx("input",{className:"text-sm font-bold border-b border-blue-300 w-full pb-1 mb-1 outline-none text-slate-800",value:U.name,onChange:Z=>p({...U,name:Z.target.value})}):S.jsx("h3",{className:"text-sm font-bold text-slate-800",children:N.name}),S.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded font-mono ml-2 shrink-0",children:N.id})]}),z?S.jsx("textarea",{className:"w-full text-xs text-slate-600 border rounded p-2 h-16 mb-2 bg-slate-50",value:U.desc||"",onChange:Z=>p({...U,desc:Z.target.value})}):S.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 h-8",children:N.desc}),j(U,z),S.jsx("div",{className:"flex justify-end mt-4 pt-3 border-t border-slate-100 space-x-2",children:z?S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:()=>d(null),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded",children:S.jsx(Bc,{className:"w-4 h-4"})}),S.jsx("button",{onClick:T,className:"p-1.5 text-green-600 hover:bg-green-50 rounded",children:S.jsx(Qg,{className:"w-4 h-4"})})]}):S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:()=>_(N.id),className:"p-1.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded transition-colors",children:S.jsx(ph,{className:"w-4 h-4"})}),S.jsx("button",{onClick:()=>k(N),className:"p-1.5 text-slate-300 hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",children:S.jsx(tj,{className:"w-4 h-4"})})]})})]},N.id)})})})]}),m&&S.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[S.jsxs("h2",{className:"text-lg font-bold mb-4",children:["Add New ",o]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"ID (Unique key)"}),S.jsx("input",{className:"w-full border p-2 rounded text-sm",value:v.id,onChange:N=>w({...v,id:N.target.value}),placeholder:"e.g., tech_startups"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Name"}),S.jsx("input",{className:"w-full border p-2 rounded text-sm",value:v.name,onChange:N=>w({...v,name:N.target.value}),placeholder:"Display Name"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Description"}),S.jsx("textarea",{className:"w-full border p-2 rounded text-sm h-20",value:v.desc,onChange:N=>w({...v,desc:N.target.value})})]}),o==="industries"&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Pain Points"}),S.jsx("textarea",{className:"w-full border p-2 rounded text-sm",onChange:N=>w({...v,painPoints:N.target.value})})]})]}),S.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[S.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),S.jsx("button",{onClick:A,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Item"})]})]})})]})},jd={async getMaterials(t){let e=zt.from("materials").select("*").order("created_at",{ascending:!1});t&&(e=e.eq("type",t));const{data:n,error:r}=await e;if(r)throw console.error("Error fetching materials:",r),r;return n},async uploadFile(t,e){try{const n=t.name.split(".").pop(),r=`${Date.now()}_${Math.random().toString(36).substring(7)}.${n}`,i=`${e}s/${r}`,{error:o}=await zt.storage.from("materials").upload(i,t);if(o)throw o;const{data:{publicUrl:l}}=zt.storage.from("materials").getPublicUrl(i),{data:u,error:d}=await zt.from("materials").insert({type:e,name:t.name,url:l,meta:{size:t.size,mimeType:t.type,path:i}}).select().single();if(d)throw d;return u}catch(n){throw console.error("Error uploading file:",n),n}},async addLink(t,e){try{const{data:n,error:r}=await zt.from("materials").insert({type:"link",name:t,url:e,meta:{}}).select().single();if(r)throw r;return n}catch(n){throw console.error("Error adding link:",n),n}},async deleteMaterial(t,e,n){try{const{error:r}=await zt.from("materials").delete().eq("id",t);if(r)throw r;if(e!=="link"&&(n!=null&&n.path)){const{error:i}=await zt.storage.from("materials").remove([n.path]);i&&console.error("Error deleting file from storage:",i)}}catch(r){throw console.error("Error deleting material:",r),r}}},d1=({isOpen:t,onClose:e,title:n,children:r})=>t?S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:S.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200",children:[S.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100",children:[S.jsx("h3",{className:"font-semibold text-lg text-slate-900",children:n}),S.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors",children:S.jsx(Bc,{className:"w-5 h-5"})})]}),S.jsx("div",{className:"p-6",children:r})]})}):null,Ej=()=>{const[t,e]=O.useState("image"),[n,r]=O.useState([]),[i,o]=O.useState(!1),[l,u]=O.useState(0),[d,h]=O.useState(!1),[p,m]=O.useState(!1),[y,v]=O.useState(!1),[w,x]=O.useState({name:"",url:""}),[k,T]=O.useState(null);O.useEffect(()=>{(async()=>{o(!0);try{const z=await jd.getMaterials(t);r(z)}catch(z){console.error("Failed to fetch materials",z)}finally{o(!1)}})()},[t,l]);const _=async N=>{if(!N.target.files||N.target.files.length===0)return;const z=N.target.files[0];if(t==="image"&&!z.type.startsWith("image/")){alert("");return}t==="document"&&z.type.startsWith("image/"),v(!0);try{await jd.uploadFile(z,t),h(!1),u(U=>U+1)}catch(U){console.error("Upload failed",U),alert("")}finally{v(!1)}},A=async N=>{if(N.preventDefault(),!(!w.name||!w.url)){v(!0);try{await jd.addLink(w.name,w.url),m(!1),x({name:"",url:""}),u(z=>z+1)}catch(z){console.error("Add link failed",z),alert("")}finally{v(!1)}}},j=async(N,z,U,Z)=>{if(window.confirm(""))try{await jd.deleteMaterial(N,U,Z),r(ne=>ne.filter(Ee=>Ee.id!==N))}catch(ne){console.error("Delete failed",ne),alert("")}},I=()=>{t==="link"?m(!0):h(!0)};return S.jsxs("div",{className:"h-full flex flex-col bg-slate-50 relative",children:[S.jsxs("div",{className:"bg-white border-b border-slate-200 px-8 py-5 flex items-center justify-between shrink-0",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:" (Assets)"}),S.jsx("p",{className:"text-slate-500 text-sm mt-1",children:""})]}),S.jsxs("button",{onClick:I,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors shadow-sm font-medium",children:[S.jsx(V0,{className:"w-4 h-4 mr-2"}),S.jsx("span",{children:t==="image"?"":t==="document"?"":""})]})]}),S.jsx("div",{className:"px-8 pt-6 pb-0 shrink-0 bg-white border-b border-slate-200",children:S.jsxs("div",{className:"flex space-x-8",children:[S.jsxs("button",{onClick:()=>e("image"),className:`pb-4 px-1 flex items-center font-medium text-sm transition-colors border-b-2 ${t==="image"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[S.jsx(Xg,{className:"w-4 h-4 mr-2"}),""]}),S.jsxs("button",{onClick:()=>e("document"),className:`pb-4 px-1 flex items-center font-medium text-sm transition-colors border-b-2 ${t==="document"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[S.jsx(go,{className:"w-4 h-4 mr-2"}),""]}),S.jsxs("button",{onClick:()=>e("link"),className:`pb-4 px-1 flex items-center font-medium text-sm transition-colors border-b-2 ${t==="link"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[S.jsx(nf,{className:"w-4 h-4 mr-2"}),""]})]})}),S.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:i?S.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[S.jsx(rg,{className:"w-8 h-8 text-indigo-600 animate-spin mb-3"}),S.jsx("p",{className:"text-slate-400",children:"..."})]}):n.length===0?S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 border-2 border-dashed border-slate-200 rounded-xl bg-white/50",children:[S.jsxs("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:[t==="image"&&S.jsx(Xg,{className:"w-8 h-8 text-slate-400"}),t==="document"&&S.jsx(go,{className:"w-8 h-8 text-slate-400"}),t==="link"&&S.jsx(nf,{className:"w-8 h-8 text-slate-400"})]}),S.jsx("h3",{className:"text-lg font-medium text-slate-900",children:""}),S.jsx("p",{className:"text-slate-500 mt-1 mb-4",children:t==="image"?"":t==="document"?"":""}),S.jsx("button",{onClick:I,className:"text-indigo-600 font-medium hover:text-indigo-700 hover:underline",children:""})]}):S.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:n.map(N=>{var z;return S.jsxs("div",{className:"group relative bg-white rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden flex flex-col",children:[S.jsxs("div",{className:"aspect-square bg-slate-100 relative overflow-hidden cursor-pointer",onClick:()=>N.type==="image"?T(N):window.open(N.url,"_blank"),children:[N.type==="image"?S.jsx("img",{src:N.url,alt:N.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):N.type==="document"?S.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 text-center",children:[S.jsx(go,{className:"w-12 h-12 text-blue-500 mb-2"}),S.jsx("span",{className:"text-xs text-slate-400 uppercase font-medium",children:N.name.split(".").pop()||"FILE"})]}):S.jsx("div",{className:"w-full h-full flex items-center justify-center bg-indigo-50/50",children:S.jsx(nf,{className:"w-10 h-10 text-indigo-400"})}),S.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[N.type==="image"&&S.jsx("button",{onClick:U=>{U.stopPropagation(),T(N)},className:"p-2 bg-white/90 rounded-full text-slate-700 hover:text-indigo-600 hover:bg-white transition-colors",title:"",children:S.jsx(c1,{className:"w-4 h-4"})}),S.jsx("button",{onClick:U=>{U.stopPropagation(),window.open(N.url,"_blank")},className:"p-2 bg-white/90 rounded-full text-slate-700 hover:text-indigo-600 hover:bg-white transition-colors",title:N.type==="link"?"":"/",children:N.type==="link"?S.jsx(c1,{className:"w-4 h-4"}):S.jsx(TD,{className:"w-4 h-4"})}),S.jsx("button",{onClick:U=>{U.stopPropagation(),j(N.id,N.url,N.type,N.meta)},className:"p-2 bg-white/90 rounded-full text-slate-700 hover:text-red-600 hover:bg-white transition-colors",title:"",children:S.jsx(ph,{className:"w-4 h-4"})})]})]}),S.jsxs("div",{className:"p-3",children:[S.jsx("h4",{className:"font-medium text-slate-800 text-sm truncate",title:N.name,children:N.name}),S.jsxs("div",{className:"flex items-center justify-between mt-1",children:[S.jsx("span",{className:"text-xs text-slate-400",children:new Date(N.created_at).toLocaleDateString()}),((z=N.meta)==null?void 0:z.size)&&S.jsxs("span",{className:"text-xs text-slate-400",children:[(N.meta.size/1024/1024).toFixed(1)," MB"]})]})]})]},N.id)})})}),S.jsx(d1,{isOpen:d,onClose:()=>!y&&h(!1),title:t==="image"?"":"",children:S.jsx("div",{className:"text-center",children:S.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 hover:bg-slate-50 transition-colors cursor-pointer relative",children:[S.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:_,disabled:y,accept:t==="image"?"image/*":"*"}),S.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-3",children:y?S.jsx(rg,{className:"w-6 h-6 animate-spin"}):S.jsx(pj,{className:"w-6 h-6"})}),S.jsx("p",{className:"text-slate-900 font-medium",children:y?"...":""}),S.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:[" ",t==="image"?"JPG, PNG, GIF, WEBP":"PDF, DOCX, PPTX "]})]})})}),S.jsx(d1,{isOpen:p,onClose:()=>!y&&m(!1),title:"",children:S.jsxs("form",{onSubmit:A,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),S.jsx("input",{type:"text",required:!0,value:w.name,onChange:N=>x({...w,name:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"URL "}),S.jsx("input",{type:"url",required:!0,value:w.url,onChange:N=>x({...w,url:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"https://example.com"})]}),S.jsx("div",{className:"pt-2",children:S.jsx("button",{type:"submit",disabled:y,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 rounded-lg transition-colors flex items-center justify-center",children:y?S.jsx(rg,{className:"w-5 h-5 animate-spin"}):""})})]})}),k&&S.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4",onClick:()=>T(null),children:[S.jsx("button",{className:"absolute top-4 right-4 text-white/70 hover:text-white p-2",onClick:()=>T(null),children:S.jsx(Bc,{className:"w-8 h-8"})}),S.jsx("img",{src:k.url,alt:k.name,className:"max-w-full max-h-screen object-contain rounded shadow-2xl"}),S.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center pointer-events-none",children:S.jsx("span",{className:"inline-block bg-black/50 text-white px-4 py-2 rounded-full text-sm backdrop-blur-md",children:k.name})})]})]})},Tj=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0),[i,o]=O.useState(null),[l,u]=O.useState(null),[d,h]=O.useState(!1);O.useEffect(()=>{p()},[]);const p=async()=>{r(!0);try{const{data:w,error:x}=await zt.from("generated_prompts").select("*").order("created_at",{ascending:!1});if(x)throw x;e(w||[])}catch(w){console.error("Failed to fetch history:",w),o(w.message)}finally{r(!1)}},m=async(w,x)=>{if(x.stopPropagation(),!!window.confirm("Delete this record?"))try{const{error:k}=await zt.from("generated_prompts").delete().eq("id",w);if(k)throw k;e(T=>T.filter(_=>_.id!==w)),(l==null?void 0:l.id)===w&&u(null)}catch(k){alert("Delete failed: "+k.message)}},y=w=>{navigator.clipboard.writeText(w),h(!0),setTimeout(()=>h(!1),2e3)},v=w=>new Date(w).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return S.jsxs("div",{className:"h-full bg-slate-50 flex overflow-hidden",children:[S.jsxs("div",{className:`w-full md:w-1/3 bg-white border-r border-slate-200 flex flex-col ${l?"hidden md:flex":"flex"}`,children:[S.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center",children:[S.jsx("h1",{className:"text-lg font-bold text-slate-800",children:" (History)"}),S.jsx("button",{onClick:p,className:"text-xs text-blue-600 hover:bg-blue-50 px-2 py-1 rounded",children:""})]}),n&&S.jsx("div",{className:"p-10 text-center text-slate-400",children:"Loading..."}),S.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:[t.length===0&&!n&&S.jsx("div",{className:"p-10 text-center text-slate-400 text-sm",children:""}),t.map(w=>{var x,k;return S.jsxs("div",{onClick:()=>u(w),className:`p-4 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors ${(l==null?void 0:l.id)===w.id?"bg-red-50/50 border-l-4 border-l-red-600":"border-l-4 border-l-transparent"}`,children:[S.jsxs("div",{className:"flex justify-between items-start mb-1",children:[S.jsx("span",{className:"text-xs font-bold text-slate-700 line-clamp-1",children:w.prompt_content.split(`
`)[0].replace("# Role","").trim()||"Untitled Prompt"}),S.jsxs("span",{className:"text-[10px] text-slate-400 flex items-center shrink-0 ml-2",children:[S.jsx(hD,{className:"w-3 h-3 mr-1"})," ",v(w.created_at)]})]}),S.jsx("p",{className:"text-[10px] text-slate-500 line-clamp-2 mb-2 h-8",children:w.prompt_content}),S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{className:"flex gap-1",children:[((x=w.settings)==null?void 0:x.role)&&S.jsx("span",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-[9px] text-slate-500",children:w.settings.role}),((k=w.settings)==null?void 0:k.format)&&S.jsx("span",{className:"px-1.5 py-0.5 bg-blue-50 text-blue-600 rounded text-[9px]",children:w.settings.format})]}),S.jsx("button",{onClick:T=>m(w.id,T),className:"p-1 text-slate-300 hover:text-red-500 rounded",children:S.jsx(ph,{className:"w-3.5 h-3.5"})})]})]},w.id)})]})]}),S.jsx("div",{className:`flex-1 flex flex-col h-full bg-slate-100 ${l?"flex fixed inset-0 z-50 md:static":"hidden md:flex"}`,children:l?S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"bg-white p-4 border-b border-slate-200 flex justify-between items-center shadow-sm",children:[S.jsx("button",{onClick:()=>u(null),className:"md:hidden text-slate-500 mr-2",children:S.jsx(yD,{className:"w-5 h-5 rotate-180"})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h2",{className:"text-sm font-bold text-slate-800",children:"Prompt"}),S.jsxs("p",{className:"text-xs text-slate-500",children:["Created: ",v(l.created_at)]})]}),S.jsxs("button",{onClick:()=>y(l.prompt_content),className:`flex items-center px-4 py-2 rounded-lg text-xs font-bold transition-all ${d?"bg-green-600 text-white":"bg-red-600 text-white hover:bg-red-700"}`,children:[d?S.jsx(mD,{className:"w-3 h-3 mr-1.5"}):S.jsx(Yk,{className:"w-3 h-3 mr-1.5"}),d?"":""]})]}),S.jsx("div",{className:"flex-1 p-6 overflow-hidden",children:S.jsxs("div",{className:"h-full bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden relative",children:[S.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-purple-500 to-blue-500"}),S.jsx("div",{className:"h-full overflow-auto p-6 scrollbar-thin",children:S.jsx("pre",{className:"font-mono text-sm leading-relaxed text-slate-600 whitespace-pre-wrap break-words",children:l.prompt_content})})]})})]}):S.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400",children:[S.jsx(go,{className:"w-12 h-12 mb-4 opacity-50"}),S.jsx("p",{className:"text-sm",children:"Select a prompt to view details"})]})})]})};var ig={exports:{}},sg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1;function Cj(){if(f1)return sg;f1=1;var t=Xc();function e(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function u(m,y){var v=y(),w=r({inst:{value:v,getSnapshot:y}}),x=w[0].inst,k=w[1];return o(function(){x.value=v,x.getSnapshot=y,d(x)&&k({inst:x})},[m,v,y]),i(function(){return d(x)&&k({inst:x}),m(function(){d(x)&&k({inst:x})})},[m]),l(v),v}function d(m){var y=m.getSnapshot;m=m.value;try{var v=y();return!n(m,v)}catch{return!0}}function h(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return sg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,sg}var h1;function eE(){return h1||(h1=1,ig.exports=Cj()),ig.exports}var tE=eE();function Yt(t){this.content=t}Yt.prototype={constructor:Yt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Yt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Yt(n)},addToStart:function(t,e){return new Yt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Yt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Yt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Yt.from(t),t.size?new Yt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Yt.from(t),t.size?new Yt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Yt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Yt.from=function(t){if(t instanceof Yt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Yt(e)};function nE(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)n++;return n}if(i.content.size||o.content.size){let l=nE(i.content,o.content,n+1);if(l!=null)return l}n+=i.nodeSize}}function rE(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let l=t.child(--i),u=e.child(--o),d=l.nodeSize;if(l==u){n-=d,r-=d;continue}if(!l.sameMarkup(u))return{a:n,b:r};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,n--,r--;return{a:n,b:r}}if(l.content.size||u.content.size){let h=rE(l.content,u.content,n-1,r-1);if(h)return h}n-=d,r-=d}}class X{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let l=0,u=0;u<n;l++){let d=this.content[l],h=u+d.nodeSize;if(h>e&&r(d,i+u,o||null,l)!==!1&&d.content.size){let p=u+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,n-p),r,i+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",l=!0;return this.nodesBetween(e,n,(u,d)=>{let h=u.isText?u.text.slice(Math.max(e,d)-d,n-d):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new X(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;d>e&&((l<e||d>n)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,n-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,n-l-1))),r.push(u),i+=u.nodeSize),l=d}return new X(r,i)}cutByIndex(e,n){return e==n?X.empty:e==0&&n==this.content.length?this:new X(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new X(i,o)}addToStart(e){return new X([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new X(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return nE(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return rE(this,e,n,r)}findIndex(e){if(e==0)return Ld(0,e);if(e==this.size)return Ld(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?Ld(n+1,o):Ld(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return X.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new X(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return X.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new X(n||e,r)}static from(e){if(!e)return X.empty;if(e instanceof X)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new X([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}X.empty=new X([],0);const og={index:0,offset:0};function Ld(t,e){return og.index=t,og.offset=e,og}function pf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!pf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!pf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ze=class Zg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&pf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Zg.none;if(e instanceof Zg)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Ze.none=[];class mf extends Error{}class ie{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=sE(this.content,e+this.openStart,n);return r&&new ie(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ie(iE(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ie.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ie(X.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new ie(e,r,i)}}ie.empty=new ie(X.empty,0,0);function iE(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:l,offset:u}=t.findIndex(n);if(i==e||o.isText){if(u!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(iE(o.content,e-i-1,n-i-1)))}function sE(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),l=t.maybeChild(i);if(o==e||l.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let u=sE(l.content,e-o-1,n,l);return u&&t.replaceChild(i,l.copy(u))}function _j(t,e,n){if(n.openStart>t.depth)throw new mf("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new mf("Inconsistent open depths");return oE(t,e,n,0)}function oE(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let l=oE(t,e,n,r+1);return o.copy(o.content.replaceChild(i,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,u=l.content;return bo(l,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=Aj(n,t);return bo(o,lE(t,l,u,e,r))}else return bo(o,gf(t,e,r))}function aE(t,e){if(!e.type.compatibleContent(t.type))throw new mf("Cannot join "+e.type.name+" onto "+t.type.name)}function e0(t,e,n){let r=t.node(n);return aE(r,e.node(n)),r}function yo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function vc(t,e,n,r){let i=(e||t).node(n),o=0,l=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(yo(t.nodeAfter,r),o++));for(let u=o;u<l;u++)yo(i.child(u),r);e&&e.depth==n&&e.textOffset&&yo(e.nodeBefore,r)}function bo(t,e){return t.type.checkContent(e),t.copy(e)}function lE(t,e,n,r,i){let o=t.depth>i&&e0(t,e,i+1),l=r.depth>i&&e0(n,r,i+1),u=[];return vc(null,t,i,u),o&&l&&e.index(i)==n.index(i)?(aE(o,l),yo(bo(o,lE(t,e,n,r,i+1)),u)):(o&&yo(bo(o,gf(t,e,i+1)),u),vc(e,n,i,u),l&&yo(bo(l,gf(n,r,i+1)),u)),vc(r,null,i,u),new X(u)}function gf(t,e,n){let r=[];if(vc(null,t,n,r),t.depth>n){let i=e0(t,e,n+1);yo(bo(i,gf(t,e,n+1)),r)}return vc(e,null,n,r),new X(r)}function Aj(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(X.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Uc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ze.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let u=r;r=i,i=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new yf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let l=e;;){let{index:u,offset:d}=l.content.findIndex(o),h=o-d;if(r.push(l,u,i+d),!h||(l=l.child(u),l.isText))break;o=h-1,i+=d+1}return new Uc(n,r,o)}static resolveCached(e,n){let r=p1.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==n)return l}else p1.set(e,r=new Oj);let i=r.elts[r.i]=Uc.resolve(e,n);return r.i=(r.i+1)%Nj,i}}class Oj{constructor(){this.elts=[],this.i=0}}const Nj=12,p1=new WeakMap;class yf{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Mj=Object.create(null);let ws=class t0{constructor(e,n,r,i=Ze.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||X.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&pf(this.attrs,n||e.defaultAttrs||Mj)&&Ze.sameSet(this.marks,r||Ze.none)}copy(e=null){return e==this.content?this:new t0(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new t0(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ie.empty;let i=this.resolve(e),o=this.resolve(n),l=r?0:i.sharedDepth(n),u=i.start(l),h=i.node(l).content.cut(i.pos-u,o.pos-u);return new ie(h,i.depth-l,o.depth-l)}replace(e,n,r){return _j(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Uc.resolveCached(this,e)}resolveNoCache(e){return Uc.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),cE(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=X.empty,i=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,o),u=l&&l.matchFragment(this.content,n);if(!u||!u.validEnd)return!1;for(let d=i;d<o;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ze.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ze.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=X.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};ws.prototype.text=void 0;class bf extends ws{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cE(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new bf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new bf(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function cE(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class So{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Rj(e,n);if(r.next==null)return So.empty;let i=uE(r);r.next&&r.err("Unexpected trailing text");let o=Uj(Bj(i));return $j(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(l,u){let d=l.matchFragment(e,r);if(d&&(!n||d.validEnd))return X.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:m}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let y=o(m,u.concat(p));if(y)return y}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let l=[];for(let u=i;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:d}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!i.type||d.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),n[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}So.empty=new So(!0);class Rj{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function uE(t){let e=[];do e.push(Dj(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Dj(t){let e=[];do e.push(jj(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function jj(t){let e=Ij(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Lj(t,e);else break;return e}function m1(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Lj(t,e){let n=m1(t),r=n;return t.eat(",")&&(t.next!="}"?r=m1(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function zj(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let l=n[o];l.isInGroup(e)&&i.push(l)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Ij(t){if(t.eat("(")){let e=uE(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=zj(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Bj(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(l,u,d){let h={term:d,to:u};return e[l].push(h),h}function i(l,u){l.forEach(d=>d.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((d,h)=>d.concat(o(h,u)),[]);if(l.type=="seq")for(let d=0;;d++){let h=o(l.exprs[d],u);if(d==l.exprs.length-1)return h;i(h,u=n())}else if(l.type=="star"){let d=n();return r(u,d),i(o(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=n();return i(o(l.expr,u),d),i(o(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let d=u;for(let h=0;h<l.min;h++){let p=n();i(o(l.expr,d),p),d=p}if(l.max==-1)i(o(l.expr,d),d);else for(let h=l.min;h<l.max;h++){let p=n();r(d,p),i(o(l.expr,d),p),d=p}return[r(d)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function dE(t,e){return e-t}function g1(t,e){let n=[];return r(e),n.sort(dE);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let l=0;l<o.length;l++){let{term:u,to:d}=o[l];!u&&n.indexOf(d)==-1&&r(d)}}}function Uj(t){let e=Object.create(null);return n(g1(t,0));function n(r){let i=[];r.forEach(l=>{t[l].forEach(({term:u,to:d})=>{if(!u)return;let h;for(let p=0;p<i.length;p++)i[p][0]==u&&(h=i[p][1]);g1(t,d).forEach(p=>{h||i.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new So(r.indexOf(t.length-1)>-1);for(let l=0;l<i.length;l++){let u=i[l][1].sort(dE);o.next.push({type:i[l][0],next:e[u.join(",")]||n(u)})}return o}}function $j(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,l=[];for(let u=0;u<i.next.length;u++){let{type:d,next:h}=i.next[u];l.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function fE(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function hE(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function pE(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function mE(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Hj(t,r,e[r]);return n}let y1=class gE{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=mE(e,r.attrs),this.defaultAttrs=fE(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==So.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:hE(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ws(this,this.computeAttrs(e),X.from(n),Ze.setFrom(r))}createChecked(e=null,n,r){return n=X.from(n),this.checkContent(n),new ws(this,this.computeAttrs(e),n,Ze.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=X.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(X.empty,!0);return o?new ws(this,e,n.append(o),Ze.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){pE(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ze.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,l)=>r[o]=new gE(o,n,l));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Pj(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class Hj{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Pj(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class mh{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=mE(e,i.attrs),this.excluded=null;let o=fE(this.attrs);this.instance=o?new Ze(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Ze(this,hE(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,l)=>r[o]=new mh(o,i++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){pE(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class yE{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Yt.from(e.nodes),n.marks=Yt.from(e.marks||{}),this.nodes=y1.compile(this.spec.nodes,this),this.marks=mh.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=So.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?b1(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:b1(this,l.split(" "))}this.nodeFromJSON=i=>ws.fromJSON(this,i),this.markFromJSON=i=>Ze.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof y1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new bf(r,r.defaultAttrs,e,Ze.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function b1(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],l=o;if(o)n.push(o);else for(let u in t.marks){let d=t.marks[u];(i=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(i)>-1)&&n.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function qj(t){return t.tag!=null}function Vj(t){return t.style!=null}class xs{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(qj(i))this.tags.push(i);else if(Vj(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new w1(this,n,!1);return r.addAll(e,Ze.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new w1(this,n,!0);return r.addAll(e,Ze.none,n.from,n.to),ie.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(Kj(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=n))){if(l.getAttrs){let d=l.getAttrs(n);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<n.length;l++){let u=n[l];if((u.priority==null?50:u.priority)<o)break}n.splice(l,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=x1(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=x1(l)),l.node||l.ignore||l.mark||(l.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new xs(e,xs.schemaRules(e)))}}const bE={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Fj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},vE={ol:!0,ul:!0},$c=1,n0=2,wc=4;function v1(t,e,n){return e!=null?(e?$c:0)|(e==="full"?n0:0):t&&t.whitespace=="pre"?$c|n0:n&~wc}class zd{constructor(e,n,r,i,o,l){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=Ze.none,this.match=o||(l&wc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(X.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&$c)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=X.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(X.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!bE.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class w1{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,l=v1(null,n.preserveWhitespace,0)|(r?wc:0);i?o=new zd(i.type,i.attrs,Ze.none,!0,n.topMatch||i.type.contentMatch,l):r?o=new zd(null,null,Ze.none,!0,null,l):o=new zd(e.schema.topNodeType,null,Ze.none,!0,null,l),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&n0?"full":this.localPreserveWS||(i.options&$c)>0,{schema:l}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),n,!0),u[d]&&this.insertNode(l.text(u[d]),n,!/\S/.test(u[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=i.content[i.content.length-1],d=e.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;vE.hasOwnProperty(l)&&this.parser.normalizeLists&&Gj(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(d?d.ignore:Fj.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,p=this.needsBlock;if(bE.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=d&&d.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(e,n);h&&this.addElementByRule(e,d,h,d.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let d=this.parser.matchStyle(o,l,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?n=n.filter(h=>!d.clearMark(h)):n=n.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return n}addElementByRule(e,n,r,i){let o,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,n.attrs||null,r,n.preserveWhitespace);d&&(o=!0,r=d)}else{let d=this.parser.schema.marks[n.mark];r=r.concat(d.create(n.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof n.contentElement=="string"?d=e.querySelector(n.contentElement):typeof n.contentElement=="function"?d=n.contentElement(e):n.contentElement&&(d=n.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}o&&this.sync(u)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let l=this.open,u=0;l>=0;l--){let d=this.nodes[l],h=d.findWrapping(e);if(h&&(!i||i.length>h.length+u)&&(i=h,o=d,!h.length))break;if(d.solid){if(r)break;u+=2}}if(!i)return null;this.sync(o);for(let l=0;l<i.length;l++)n=this.enterInner(i[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=Ze.none;for(let u of i.concat(e.marks))(o.type?o.type.allowsMarkType(u.type):S1(u.type,e.type))&&(l=u.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=v1(e,o,l.options);l.options&wc&&l.content.length==0&&(u|=wc);let d=Ze.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):S1(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new zd(e,n,d,i,null,u)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=$c)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(u,d)=>{for(;u>=0;u--){let h=n[u];if(h==""){if(u==n.length-1||u==0)continue;for(;d>=o;d--)if(l(u-1,d))return!0;return!1}else{let p=d>0||d==0&&i?this.nodes[d].type:r&&d>=o?r.node(d-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;d--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Gj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&vE.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Kj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function x1(t){let e={};for(let n in t)e[n]=t[n];return e}function S1(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],l=u=>{o.push(u);for(let d=0;d<u.edgeCount;d++){let{type:h,next:p}=u.edge(d);if(h==e||o.indexOf(p)<0&&l(p))return!0}};if(l(i.contentMatch))return!0}}class Ao{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=ag(n).createDocumentFragment());let i=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,d=0;for(;u<o.length&&d<l.marks.length;){let h=l.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,d++}for(;u<o.length;)i=o.pop()[1];for(;d<l.marks.length;){let h=l.marks[d++],p=this.serializeMark(h,l.isInline,n);p&&(o.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=rf(ag(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&rf(ag(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return rf(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ao(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=k1(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return k1(e.marks)}}function k1(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ag(t){return t.document||window.document}const E1=new WeakMap;function Wj(t){let e=E1.get(t);return e===void 0&&E1.set(t,e=Jj(t)),e}function Jj(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function rf(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=Wj(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let u,d=n?t.createElementNS(n,i):t.createElement(i),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let y=m.indexOf(" ");y>0?d.setAttributeNS(m.slice(0,y),m.slice(y+1),h[m]):m=="style"&&d.style?d.style.cssText=h[m]:d.setAttribute(m,h[m])}}for(let m=p;m<e.length;m++){let y=e[m];if(y===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:w}=rf(t,y,n,r);if(d.appendChild(v),w){if(u)throw new RangeError("Multiple content holes");u=w}}}return{dom:d,contentDOM:u}}const wE=65535,xE=Math.pow(2,16);function Yj(t,e){return t+e*xE}function T1(t){return t&wE}function Xj(t){return(t-(t&wE))/xE}const SE=1,kE=2,sf=4,EE=8;class r0{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&EE)>0}get deletedBefore(){return(this.delInfo&(SE|sf))>0}get deletedAfter(){return(this.delInfo&(kE|sf))>0}get deletedAcross(){return(this.delInfo&sf)>0}}class Pn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Pn.empty)return Pn.empty}recover(e){let n=0,r=T1(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Xj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?i:0);if(d>e)break;let h=this.ranges[u+o],p=this.ranges[u+l],m=d+h;if(e<=m){let y=h?e==d?-1:e==m?1:n:n,v=d+i+(y<0?0:p);if(r)return v;let w=e==(n<0?d:m)?null:Yj(u/3,e-d),x=e==d?kE:e==m?SE:sf;return(n<0?e!=d:e!=m)&&(x|=EE),new r0(v,x,w)}i+=p-h}return r?e+i:new r0(e+i,0,null)}touches(e,n){let r=0,i=T1(n),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[u+o],p=d+h;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],u=l-(this.inverted?o:0),d=l+(this.inverted?0:o),h=this.ranges[i+n],p=this.ranges[i+r];e(u,u+h,d,d+p),o+=p-h}}invert(){return new Pn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Pn.empty:new Pn(e<0?[0,-e,0]:[0,0,e])}}Pn.empty=new Pn([]);class Pc{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Pc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Pc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,n);if(u.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new r0(e,i,null)}}const lg=Object.create(null);class ln{getMap(){return Pn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=lg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in lg)throw new RangeError("Duplicate use of step JSON ID "+e);return lg[e]=n,n.prototype.jsonID=e,n}}class Ct{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ct(e,null)}static fail(e){return new Ct(null,e)}static fromReplace(e,n,r,i){try{return Ct.ok(e.replace(n,r,i))}catch(o){if(o instanceof mf)return Ct.fail(o.message);throw o}}}function F0(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(F0(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return X.fromArray(r)}class ys extends ln{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new ie(F0(n.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),n.openStart,n.openEnd);return Ct.fromReplace(e,this.from,this.to,o)}invert(){return new Er(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ys(n.pos,r.pos,this.mark)}merge(e){return e instanceof ys&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ys(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ys(n.from,n.to,e.markFromJSON(n.mark))}}ln.jsonID("addMark",ys);class Er extends ln{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ie(F0(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Ct.fromReplace(e,this.from,this.to,r)}invert(){return new ys(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Er(n.pos,r.pos,this.mark)}merge(e){return e instanceof Er&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Er(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Er(n.from,n.to,e.markFromJSON(n.mark))}}ln.jsonID("removeMark",Er);class bs extends ln{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ct.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ct.fromReplace(e,this.pos,this.pos+1,new ie(X.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new bs(this.pos,n.marks[i]);return new bs(this.pos,this.mark)}}return new ko(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new bs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new bs(n.pos,e.markFromJSON(n.mark))}}ln.jsonID("addNodeMark",bs);class ko extends ln{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ct.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ct.fromReplace(e,this.pos,this.pos+1,new ie(X.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new bs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ko(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ko(n.pos,e.markFromJSON(n.mark))}}ln.jsonID("removeNodeMark",ko);class It extends ln{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&i0(e,this.from,this.to)?Ct.fail("Structure replace would overwrite content"):Ct.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Pn([this.from,this.to-this.from,this.slice.size])}invert(e){return new It(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new It(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof It)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ie.empty:new ie(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new It(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ie.empty:new ie(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new It(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new It(n.from,n.to,ie.fromJSON(e,n.slice),!!n.structure)}}ln.jsonID("replace",It);class Bt extends ln{constructor(e,n,r,i,o,l,u=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(i0(e,this.from,this.gapFrom)||i0(e,this.gapTo,this.to)))return Ct.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ct.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ct.fromReplace(e,this.from,this.to,r):Ct.fail("Content does not fit in gap")}getMap(){return new Pn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Bt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Bt(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Bt(n.from,n.to,n.gapFrom,n.gapTo,ie.fromJSON(e,n.slice),n.insert,!!n.structure)}}ln.jsonID("replaceAround",Bt);function i0(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function Qj(t,e,n,r){let i=[],o=[],l,u;t.doc.nodesBetween(e,n,(d,h,p)=>{if(!d.isInline)return;let m=d.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let y=Math.max(h,e),v=Math.min(h+d.nodeSize,n),w=r.addToSet(m);for(let x=0;x<m.length;x++)m[x].isInSet(w)||(l&&l.to==y&&l.mark.eq(m[x])?l.to=v:i.push(l=new Er(y,v,m[x])));u&&u.to==y?u.to=v:o.push(u=new ys(y,v,r))}}),i.forEach(d=>t.step(d)),o.forEach(d=>t.step(d))}function Zj(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(l,u)=>{if(!l.isInline)return;o++;let d=null;if(r instanceof mh){let h=l.marks,p;for(;p=r.isInSet(h);)(d||(d=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let h=Math.min(u+l.nodeSize,n);for(let p=0;p<d.length;p++){let m=d[p],y;for(let v=0;v<i.length;v++){let w=i[v];w.step==o-1&&m.eq(i[v].style)&&(y=w)}y?(y.to=h,y.step=o):i.push({style:m,from:Math.max(u,e),to:h,step:o})}}}),i.forEach(l=>t.step(new Er(l.from,l.to,l.style)))}function G0(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),l=[],u=e+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),p=u+h.nodeSize,m=r.matchType(h.type);if(!m)l.push(new It(u,p,ie.empty));else{r=m;for(let y=0;y<h.marks.length;y++)n.allowsMarkType(h.marks[y].type)||t.step(new Er(u,p,h.marks[y]));if(i&&h.isText&&n.whitespace!="pre"){let y,v=/\r?\n|\r/g,w;for(;y=v.exec(h.text);)w||(w=new ie(X.from(n.schema.text(" ",n.allowedMarks(h.marks))),0,0)),l.push(new It(u+y.index,u+y.index+y[0].length,w))}}u=p}if(!r.validEnd){let d=r.fillBefore(X.empty,!0);t.replace(u,u,new ie(d,0,0))}for(let d=l.length-1;d>=0;d--)t.step(l[d])}function e3(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Qa(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let l=t.$from.node(r),u=t.$from.index(r)+i,d=t.$to.indexAfter(r)-o;if(r<t.depth&&l.canReplace(u,d,n))return r;if(r==0||l.type.spec.isolating||!e3(l,u,d))break;u&&(i=1),d<l.childCount&&(o=1)}return null}function t3(t,e,n){let{$from:r,$to:i,depth:o}=e,l=r.before(o+1),u=i.after(o+1),d=l,h=u,p=X.empty,m=0;for(let w=o,x=!1;w>n;w--)x||r.index(w)>0?(x=!0,p=X.from(r.node(w).copy(p)),m++):d--;let y=X.empty,v=0;for(let w=o,x=!1;w>n;w--)x||i.after(w+1)<i.end(w)?(x=!0,y=X.from(i.node(w).copy(y)),v++):h++;t.step(new Bt(d,h,l,u,new ie(p.append(y),m,v),p.size-m,!0))}function K0(t,e,n=null,r=t){let i=n3(t,e),o=i&&r3(r,e);return o?i.map(C1).concat({type:e,attrs:n}).concat(o.map(C1)):null}function C1(t){return{type:t,attrs:null}}function n3(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return n.canReplaceWith(r,i,l)?o:null}function r3(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;d&&h<i;h++)d=d.matchType(n.child(h).type);return!d||!d.validEnd?null:l}function i3(t,e,n){let r=X.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let u=n[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=X.from(n[l].type.create(n[l].attrs,r))}let i=e.start,o=e.end;t.step(new Bt(i,o,i,o,new ie(r,0,0),n.length,!0))}function s3(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(l,u)=>{let d=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,d)&&o3(t.doc,t.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!w?h=!1:!v&&w&&(h=!0)}h===!1&&CE(t,l,u,o),G0(t,t.mapping.slice(o).map(u,1),r,void 0,h===null);let p=t.mapping.slice(o),m=p.map(u,1),y=p.map(u+l.nodeSize,1);return t.step(new Bt(m,y,m+1,y-1,new ie(X.from(r.create(d,null,l.marks)),0,0),1,!0)),h===!0&&TE(t,l,u,o),!1}})}function TE(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(i.text);){let d=t.mapping.slice(r).map(n+1+o+l.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function CE(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+o);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function o3(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function a3(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let l=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,l);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Bt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ie(X.from(l),0,0),1,!0))}function Ci(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=n-2;h>o;h--,p--){let m=i.node(h),y=i.index(h);if(m.type.spec.isolating)return!1;let v=m.content.cutByIndex(y,m.childCount),w=r&&r[p+1];w&&(v=v.replaceChild(0,w.type.create(w.attrs)));let x=r&&r[p]||m;if(!m.canReplace(y+1,m.childCount)||!x.type.validContent(v))return!1}let u=i.indexAfter(o),d=r&&r[0];return i.node(o).canReplaceWith(u,u,d?d.type:i.node(o+1).type)}function l3(t,e,n=1,r){let i=t.doc.resolve(e),o=X.empty,l=X.empty;for(let u=i.depth,d=i.depth-n,h=n-1;u>d;u--,h--){o=X.from(i.node(u).copy(o));let p=r&&r[h];l=X.from(p?p.type.create(p.attrs,l):i.node(u).copy(l))}t.step(new It(e,e,new ie(o.append(l),n,n),!0))}function Os(t,e){let n=t.resolve(e),r=n.index();return _E(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function c3(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),l=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function _E(t,e){return!!(t&&e&&!t.isLeaf&&c3(t,e))}function gh(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,l,u=r.index(i);if(i==r.depth?(o=r.nodeBefore,l=r.nodeAfter):n>0?(o=r.node(i+1),u++,l=r.node(i).maybeChild(u)):(o=r.node(i).maybeChild(u-1),l=r.node(i+1)),o&&!o.isTextblock&&_E(o,l)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function u3(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),l=o.node().type;if(i&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(i);p&&!m?r=!1:!p&&m&&(r=!0)}let u=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);CE(t,p.node(),p.before(),u)}l.inlineContent&&G0(t,e+n-1,l,o.node().contentMatchAt(o.index()),r==null);let d=t.mapping.slice(u),h=d.map(e-n);if(t.step(new It(h,d.map(e+n,-1),ie.empty,!0)),r===!0){let p=t.doc.resolve(h);TE(t,p.node(),p.before(),t.steps.length)}return t}function d3(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function AE(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(u>0?1:0),h=r.node(l),p=!1;if(o==1)p=h.canReplace(d,d,i);else{let m=h.contentMatchAt(d).findWrapping(i.firstChild.type);p=m&&h.canReplaceWith(d,d,m[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function yh(t,e,n=e,r=ie.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return OE(i,o,r)?new It(e,n,r):new f3(i,o,r).fit()}function OE(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class f3{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=X.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=X.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,l=r.depth,u=i.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let d=new ie(o,l,u);return e>-1?new Bt(r.pos,e,this.$to.pos,this.$to.end(),d,n):d.size||r.pos!=this.$to.pos?new It(r.pos,i.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=cg(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:h}=this.frontier[u],p,m=null;if(n==1&&(l?h.matchType(l.type)||(m=h.fillBefore(X.from(l),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:m};if(n==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=cg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ie(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=cg(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new ie(fc(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new ie(fc(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let x=0;x<o.length;x++)this.openFrontierNode(o[x]);let l=this.unplaced,u=r?r.content:l.content,d=l.openStart-e,h=0,p=[],{match:m,type:y}=this.frontier[n];if(i){for(let x=0;x<i.childCount;x++)p.push(i.child(x));m=m.matchFragment(i)}let v=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let x=u.child(h),k=m.matchType(x.type);if(!k)break;h++,(h>1||d==0||x.content.size)&&(m=k,p.push(NE(x.mark(y.allowedMarks(x.marks)),h==1?d:0,h==u.childCount?v:-1)))}let w=h==u.childCount;w||(v=-1),this.placed=hc(this.placed,n,X.from(p)),this.frontier[n].match=m,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,k=u;x<v;x++){let T=k.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),k=T.content}this.unplaced=w?e==0?ie.empty:new ie(fc(l.content,e-1,1),e-1,v<0?l.openEnd:e-1):new ie(fc(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!ug(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=ug(e,n,i,r,o);if(l){for(let u=n-1;u>=0;u--){let{match:d,type:h}=this.frontier[u],p=ug(e,u,h,d,!0);if(!p||p.childCount)continue e}return{depth:n,fit:l,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=hc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=hc(this.placed,this.depth,X.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(X.empty,!0);n.childCount&&(this.placed=hc(this.placed,this.frontier.length,n))}}function fc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(fc(t.firstChild.content,e-1,n)))}function hc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(hc(t.lastChild.content,e-1,n)))}function cg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function NE(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,NE(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(X.empty,!0)))),t.copy(r)}function ug(t,e,n,r,i){let o=t.node(e),l=i?t.indexAfter(e):t.index(e);if(l==o.childCount&&!n.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!h3(n,o.content,l)?u:null}function h3(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function p3(t){return t.spec.defining||t.spec.definingForContent}function m3(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(OE(i,o,r))return t.step(new It(e,n,r));let l=RE(i,o);l[l.length-1]==0&&l.pop();let u=-(i.depth+1);l.unshift(u);for(let y=i.depth,v=i.pos-1;y>0;y--,v--){let w=i.node(y).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(y)>-1?u=y:i.before(y)==v&&l.splice(1,0,-y)}let d=l.indexOf(u),h=[],p=r.openStart;for(let y=r.content,v=0;;v++){let w=y.firstChild;if(h.push(w),v==r.openStart)break;y=w.content}for(let y=p-1;y>=0;y--){let v=h[y],w=p3(v.type);if(w&&!v.sameMarkup(i.node(Math.abs(u)-1)))p=y;else if(w||!v.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let v=(y+p+1)%(r.openStart+1),w=h[v];if(w)for(let x=0;x<l.length;x++){let k=l[(x+d)%l.length],T=!0;k<0&&(T=!1,k=-k);let _=i.node(k-1),A=i.index(k-1);if(_.canReplaceWith(A,A,w.type,w.marks))return t.replace(i.before(k),T?o.after(k):n,new ie(ME(r.content,0,r.openStart,v),v,r.openEnd))}}let m=t.steps.length;for(let y=l.length-1;y>=0&&(t.replace(e,n,r),!(t.steps.length>m));y--){let v=l[y];v<0||(e=i.before(v),n=o.after(v))}}function ME(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(ME(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),l=o.fillBefore(t).append(t);t=l.append(o.matchFragment(l).fillBefore(X.empty,!0))}return t}function g3(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=d3(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ie(X.from(r),0,0))}function y3(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=RE(r,i);for(let l=0;l<o.length;l++){let u=o[l],d=l==o.length-1;if(d&&u==0||r.node(u).type.contentMatch.validEnd)return t.delete(r.start(u),i.end(u));if(u>0&&(d||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return t.delete(r.before(u),i.after(u))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&i.end(l)-n!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function RE(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Ba extends ln{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ct.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ct.fromReplace(e,this.pos,this.pos+1,new ie(X.from(i),0,n.isLeaf?0:1))}getMap(){return Pn.empty}invert(e){return new Ba(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ba(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ba(n.pos,n.attr,n.value)}}ln.jsonID("attr",Ba);class Hc extends ln{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Ct.ok(r)}getMap(){return Pn.empty}invert(e){return new Hc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Hc(n.attr,n.value)}}ln.jsonID("docAttr",Hc);let Pa=class extends Error{};Pa=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Pa.prototype=Object.create(Error.prototype);Pa.prototype.constructor=Pa;Pa.prototype.name="TransformError";class DE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Pc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Pa(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((o,l,u,d)=>{e=Math.min(e,u),n=Math.max(n,d)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ie.empty){let i=yh(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ie(X.from(r),0,0))}delete(e,n){return this.replace(e,n,ie.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return m3(this,e,n,r),this}replaceRangeWith(e,n,r){return g3(this,e,n,r),this}deleteRange(e,n){return y3(this,e,n),this}lift(e,n){return t3(this,e,n),this}join(e,n=1){return u3(this,e,n),this}wrap(e,n){return i3(this,e,n),this}setBlockType(e,n=e,r,i=null){return s3(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return a3(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Ba(e,n,r)),this}setDocAttribute(e,n){return this.step(new Hc(e,n)),this}addNodeMark(e,n){return this.step(new bs(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ze)n.isInSet(r.marks)&&this.step(new ko(e,n));else{let i=r.marks,o,l=[];for(;o=n.isInSet(i);)l.push(new ko(e,o)),i=o.removeFromSet(i);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,n=1,r){return l3(this,e,n,r),this}addMark(e,n,r){return Qj(this,e,n,r),this}removeMark(e,n,r){return Zj(this,e,n,r),this}clearIncompatible(e,n,r){return G0(this,e,n,r),this}}const dg=Object.create(null);class we{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new jE(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ie.empty){let r=n.content.lastChild,i=null;for(let u=0;u<n.openEnd;u++)i=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:d,$to:h}=l[u],p=e.mapping.slice(o);e.replaceRange(p.map(d.pos),p.map(h.pos),u?ie.empty:n),u==0&&O1(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:u}=i[o],d=e.mapping.slice(r),h=d.map(l.pos),p=d.map(u.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,n),O1(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new ke(e):Ra(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let l=n<0?Ra(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ra(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Hn(e.node(0))}static atStart(e){return Ra(e,e,0,0,1)||new Hn(e)}static atEnd(e){return Ra(e,e,e.content.size,e.childCount,-1)||new Hn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=dg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in dg)throw new RangeError("Duplicate use of selection JSON ID "+e);return dg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ke.between(this.$anchor,this.$head).getBookmark()}}we.prototype.visible=!0;class jE{constructor(e,n){this.$from=e,this.$to=n}}let _1=!1;function A1(t){!_1&&!t.parent.inlineContent&&(_1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ke extends we{constructor(e,n=e){A1(e),A1(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return we.near(r);let i=e.resolve(n.map(this.anchor));return new ke(i.parent.inlineContent?i:r,r)}replace(e,n=ie.empty){if(super.replace(e,n),n==ie.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ke&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new bh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ke(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=we.findFrom(n,r,!0)||we.findFrom(n,-r,!0);if(o)n=o.$head;else return we.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(we.findFrom(e,-r,!0)||we.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new ke(e,n)}}we.jsonID("text",ke);class bh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new bh(e.map(this.anchor),e.map(this.head))}resolve(e){return ke.between(e.resolve(this.anchor),e.resolve(this.head))}}class he extends we{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?we.near(o):new he(o)}content(){return new ie(X.from(this.node),0,0)}eq(e){return e instanceof he&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new W0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new he(e.resolve(n.anchor))}static create(e,n){return new he(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}he.prototype.visible=!1;we.jsonID("node",he);class W0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new bh(r,r):new W0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&he.isSelectable(r)?new he(n):we.near(n)}}class Hn extends we{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ie.empty){if(n==ie.empty){e.delete(0,e.doc.content.size);let r=we.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Hn(e)}map(e){return new Hn(e)}eq(e){return e instanceof Hn}getBookmark(){return b3}}we.jsonID("all",Hn);const b3={map(){return this},resolve(t){return new Hn(t)}};function Ra(t,e,n,r,i,o=!1){if(e.inlineContent)return ke.create(t,n);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let u=e.child(l);if(u.isAtom){if(!o&&he.isSelectable(u))return he.create(t,n-(i<0?u.nodeSize:0))}else{let d=Ra(t,u,n+i,i<0?u.childCount:0,i,o);if(d)return d}n+=u.nodeSize*i}return null}function O1(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof It||i instanceof Bt))return;let o=t.mapping.maps[r],l;o.forEach((u,d,h,p)=>{l==null&&(l=p)}),t.setSelection(we.near(t.doc.resolve(l),n))}const N1=1,Id=2,M1=4;class v3 extends DE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|N1)&~Id,this.storedMarks=null,this}get selectionSet(){return(this.updated&N1)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Id,this}ensureMarks(e){return Ze.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Id)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Id,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ze.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(n);o=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(we.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=M1,this}get scrolledIntoView(){return(this.updated&M1)>0}}function R1(t,e){return!e||!t?t:t.bind(e)}class pc{constructor(e,n,r){this.name=e,this.init=R1(n.init,r),this.apply=R1(n.apply,r)}}const w3=[new pc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new pc("selection",{init(t,e){return t.selection||we.atStart(e.doc)},apply(t){return t.selection}}),new pc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new pc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class fg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=w3.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new pc(r.key,r.spec.state,r))})}}class za{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let d=i?i[l].n:0,h=i?i[l].state:this,p=d<n.length&&u.spec.appendTransaction.call(u,d?n.slice(d):n,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<l?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),o=!0}i&&(i[l]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new za(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new v3(this)}static create(e){let n=new fg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new za(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new fg(this.schema,e.plugins),r=n.fields,i=new za(n);for(let o=0;o<r.length;o++){let l=r[o].name;i[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new fg(e.schema,e.plugins),o=new za(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=ws.fromJSON(e.schema,n.doc);else if(l.name=="selection")o.selection=we.fromJSON(o.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let d=r[u],h=d.spec.state;if(d.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(n,u)){o[l.name]=h.fromJSON.call(d,e,n[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function LE(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=LE(i,e,{})),n[r]=i}return n}class ot{constructor(e){this.spec=e,this.props={},e.props&&LE(e.props,this,this.props),this.key=e.key?e.key.key:zE("plugin")}getState(e){return e[this.key]}}const hg=Object.create(null);function zE(t){return t in hg?t+"$"+ ++hg[t]:(hg[t]=0,t+"$")}class lt{constructor(e="key"){this.key=zE(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const J0=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function IE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const BE=(t,e,n)=>{let r=IE(t,n);if(!r)return!1;let i=Y0(r);if(!i){let l=r.blockRange(),u=l&&Qa(l);return u==null?!1:(e&&e(t.tr.lift(l,u).scrollIntoView()),!0)}let o=i.nodeBefore;if(KE(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Ha(o,"end")||he.isSelectable(o)))for(let l=r.depth;;l--){let u=yh(t.doc,r.before(l),r.after(l),ie.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=t.tr.step(u);d.setSelection(Ha(o,"end")?we.findFrom(d.doc.resolve(d.mapping.map(i.pos,-1)),-1):he.create(d.doc,i.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},x3=(t,e,n)=>{let r=IE(t,n);if(!r)return!1;let i=Y0(r);return i?UE(t,i,e):!1},S3=(t,e,n)=>{let r=PE(t,n);if(!r)return!1;let i=X0(r);return i?UE(t,i,e):!1};function UE(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let l=e.nodeAfter,u=l,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=yh(t.doc,o,d,ie.empty);if(!h||h.from!=o||h instanceof It&&h.slice.size>=d-o)return!1;if(n){let p=t.tr.step(h);p.setSelection(ke.create(p.doc,o)),n(p.scrollIntoView())}return!0}function Ha(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const $E=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Y0(r)}let l=o&&o.nodeBefore;return!l||!he.isSelectable(l)?!1:(e&&e(t.tr.setSelection(he.create(t.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function Y0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function PE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const HE=(t,e,n)=>{let r=PE(t,n);if(!r)return!1;let i=X0(r);if(!i)return!1;let o=i.nodeAfter;if(KE(t,i,e,1))return!0;if(r.parent.content.size==0&&(Ha(o,"start")||he.isSelectable(o))){let l=yh(t.doc,r.before(),r.after(),ie.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=t.tr.step(l);u.setSelection(Ha(o,"start")?we.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):he.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},qE=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=X0(r)}let l=o&&o.nodeAfter;return!l||!he.isSelectable(l)?!1:(e&&e(t.tr.setSelection(he.create(t.doc,o.pos)).scrollIntoView()),!0)};function X0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const k3=(t,e)=>{let n=t.selection,r=n instanceof he,i;if(r){if(n.node.isTextblock||!Os(t.doc,n.from))return!1;i=n.from}else if(i=gh(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(he.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},E3=(t,e)=>{let n=t.selection,r;if(n instanceof he){if(n.node.isTextblock||!Os(t.doc,n.to))return!1;r=n.to}else if(r=gh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},T3=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Qa(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},VE=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Q0(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const C3=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),l=Q0(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(e){let u=n.after(),d=t.tr.replaceWith(u,u,l.createAndFill());d.setSelection(we.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},FE=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Hn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Q0(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=t.tr.insert(l,o.createAndFill());u.setSelection(ke.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},GE=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ci(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Qa(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function _3(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof he&&e.selection.node.isBlock)return!r.parentOffset||!Ci(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,d=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){d=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),u=Q0(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),o.unshift(d&&u?{type:u}:null),l=v;break}else{if(v==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof ke||e.selection instanceof Hn)&&p.deleteSelection();let m=p.mapping.map(r.pos),y=Ci(p.doc,m,o.length,o);if(y||(o[0]=u?{type:u}:null,y=Ci(p.doc,m,o.length,o)),!y)return!1;if(p.split(m,o.length,o),!d&&h&&r.node(l).type!=u){let v=p.mapping.map(r.before(l)),w=p.doc.resolve(v);u&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return n&&n(p.scrollIntoView()),!0}}const A3=_3(),O3=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(he.create(t.doc,i))),!0)};function N3(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Os(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function KE(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,l,u,d=i.type.spec.isolating||o.type.spec.isolating;if(!d&&N3(t,e,n))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(n){let v=e.pos+o.nodeSize,w=X.empty;for(let T=l.length-1;T>=0;T--)w=X.from(l[T].create(null,w));w=X.from(i.copy(w));let x=t.tr.step(new Bt(e.pos-1,v,e.pos,v,new ie(w,1,0),l.length,!0)),k=x.doc.resolve(v+2*l.length);k.nodeAfter&&k.nodeAfter.type==i.type&&Os(x.doc,k.pos)&&x.join(k.pos),n(x.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&d?null:we.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),y=m&&Qa(m);if(y!=null&&y>=e.depth)return n&&n(t.tr.lift(m,y).scrollIntoView()),!0;if(h&&Ha(o,"start",!0)&&Ha(i,"end")){let v=i,w=[];for(;w.push(v),!v.isTextblock;)v=v.lastChild;let x=o,k=1;for(;!x.isTextblock;x=x.firstChild)k++;if(v.canReplace(v.childCount,v.childCount,x.content)){if(n){let T=X.empty;for(let A=w.length-1;A>=0;A--)T=X.from(w[A].copy(T));let _=t.tr.step(new Bt(e.pos-w.length,e.pos+o.nodeSize,e.pos+k,e.pos+o.nodeSize-k,new ie(T,w.length,0),0,!0));n(_.scrollIntoView())}return!0}}return!1}function WE(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(ke.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const M3=WE(-1),R3=WE(1);function D3(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o),u=l&&K0(l,t,e);return u?(r&&r(n.tr.wrap(l,u).scrollIntoView()),!0):!1}}function D1(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];n.doc.nodesBetween(l,u,(d,h)=>{if(i)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)i=!0;else{let p=n.doc.resolve(h),m=p.index();i=p.parent.canReplaceWith(m,m+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:d}}=n.selection.ranges[l];o.setBlockType(u,d,t,e)}r(o.scrollIntoView())}return!0}}function Z0(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Z0(J0,BE,$E);Z0(J0,HE,qE);Z0(VE,FE,GE,A3);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function j3(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o);if(!l)return!1;let u=r?n.tr:null;return L3(u,l,t,e)?(r&&r(u.scrollIntoView()),!0):!1}}function L3(t,e,n,r=null){let i=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);o=new yf(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new yf(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=K0(o,n,r,e);return u?(t&&z3(t,e,u,i,n),!0):!1}function z3(t,e,n,r,i){let o=X.empty;for(let p=n.length-1;p>=0;p--)o=X.from(n[p].type.create(n[p].attrs,o));t.step(new Bt(e.start-(r?2:0),e.end,e.start,e.end,new ie(o,0,0),n.length,!0));let l=0;for(let p=0;p<n.length;p++)n[p].type==i&&(l=p+1);let u=n.length-l,d=e.start+n.length-(r?2:0),h=e.parent;for(let p=e.startIndex,m=e.endIndex,y=!0;p<m;p++,y=!1)!y&&Ci(t.doc,d,u)&&(t.split(d,u),d+=2*u),d+=h.child(p).nodeSize;return t}function I3(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?B3(e,n,t,o):U3(e,n,o):!0:!1}}function B3(t,e,n,r){let i=t.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new Bt(o-1,l,o,l,new ie(X.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new yf(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const u=Qa(r);if(u==null)return!1;i.lift(r,u);let d=i.doc.resolve(i.mapping.map(o,-1)-1);return Os(i.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&i.join(d.pos),e(i.scrollIntoView()),!0}function U3(t,e,n){let r=t.tr,i=n.parent;for(let v=n.end,w=n.endIndex-1,x=n.startIndex;w>x;w--)v-=i.child(w).nodeSize,r.delete(v-1,v+1);let o=r.doc.resolve(n.start),l=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let u=n.startIndex==0,d=n.endIndex==i.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(d?X.empty:X.from(i))))return!1;let m=o.pos,y=m+l.nodeSize;return r.step(new Bt(m-(u?1:0),y+(d?1:0),m+1,y-1,new ie((u?X.empty:X.from(i.copy(X.empty))).append(d?X.empty:X.from(i.copy(X.empty))),u?0:1,d?0:1),u?0:1)),e(r.scrollIntoView()),!0}function $3(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==t);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,d=u.child(l-1);if(d.type!=t)return!1;if(n){let h=d.lastChild&&d.lastChild.type==u.type,p=X.from(h?t.create():null),m=new ie(X.from(t.create(null,X.from(u.type.create(null,p)))),h?3:1,0),y=o.start,v=o.end;n(e.tr.step(new Bt(y-(h?3:1),v,y,v,m,1,!0)).scrollIntoView())}return!0}}const Xt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},qa=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let s0=null;const xi=function(t,e,n){let r=s0||(s0=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},P3=function(){s0=null},Eo=function(t,e,n,r){return n&&(j1(t,e,n,r,-1)||j1(t,e,n,r,1))},H3=/^(img|br|input|textarea|hr)$/i;function j1(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:sr(t))){let l=t.parentNode;if(!l||l.nodeType!=1||nu(t)||H3.test(t.nodeName)||t.contentEditable=="false")return!1;e=Xt(t)+(i<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=l,e=i<0?sr(t):0}else return!1}}function sr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function q3(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=sr(t)}else if(t.parentNode&&!nu(t))e=Xt(t),t=t.parentNode;else return null}}function V3(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!nu(t))e=Xt(t)+1,t=t.parentNode;else return null}}function F3(t,e,n){for(let r=e==0,i=e==sr(t);r||i;){if(t==n)return!0;let o=Xt(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==sr(t)}}function nu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const vh=function(t){return t.focusNode&&Eo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function uo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function G3(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function K3(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(sr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(sr(r.startContainer),r.startOffset)}}}const Hr=typeof navigator<"u"?navigator:null,L1=typeof document<"u"?document:null,Ns=Hr&&Hr.userAgent||"",o0=/Edge\/(\d+)/.exec(Ns),JE=/MSIE \d/.exec(Ns),a0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ns),An=!!(JE||a0||o0),Ss=JE?document.documentMode:a0?+a0[1]:o0?+o0[1]:0,or=!An&&/gecko\/(\d+)/i.test(Ns);or&&+(/Firefox\/(\d+)/.exec(Ns)||[0,0])[1];const l0=!An&&/Chrome\/(\d+)/.exec(Ns),Zt=!!l0,YE=l0?+l0[1]:0,an=!An&&!!Hr&&/Apple Computer/.test(Hr.vendor),Va=an&&(/Mobile\/\w+/.test(Ns)||!!Hr&&Hr.maxTouchPoints>2),ir=Va||(Hr?/Mac/.test(Hr.platform):!1),XE=Hr?/Win/.test(Hr.platform):!1,ki=/Android \d/.test(Ns),ru=!!L1&&"webkitFontSmoothing"in L1.documentElement.style,W3=ru?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function J3(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function pi(t,e){return typeof t=="number"?t:t[e]}function Y3(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function z1(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=qa(l);continue}let u=l,d=u==o.body,h=d?J3(o):Y3(u),p=0,m=0;if(e.top<h.top+pi(r,"top")?m=-(h.top-e.top+pi(i,"top")):e.bottom>h.bottom-pi(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+pi(i,"top")-h.top:e.bottom-h.bottom+pi(i,"bottom")),e.left<h.left+pi(r,"left")?p=-(h.left-e.left+pi(i,"left")):e.right>h.right-pi(r,"right")&&(p=e.right-h.right+pi(i,"right")),p||m)if(d)o.defaultView.scrollBy(p,m);else{let v=u.scrollLeft,w=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let x=u.scrollLeft-v,k=u.scrollTop-w;e={left:e.left-x,top:e.top-k,right:e.right-x,bottom:e.bottom-k}}let y=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(y))break;l=y=="absolute"?l.offsetParent:qa(l)}}function X3(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=t.root.elementFromPoint(o,l);if(!u||u==t.dom||!t.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=n-20){r=u,i=d.top;break}}return{refDOM:r,refTop:i,stack:QE(t.dom)}}function QE(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=qa(r));return e}function Q3({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;ZE(n,r==0?0:r-e)}function ZE(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Ta=null;function Z3(t){if(t.setActive)return t.setActive();if(Ta)return t.focus(Ta);let e=QE(t);t.focus(Ta==null?{get preventScroll(){return Ta={preventScroll:!0},!0}}:void 0),Ta||(Ta=!1,ZE(e,0))}function eT(t,e){let n,r=2e8,i,o=0,l=e.top,u=e.top,d,h;for(let p=t.firstChild,m=0;p;p=p.nextSibling,m++){let y;if(p.nodeType==1)y=p.getClientRects();else if(p.nodeType==3)y=xi(p).getClientRects();else continue;for(let v=0;v<y.length;v++){let w=y[v];if(w.top<=l&&w.bottom>=u){l=Math.max(w.bottom,l),u=Math.min(w.top,u);let x=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(x<r){n=p,r=x,i=x&&n.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&x&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!d&&w.left<=e.left&&w.right>=e.left&&(d=p,h={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!n&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!n&&d&&(n=d,i=h,r=0),n&&n.nodeType==3?eL(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:eT(n,i)}function eL(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let l=cs(r,1);if(l.top!=l.bottom&&ey(e,l)){i={node:t,offset:o+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function ey(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function tL(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function nL(t,e,n){let{node:r,offset:i}=eT(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function rL(t,e,n,r){let i=-1;for(let o=e,l=!1;o!=t.dom;){let u=t.docView.nearestDesc(o,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?i=u.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(i=u.posAfter),l=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function tT(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let l=t.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let d=0;d<u.length;d++){let h=u[d];if(ey(e,h))return tT(l,e,h)}}if((o=(o+1)%r)==i)break}return t}function iL(t,e){let n=t.dom.ownerDocument,r,i=0,o=K3(n,e.left,e.top);o&&({node:r,offset:i}=o);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),u;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=t.dom.getBoundingClientRect();if(!ey(e,h)||(l=tT(t.dom,e,h),!l))return null}if(an)for(let h=l;r&&h;h=qa(h))h.draggable&&(r=void 0);if(l=tL(l,e),r){if(or&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let h;ru&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=rL(t,r,i,e))}u==null&&(u=nL(t,l,e));let d=t.docView.nearestDesc(l,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function I1(t){return t.top<t.bottom||t.left<t.right}function cs(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(I1(r))return r}return Array.prototype.find.call(n,I1)||t.getBoundingClientRect()}const sL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function nT(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),l=ru||or;if(r.nodeType==3)if(l&&(sL.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let d=cs(xi(r,i,i),n);if(or&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=cs(xi(r,i-1,i-1),-1);if(h.top==d.top){let p=cs(xi(r,i,i+1),-1);if(p.top!=d.top)return ac(p,p.left<h.left)}}return d}else{let d=i,h=i,p=n<0?1:-1;return n<0&&!i?(h++,p=-1):n>=0&&i==r.nodeValue.length?(d--,p=1):n<0?d--:h++,ac(cs(xi(r,d,h),p),p<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==sr(r))){let d=r.childNodes[i-1];if(d.nodeType==1)return pg(d.getBoundingClientRect(),!1)}if(o==null&&i<sr(r)){let d=r.childNodes[i];if(d.nodeType==1)return pg(d.getBoundingClientRect(),!0)}return pg(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==sr(r))){let d=r.childNodes[i-1],h=d.nodeType==3?xi(d,sr(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return ac(cs(h,1),!1)}if(o==null&&i<sr(r)){let d=r.childNodes[i];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?xi(d,0,l?0:1):d.nodeType==1?d:null:null;if(h)return ac(cs(h,-1),!0)}return ac(cs(r.nodeType==3?xi(r):r,-n),n>=0)}function ac(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function pg(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function rT(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function oL(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return rT(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let u=t.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=nT(t,i.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=xi(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.bottom>p.top+1&&(n=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const aL=/[\u0590-\u08ac]/;function lL(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,l=i==r.parent.content.size,u=t.domSelection();return u?!aL.test(r.parent.textContent)||!u.modify?n=="left"||n=="backward"?o:l:rT(t,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:p,anchorOffset:m}=t.domSelectionRange(),y=u.caretBidiLevel;u.modify("move",n,"character");let v=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:w,focusOffset:x}=t.domSelectionRange(),k=w&&!v.contains(w.nodeType==1?w:w.parentNode)||d==w&&h==x;try{u.collapse(p,m),d&&(d!=p||h!=m)&&u.extend&&u.extend(d,h)}catch{}return y!=null&&(u.caretBidiLevel=y),k}):r.pos==r.start()||r.pos==r.end()}let B1=null,U1=null,$1=!1;function cL(t,e,n){return B1==e&&U1==n?$1:(B1=e,U1=n,$1=n=="up"||n=="down"?oL(t,e,n):lL(t,e,n))}const ar=0,P1=1,ho=2,qr=3;class iu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ar,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Xt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!n||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let u=i.children[l];if(u.size){i=u;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof sT){i=e-o;break}o=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof iT&&o.side>=0;r--);if(n<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&n&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Xt(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Xt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=r,u=0;;u++){let d=this.children[u],h=l+d.size;if(i==-1&&e<=h){let p=l+d.border;if(e>=p&&n<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,n,p);e=l;for(let m=u;m>0;m--){let y=this.children[m-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){i=Xt(y.dom)+1;break}e-=y.size}i==-1&&(i=0)}if(i>-1&&(h>n||u==this.children.length-1)){n=h;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Xt(m.dom);break}n+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),l=Math.max(e,n);for(let v=0,w=0;v<this.children.length;v++){let x=this.children[v],k=w+x.size;if(o>w&&l<k)return x.setSelection(e-w-x.border,n-w-x.border,r,i);w=k}let u=this.domFromPos(e,e?-1:1),d=n==e?u:this.domFromPos(n,n?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((or||an)&&e==n){let{node:v,offset:w}=u;if(v.nodeType==3){if(m=!!(w&&v.nodeValue[w-1]==`
`),m&&w==v.nodeValue.length)for(let x=v,k;x;x=x.parentNode){if(k=x.nextSibling){k.nodeName=="BR"&&(u=d={node:k.parentNode,offset:Xt(k)+1});break}let T=x.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let x=v.childNodes[w-1];m=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(or&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(i=!0)}if(!(i||m&&an)&&Eo(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Eo(d.node,d.offset,p.focusNode,p.focusOffset))return;let y=!1;if((h.extend||e==n)&&!(m&&or)){h.collapse(u.node,u.offset);try{e!=n&&h.extend(d.node,d.offset),y=!0}catch{}}if(!y){if(e>n){let w=u;u=d,d=w}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],l=r+o.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let u=r+o.border,d=l-o.border;if(e>=u&&n<=d){this.dirty=e==r||n==l?ho:P1,e==u&&n==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=qr:o.markDirty(e-u,n-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?ho:qr}r=l}this.dirty=ho}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ho:P1;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class iT extends iu{constructor(e,n,r,i){let o,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==ar&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class uL extends iu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class To extends iu{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],l=o&&o(n,i,r);return(!l||!l.dom)&&(l=Ao.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new To(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&qr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=qr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ar){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ar}}slice(e,n,r){let i=To.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;n<l&&(o=u0(o,n,l,r)),e>0&&(o=u0(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ks extends iu{constructor(e,n,r,i,o,l,u,d,h){super(e,[],o,l),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,n,r,i,o,l){let u=o.nodeViews[n.type.name],d,h=u&&u(n,o,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,i),p=h&&h.dom,m=h&&h.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Ao.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let y=p;return p=lT(p,r,n),h?d=new dL(e,n,r,i,p,m||null,y,h,o,l+1):n.isText?new wh(e,n,r,i,p,y,o):new ks(e,n,r,i,p,m||null,y,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>X.empty)}return e}matchesNode(e,n,r){return this.dirty==ar&&e.eq(this.node)&&vf(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,d=new hL(this,l&&l.node,e);gL(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e,p):h.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?Ze.none:this.node.child(p).marks,r,e,p),d.placeWidget(h,e,i)},(h,p,m,y)=>{d.syncToMarks(h.marks,r,e,y);let v;d.findNodeMatch(h,p,m,y)||u&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(v=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,p,m,v,e)||d.updateNextNode(h,p,m,e,y,i)||d.addNode(h,p,m,e,i),i+=h.nodeSize}),d.syncToMarks([],r,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==ho)&&(l&&this.protectLocalComposition(e,l),oT(this.contentDOM,this.children,e),Va&&yL(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ke)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=bL(this.node.content,l,r-n,i-n);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new uL(this,o,n,i);e.input.compositionNodes.push(l),this.children=u0(this.children,r,r+i.length,e,l)}update(e,n,r,i){return this.dirty==qr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ar}updateOuterDeco(e){if(vf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=aT(this.dom,this.nodeDOM,c0(this.outerDeco,this.node,n),c0(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function H1(t,e,n,r,i){lT(r,e,t);let o=new ks(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class wh extends ks{constructor(e,n,r,i,o,l,u){super(e,n,r,i,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==qr||this.dirty!=ar&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ar||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ar,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new wh(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=qr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class sT extends iu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ar&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class dL extends ks{constructor(e,n,r,i,o,l,u,d,h,p){super(e,n,r,i,o,l,u,h,p),this.spec=d}update(e,n,r,i){if(this.dirty==qr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function oT(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==t){for(;u!=r;)r=q1(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(u,r);if(l instanceof To){let d=r?r.previousSibling:t.lastChild;oT(l.contentDOM,l.children,n),r=d?d.nextSibling:t.firstChild}}for(;r;)r=q1(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const xc=function(t){t&&(this.nodeName=t)};xc.prototype=Object.create(null);const po=[new xc];function c0(t,e,n){if(t.length==0)return po;let r=n?po[0]:new xc,i=[r];for(let o=0;o<t.length;o++){let l=t[o].type.attrs;if(l){l.nodeName&&i.push(r=new xc(l.nodeName));for(let u in l){let d=l[u];d!=null&&(n&&i.length==1&&i.push(r=new xc(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+d:u=="style"?r.style=(r.style?r.style+";":"")+d:u!="nodeName"&&(r[u]=d))}}}return i}function aT(t,e,n,r){if(n==po&&r==po)return e;let i=e;for(let o=0;o<r.length;o++){let l=r[o],u=n[o];if(o){let d;u&&u.nodeName==l.nodeName&&i!=t&&(d=i.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(i),u=po[0]),i=d}fL(i,u||po[0],l)}return i}function fL(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function lT(t,e,n){return aT(t,t,po,c0(e,n,t.nodeType!=1))}function vf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function q1(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class hL{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=pL(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let o=0,l=this.stack.length>>1,u=Math.min(l,e.length);for(;o<u&&(o==l-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<l;)this.destroyRest(),this.top.dirty=ar,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1,h=this.top.children.length;i<this.preMatch.index&&(h=Math.min(this.index+3,h));for(let p=this.index;p<h;p++){let m=this.top.children[p];if(m.matchesMark(e[l])&&!this.isLocked(m.dom)){d=p;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let p=To.create(this.top,e[l],n,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,r,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let h=this.top.children[u];if(h.matchesNode(e,n,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let l=this.top.children[i];return l.dirty==qr&&l.dom==l.contentDOM&&(l.dirty=ho),l.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,l){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof ks){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let p=d.dom,m,y=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=qr&&vf(n,d.outerDeco));if(!y&&d.update(e,n,r,i))return this.destroyBetween(this.index,u),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!y&&(m=this.recreateWrapper(d,e,n,r,i,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=ho,m.updateChildren(i,l+1),m.dirty=ar),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!vf(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=ks.create(this.top,n,r,i,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let d of u.children)d.parent=u}return e.destroy(),u}addNode(e,n,r,i,o){let l=ks.create(this.top,e,n,r,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new iT(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof To;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof wh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((an||Zt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new sT(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function pL(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,l=[];e:for(;i>0;){let u;for(;;)if(r){let h=n.children[r-1];if(h instanceof To)n=h,r=h.children.length;else{u=h,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let d=u.node;if(d){if(d!=t.child(i-1))break;--i,o.set(u,i),l.push(u)}}return{index:i,matched:o,matches:l.reverse()}}function mL(t,e){return t.type.side-e.type.side}function gL(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let h=0;h<t.childCount;h++){let p=t.child(h);r(p,i,e.forChild(o,p),h),o+=p.nodeSize}return}let l=0,u=[],d=null;for(let h=0;;){let p,m;for(;l<i.length&&i[l].to==o;){let k=i[l++];k.widget&&(p?(m||(m=[p])).push(k):p=k)}if(p)if(m){m.sort(mL);for(let k=0;k<m.length;k++)n(m[k],h,!!d)}else n(p,h,!!d);let y,v;if(d)v=-1,y=d,d=null;else if(h<t.childCount)v=h,y=t.child(h++);else break;for(let k=0;k<u.length;k++)u[k].to<=o&&u.splice(k--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)u.push(i[l++]);let w=o+y.nodeSize;if(y.isText){let k=w;l<i.length&&i[l].from<k&&(k=i[l].from);for(let T=0;T<u.length;T++)u[T].to<k&&(k=u[T].to);k<w&&(d=y.cut(k-o),y=y.cut(0,k-o),w=k,v=-1)}else for(;l<i.length&&i[l].to<w;)l++;let x=y.isInline&&!y.isLeaf?u.filter(k=>!k.inline):u.slice();r(y,x,e.forChild(o,y),v),o=w}}function yL(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function bL(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let l=t.child(i++),u=o;if(o+=l.nodeSize,!l.isText)continue;let d=l.text;for(;i<t.childCount;){let h=t.child(i++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=n){if(o>=r&&d.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?d.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=n)return u+h;if(n==r&&d.length>=r+e.length-u&&d.slice(r-u,r-u+e.length)==e)return r}}return-1}function u0(t,e,n,r,i){let o=[];for(let l=0,u=0;l<t.length;l++){let d=t[l],h=u,p=u+=d.size;h>=n||p<=e?o.push(d):(h<e&&o.push(d.slice(0,e-h,r)),i&&(o.push(i),i=void 0),p>n&&o.push(d.slice(n-h,d.size,r)))}return o}function ty(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let u=r.resolve(l),d,h;if(vh(n)){for(d=l;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&he.isSelectable(m)&&i.parent&&!(m.isInline&&F3(n.focusNode,n.focusOffset,i.dom))){let y=i.posBefore;h=new he(l==y?u:r.resolve(y))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=l,y=l;for(let v=0;v<n.rangeCount;v++){let w=n.getRangeAt(v);m=Math.min(m,t.docView.posFromDOM(w.startContainer,w.startOffset,1)),y=Math.max(y,t.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[d,l]=y==t.state.selection.anchor?[y,m]:[m,y],u=r.resolve(l)}else d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!h){let m=e=="pointer"||t.state.selection.head<u.pos&&!o?1:-1;h=ny(t,p,u,m)}return h}function cT(t){return t.editable?t.hasFocus():dT(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function _i(t,e=!1){let n=t.state.selection;if(uT(t,n),!!cT(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Zt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Eo(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)wL(t);else{let{anchor:r,head:i}=n,o,l;V1&&!(n instanceof ke)&&(n.$from.parent.inlineContent||(o=F1(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=F1(t,n.to))),t.docView.setSelection(r,i,t,e),V1&&(o&&G1(o),l&&G1(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&vL(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const V1=an||Zt&&YE<63;function F1(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(an&&i&&i.contentEditable=="false")return mg(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return mg(i);if(o)return mg(o)}}function mg(t){return t.contentEditable="true",an&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function G1(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function vL(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!cT(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function wL(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Xt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&An&&Ss<=11&&(n.disabled=!0,n.disabled=!1)}function uT(t,e){if(e instanceof he){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(K1(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else K1(t)}function K1(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function ny(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ke.between(e,n,r)}function W1(t){return t.editable&&!t.hasFocus()?!1:dT(t)}function dT(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xL(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Eo(e.node,e.offset,n.anchorNode,n.anchorOffset)}function d0(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&we.findFrom(o,e)}function ds(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function J1(t,e,n){let r=t.state.selection;if(r instanceof ke)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return ds(t,new ke(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=d0(t.state,e);return i&&i instanceof he?ds(t,i):!1}else if(!(ir&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=t.docView.descAt(u))&&!l.contentDOM?he.isSelectable(o)?ds(t,new he(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):ru?ds(t,new ke(t.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof he&&r.node.isInline)return ds(t,new ke(e>0?r.$to:r.$from));{let i=d0(t.state,e);return i?ds(t,i):!1}}}function wf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Sc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ca(t,e){return e<0?SL(t):kL(t)}function SL(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,l=!1;for(or&&n.nodeType==1&&r<wf(n)&&Sc(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let u=n.childNodes[r-1];if(Sc(u,-1))i=n,o=--r;else if(u.nodeType==3)n=u,r=n.nodeValue.length;else break}}else{if(fT(n))break;{let u=n.previousSibling;for(;u&&Sc(u,-1);)i=n.parentNode,o=Xt(u),u=u.previousSibling;if(u)n=u,r=wf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?f0(t,n,r):i&&f0(t,i,o)}function kL(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=wf(n),o,l;for(;;)if(r<i){if(n.nodeType!=1)break;let u=n.childNodes[r];if(Sc(u,1))o=n,l=++r;else break}else{if(fT(n))break;{let u=n.nextSibling;for(;u&&Sc(u,1);)o=u.parentNode,l=Xt(u)+1,u=u.nextSibling;if(u)n=u,r=0,i=wf(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&f0(t,o,l)}function fT(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function EL(t,e){for(;t&&e==t.childNodes.length&&!nu(t);)e=Xt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function TL(t,e){for(;t&&!e&&!nu(t);)e=Xt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function f0(t,e,n){if(e.nodeType!=3){let o,l;(l=EL(e,n))?(e=l,n=0):(o=TL(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(vh(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&_i(t)},50)}function Y1(t,e){let n=t.state.doc.resolve(e);if(!(Zt||XE)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function X1(t,e,n){let r=t.state.selection;if(r instanceof ke&&!r.empty||n.indexOf("s")>-1||ir&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=d0(t.state,e);if(l&&l instanceof he)return ds(t,l)}if(!i.parent.inlineContent){let l=e<0?i:o,u=r instanceof Hn?we.near(l,e):we.findFrom(l,e);return u?ds(t,u):!1}return!1}function Q1(t,e){if(!(t.state.selection instanceof ke))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let l=t.state.tr;return e<0?l.delete(n.pos-o.nodeSize,n.pos):l.delete(n.pos,n.pos+o.nodeSize),t.dispatch(l),!0}return!1}function Z1(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function CL(t){if(!an||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Z1(t,r,"true"),setTimeout(()=>Z1(t,r,"false"),20)}return!1}function _L(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function AL(t,e){let n=e.keyCode,r=_L(e);if(n==8||ir&&n==72&&r=="c")return Q1(t,-1)||Ca(t,-1);if(n==46&&!e.shiftKey||ir&&n==68&&r=="c")return Q1(t,1)||Ca(t,1);if(n==13||n==27)return!0;if(n==37||ir&&n==66&&r=="c"){let i=n==37?Y1(t,t.state.selection.from)=="ltr"?-1:1:-1;return J1(t,i,r)||Ca(t,i)}else if(n==39||ir&&n==70&&r=="c"){let i=n==39?Y1(t,t.state.selection.from)=="ltr"?1:-1:1;return J1(t,i,r)||Ca(t,i)}else{if(n==38||ir&&n==80&&r=="c")return X1(t,-1,r)||Ca(t,-1);if(n==40||ir&&n==78&&r=="c")return CL(t)||X1(t,1,r)||Ca(t,1);if(r==(ir?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function ry(t,e){t.someProp("transformCopied",v=>{e=v(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let v=r.firstChild;n.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let l=t.someProp("clipboardSerializer")||Ao.fromSchema(t.state.schema),u=bT(),d=u.createElement("div");d.appendChild(l.serializeFragment(r,{document:u}));let h=d.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=yT[h.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let w=u.createElement(p[v]);for(;d.firstChild;)w.appendChild(d.firstChild);d.appendChild(w),m++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${o}${m?` -${m}`:""} ${JSON.stringify(n)}`);let y=t.someProp("clipboardTextSerializer",v=>v(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:y,slice:e}}function hT(t,e,n,r,i){let o=i.parent.type.spec.code,l,u;if(!n&&!e)return null;let d=!!e&&(r||o||!n);if(d){if(t.someProp("transformPastedText",y=>{e=y(e,o||r,t)}),o)return u=new ie(X.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",y=>{u=y(u,t,!0)}),u;let m=t.someProp("clipboardTextParser",y=>y(e,i,r,t));if(m)u=m;else{let y=i.marks(),{schema:v}=t.state,w=Ao.fromSchema(v);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let k=l.appendChild(document.createElement("p"));x&&k.appendChild(w.serializeNode(v.text(x,y)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),l=RL(n),ru&&DL(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let y=l.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;l=y}if(u||(u=(t.someProp("clipboardParser")||t.someProp("domParser")||xs.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:i,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!OL.test(y.parentNode.nodeName)?{ignore:!0}:null}})),p)u=jL(eS(u,+p[1],+p[2]),p[4]);else if(u=ie.maxOpen(NL(u.content,i),!0),u.openStart||u.openEnd){let m=0,y=0;for(let v=u.content.firstChild;m<u.openStart&&!v.type.spec.isolating;m++,v=v.firstChild);for(let v=u.content.lastChild;y<u.openEnd&&!v.type.spec.isolating;y++,v=v.lastChild);u=eS(u,m,y)}return t.someProp("transformPasted",m=>{u=m(u,t,d)}),u}const OL=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function NL(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,l=[];if(t.forEach(u=>{if(!l)return;let d=i.findWrapping(u.type),h;if(!d)return l=null;if(h=l.length&&o.length&&mT(d,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=gT(l[l.length-1],o.length));let p=pT(u,d);l.push(p),i=i.matchType(p.type),o=d}}),l)return X.from(l)}return t}function pT(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,X.from(t));return t}function mT(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=mT(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(X.from(pT(n,t,i+1))))}}function gT(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,gT(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(X.empty,!0);return t.copy(n.append(r))}function h0(t,e,n,r,i,o){let l=e<0?t.firstChild:t.lastChild,u=l.content;return t.childCount>1&&(o=0),i<r-1&&(u=h0(u,e,n,r,i+1,o)),i>=n&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=i).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(X.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(u))}function eS(t,e,n){return e<t.openStart&&(t=new ie(h0(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ie(h0(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const yT={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let tS=null;function bT(){return tS||(tS=document.implementation.createHTMLDocument("title"))}let gg=null;function ML(t){let e=window.trustedTypes;return e?(gg||(gg=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),gg.createHTML(t)):t}function RL(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=bT().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&yT[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=ML(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function DL(t){let e=t.querySelectorAll(Zt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function jL(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:l}=t;for(let u=r.length-2;u>=0;u-=2){let d=n.nodes[r[u]];if(!d||d.hasRequiredAttrs())break;i=X.from(d.create(r[u+1],i)),o++,l++}return new ie(i,o,l)}const gn={},yn={},LL={touchstart:!0,touchmove:!0};class zL{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function IL(t){for(let e in gn){let n=gn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{UL(t,r)&&!iy(t,r)&&(t.editable||!(r.type in yn))&&n(t,r)},LL[e]?{passive:!0}:void 0)}an&&t.dom.addEventListener("input",()=>null),p0(t)}function vs(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function BL(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function p0(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>iy(t,r))})}function iy(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function UL(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function $L(t,e){!iy(t,e)&&gn[e.type]&&(t.editable||!(e.type in yn))&&gn[e.type](t,e)}yn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!wT(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ki&&Zt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Va&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,uo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||AL(t,n)?n.preventDefault():vs(t,"key")};yn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};yn.keypress=(t,e)=>{let n=e;if(wT(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ir&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ke)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function xh(t){return{left:t.clientX,top:t.clientY}}function PL(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function sy(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(t.someProp(e,u=>l>o.depth?u(t,n,o.nodeAfter,o.before(l),i,!0):u(t,n,o.node(l),o.before(l),i,!1)))return!0;return!1}function Ua(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function HL(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&he.isSelectable(r)?(Ua(t,new he(n)),!0):!1}function qL(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof he&&(r=n.node);let o=t.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(he.isSelectable(u)){r&&n.$from.depth>0&&l>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(l);break}}return i!=null?(Ua(t,he.create(t.state.doc,i)),!0):!1}function VL(t,e,n,r,i){return sy(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?qL(t,n):HL(t,n))}function FL(t,e,n,r){return sy(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function GL(t,e,n,r){return sy(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||KL(t,n,r)}function KL(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ua(t,ke.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),u=i.before(o);if(l.inlineContent)Ua(t,ke.create(r,u+1,u+1+l.content.size));else if(he.isSelectable(l))Ua(t,he.create(r,u));else continue;return!0}}function oy(t){return xf(t)}const vT=ir?"metaKey":"ctrlKey";gn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=oy(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&PL(n,t.input.lastClick)&&!n[vT]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let l=t.posAtCoords(xh(n));l&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new WL(t,l,n,!!r)):(o=="doubleClick"?FL:GL)(t,l.pos,l.inside,n)?n.preventDefault():vs(t,"pointer"))};class WL{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[vT],this.allowDefault=r.shiftKey;let o,l;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),l=n.inside;else{let p=e.state.doc.resolve(n.pos);o=p.parent,l=p.depth?p.before():0}const u=i?null:r.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof he&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&or&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),vs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>_i(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(xh(e))),this.updateAllowDefault(e),this.allowDefault||!n?vs(this.view,"pointer"):VL(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||an&&this.mightDrag&&!this.mightDrag.node.isAtom||Zt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ua(this.view,we.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):vs(this.view,"pointer")}move(e){this.updateAllowDefault(e),vs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}gn.touchstart=t=>{t.input.lastTouch=Date.now(),oy(t),vs(t,"pointer")};gn.touchmove=t=>{t.input.lastTouch=Date.now(),vs(t,"pointer")};gn.contextmenu=t=>oy(t);function wT(t,e){return t.composing?!0:an&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const JL=ki?5e3:-1;yn.compositionstart=yn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ke&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Zt&&XE&&YL(t)))t.markCursor=t.state.storedMarks||n.marks(),xf(t,!0),t.markCursor=null;else if(xf(t,!e.selection.empty),or&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=t.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}t.input.composing=!0}xT(t,JL)};function YL(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}yn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,xT(t,20))};function xT(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>xf(t),e))}function ST(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=QL());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function XL(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=q3(e.focusNode,e.focusOffset),r=V3(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function QL(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function xf(t,e=!1){if(!(ki&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),ST(t),e||t.docView&&t.docView.dirty){let n=ty(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function ZL(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const qc=An&&Ss<15||Va&&W3<604;gn.copy=yn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=qc?null:n.clipboardData,l=r.content(),{dom:u,text:d}=ry(t,l);o?(n.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",d)):ZL(t,u),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ez(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function tz(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Vc(t,r.value,null,i,e):Vc(t,r.textContent,r.innerHTML,i,e)},50)}function Vc(t,e,n,r,i){let o=hT(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,i,o||ie.empty)))return!0;if(!o)return!1;let l=ez(o),u=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(o);return t.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function kT(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}yn.paste=(t,e)=>{let n=e;if(t.composing&&!ki)return;let r=qc?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Vc(t,kT(r),r.getData("text/html"),i,n)?n.preventDefault():tz(t,n)};class ET{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const nz=ir?"altKey":"ctrlKey";function TT(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[nz]}gn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(xh(n)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof he?i.to-1:i.to))){if(r&&r.mightDrag)l=he.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(l=he.create(t.state.doc,m.posBefore))}}let u=(l||t.state.selection).content(),{dom:d,text:h,slice:p}=ry(t,u);(!n.dataTransfer.files.length||!Zt||YE>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(qc?"Text":"text/html",d.innerHTML),n.dataTransfer.effectAllowed="copyMove",qc||n.dataTransfer.setData("text/plain",h),t.dragging=new ET(p,TT(t,n),l)};gn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};yn.dragover=yn.dragenter=(t,e)=>e.preventDefault();yn.drop=(t,e)=>{try{rz(t,e,t.dragging)}finally{t.dragging=null}};function rz(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(xh(e));if(!r)return;let i=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",v=>{o=v(o,t,!1)}):o=hT(t,kT(e.dataTransfer),qc?null:e.dataTransfer.getData("text/html"),!1,i);let l=!!(n&&TT(t,e));if(t.someProp("handleDrop",v=>v(t,e,o||ie.empty,l))){e.preventDefault();return}if(!o)return;e.preventDefault();let u=o?AE(t.state.doc,i.pos,o):i.pos;u==null&&(u=i.pos);let d=t.state.tr;if(l){let{node:v}=n;v?v.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=d.doc;if(p?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(m))return;let y=d.doc.resolve(h);if(p&&he.isSelectable(o.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new he(y));else{let v=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((w,x,k,T)=>v=T),d.setSelection(ny(t,y,d.doc.resolve(v)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}gn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&_i(t)},20))};gn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};gn.beforeinput=(t,e)=>{if(Zt&&ki&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,uo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in yn)gn[t]=yn[t];function Fc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Sf{constructor(e,n){this.toDOM=e,this.spec=n||vo,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:l}=e.mapResult(n.from+i,this.side<0?-1:1);return l?null:new mn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Sf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Fc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Es{constructor(e,n){this.attrs=e,this.spec=n||vo}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new mn(o,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Es&&Fc(this.attrs,e.attrs)&&Fc(this.spec,e.spec)}static is(e){return e.type instanceof Es}destroy(){}}class ay{constructor(e,n){this.attrs=e,this.spec=n||vo}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let l=e.mapResult(n.to+i,-1);return l.deleted||l.pos<=o.pos?null:new mn(o.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof ay&&Fc(this.attrs,e.attrs)&&Fc(this.spec,e.spec)}destroy(){}}class mn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new mn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new mn(e,e,new Sf(n,r))}static inline(e,n,r,i){return new mn(e,n,new Es(r,i))}static node(e,n,r,i){return new mn(e,n,new ay(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Es}get widget(){return this.type instanceof Sf}}const Da=[],vo={};class ut{constructor(e,n){this.local=e.length?e:Da,this.children=n.length?n:Da}static create(e,n){return n.length?kf(n,e,0,vo):on}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=n&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,n-u,r,i+u,o)}}map(e,n,r){return this==on||e.maps.length==0?this:this.mapInner(e,n,0,0,r||vo)}mapInner(e,n,r,i,o){let l;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,r,i);d&&d.type.valid(n,d)?(l||(l=[])).push(d):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?iz(this.children,l||[],e,n,r,i,o):l?new ut(l.sort(wo),Da):on}add(e,n){return n.length?this==on?ut.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((u,d)=>{let h=d+r,p;if(p=_T(n,u,h)){for(i||(i=this.children.slice());o<i.length&&i[o]<d;)o+=3;i[o]==d?i[o+2]=i[o+2].addInner(u,p,h+1):i.splice(o,0,d,d+u.nodeSize,kf(p,u,h+1,vo)),o+=3}});let l=CT(o?AT(n):n,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new ut(l.length?this.local.concat(l).sort(wo):this.local,i||this.children)}remove(e){return e.length==0||this==on?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+n,d=r[o+1]+n;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<d&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,u+1);h!=on?r[o+2]=h:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<i.length;u++)i[u].eq(l,n)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ut(i,r):on}forChild(e,n){if(this==on)return this;if(n.isLeaf)return ut.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+n.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<l&&d.to>o&&d.type instanceof Es){let h=Math.max(o,d.from)-o,p=Math.min(l,d.to)-o;h<p&&(i||(i=[])).push(d.copy(h,p))}}if(i){let u=new ut(i.sort(wo),Da);return r?new ms([u,r]):u}return r||on}eq(e){if(this==e)return!0;if(!(e instanceof ut)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ly(this.localsInner(e))}localsInner(e){if(this==on)return Da;if(e.inlineContent||!this.local.some(Es.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Es||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ut.empty=new ut([],[]);ut.removeOverlap=ly;const on=ut.empty;class ms{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,vo));return ms.from(r)}forChild(e,n){if(n.isLeaf)return ut.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=on&&(o instanceof ms?r=r.concat(o.members):r.push(o))}return ms.from(r)}eq(e){if(!(e instanceof ms)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let l=0;l<o.length;l++)n.push(o[l])}}return n?ly(r?n:n.sort(wo)):Da}static from(e){switch(e.length){case 0:return on;case 1:return e[0];default:return new ms(e.every(n=>n instanceof ut)?e:e.reduce((n,r)=>n.concat(r instanceof ut?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function iz(t,e,n,r,i,o,l){let u=t.slice();for(let h=0,p=o;h<n.maps.length;h++){let m=0;n.maps[h].forEach((y,v,w,x)=>{let k=x-w-(v-y);for(let T=0;T<u.length;T+=3){let _=u[T+1];if(_<0||y>_+p-m)continue;let A=u[T]+p-m;v>=A?u[T+1]=y<=A?-2:-1:y>=p&&k&&(u[T]+=k,u[T+1]+=k)}m+=k}),p=n.maps[h].map(p,-1)}let d=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){d=!0,u[h+1]=-1;continue}let p=n.map(t[h]+o),m=p-i;if(m<0||m>=r.content.size){d=!0;continue}let y=n.map(t[h+1]+o,-1),v=y-i,{index:w,offset:x}=r.content.findIndex(m),k=r.maybeChild(w);if(k&&x==m&&x+k.nodeSize==v){let T=u[h+2].mapInner(n,k,p+1,t[h]+o+1,l);T!=on?(u[h]=m,u[h+1]=v,u[h+2]=T):(u[h+1]=-2,d=!0)}else d=!0}if(d){let h=sz(u,t,e,n,i,o,l),p=kf(h,r,0,l);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,y=0;m<p.children.length;m+=3){let v=p.children[m];for(;y<u.length&&u[y]<v;)y+=3;u.splice(y,0,p.children[m],p.children[m+1],p.children[m+2])}}return new ut(e.sort(wo),u)}function CT(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new mn(i.from+e,i.to+e,i.type))}return n}function sz(t,e,n,r,i,o,l){function u(d,h){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(r,i,h);m?n.push(m):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)u(d.children[p+2],d.children[p]+h+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&u(t[d+2],e[d]+o+1);return n}function _T(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,l;o<t.length;o++)(l=t[o])&&l.from>n&&l.to<r&&((i||(i=[])).push(l),t[o]=null);return i}function AT(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function kf(t,e,n,r){let i=[],o=!1;e.forEach((u,d)=>{let h=_T(t,u,d+n);if(h){o=!0;let p=kf(h,u,n+d+1,r);p!=on&&i.push(d,d+u.nodeSize,p)}});let l=CT(o?AT(t):t,-n).sort(wo);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||i.length?new ut(l,i):on}function wo(t,e){return t.from-e.from||t.to-e.to}function ly(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),nS(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),nS(e,i,r.copy(o.from,r.to)));break}}}return e}function nS(t,e,n){for(;e<t.length&&wo(n,t[e])>0;)e++;t.splice(e,0,n)}function yg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=on&&e.push(r)}),t.cursorWrapper&&e.push(ut.create(t.state.doc,[t.cursorWrapper.deco])),ms.from(e)}const oz={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},az=An&&Ss<=11;class lz{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class cz{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new lz,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);An&&Ss<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():an&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),az&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,oz)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(W1(this.view)){if(this.suppressingSelectionUpdates)return _i(this.view);if(An&&Ss<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Eo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=qa(o))n.add(o);for(let o=e.anchorNode;o;o=qa(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&W1(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,d=[];if(e.editable)for(let p=0;p<n.length;p++){let m=this.registerMutation(n[p],d);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(d.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of d)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}else if(or&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,y]=p;m.parentNode&&m.parentNode.parentNode==y.parentNode?y.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let y of p){let v=y.parentNode;v&&v.nodeName=="LI"&&(!m||fz(e,m)!=v)&&y.remove()}}}let h=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&vh(r)&&(h=ty(e))&&h.eq(we.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,_i(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,l),uz(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,hz(e,d)),this.handleDOMChange(o,l,u,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||_i(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(An&&Ss<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:y}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(o=y)}let l=i&&i.parentNode==e.target?Xt(i)+1:0,u=r.localPosFromDOM(e.target,l,-1),d=o&&o.parentNode==e.target?Xt(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let rS=new WeakMap,iS=!1;function uz(t){if(!rS.has(t)&&(rS.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=or,iS)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),iS=!0}}function sS(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return Eo(l.node,l.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function dz(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return sS(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?sS(t,n):null}function fz(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function hz(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let o of e)if(((n=o.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let l=o.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let u=l;for(;;){let d=u.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;u=d}u.insertBefore(o,u.firstChild),r==o&&t.domSelection().collapse(o,i)}else o.parentNode.removeChild(o)}}function pz(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:l,to:u}=t.docView.parseRange(e,n),d=t.domSelectionRange(),h,p=d.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:d.anchorOffset}],vh(d)||h.push({node:d.focusNode,offset:d.focusOffset})),Zt&&t.input.lastKeyCode===8)for(let k=o;k>i;k--){let T=r.childNodes[k-1],_=T.pmViewDesc;if(T.nodeName=="BR"&&!_){o=k;break}if(!_||_.size)break}let m=t.state.doc,y=t.someProp("domParser")||xs.fromSchema(t.state.schema),v=m.resolve(l),w=null,x=y.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:i,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:mz,context:v});if(h&&h[0].pos!=null){let k=h[0].pos,T=h[1]&&h[1].pos;T==null&&(T=k),w={anchor:k+l,head:T+l}}return{doc:x,sel:w,from:l,to:u}}function mz(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(an&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||an&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const gz=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function yz(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let z=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,U=ty(t,z);if(U&&!t.state.selection.eq(U)){if(Zt&&ki&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ne=>ne(t,uo(13,"Enter"))))return;let Z=t.state.tr.setSelection(U);z=="pointer"?Z.setMeta("pointer",!0):z=="key"&&Z.scrollIntoView(),o&&Z.setMeta("composition",o),t.dispatch(Z)}return}let l=t.state.doc.resolve(e),u=l.sharedDepth(n);e=l.before(u+1),n=t.state.doc.resolve(n).after(u+1);let d=t.state.selection,h=pz(t,e,n),p=t.state.doc,m=p.slice(h.from,h.to),y,v;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(y=t.state.selection.to,v="end"):(y=t.state.selection.from,v="start"),t.input.lastKeyCode=null;let w=wz(m.content,h.doc.content,h.from,y,v);if(w&&t.input.domChangeCount++,(Va&&t.input.lastIOSEnter>Date.now()-225||ki)&&i.some(z=>z.nodeType==1&&!gz.test(z.nodeName))&&(!w||w.endA>=w.endB)&&t.someProp("handleKeyDown",z=>z(t,uo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!w)if(r&&d instanceof ke&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))w={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let z=oS(t,t.state.doc,h.sel);if(z&&!z.eq(t.state.selection)){let U=t.state.tr.setSelection(z);o&&U.setMeta("composition",o),t.dispatch(U)}}return}t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof ke&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),An&&Ss<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>h.from&&h.doc.textBetween(w.start-h.from-1,w.start-h.from+1)==" "&&(w.start--,w.endA--,w.endB--);let x=h.doc.resolveNoCache(w.start-h.from),k=h.doc.resolveNoCache(w.endB-h.from),T=p.resolve(w.start),_=x.sameParent(k)&&x.parent.inlineContent&&T.end()>=w.endA;if((Va&&t.input.lastIOSEnter>Date.now()-225&&(!_||i.some(z=>z.nodeName=="DIV"||z.nodeName=="P"))||!_&&x.pos<h.doc.content.size&&(!x.sameParent(k)||!x.parent.inlineContent)&&x.pos<k.pos&&!/\S/.test(h.doc.textBetween(x.pos,k.pos,"","")))&&t.someProp("handleKeyDown",z=>z(t,uo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>w.start&&vz(p,w.start,w.endA,x,k)&&t.someProp("handleKeyDown",z=>z(t,uo(8,"Backspace")))){ki&&Zt&&t.domObserver.suppressSelectionUpdates();return}Zt&&w.endB==w.start&&(t.input.lastChromeDelete=Date.now()),ki&&!_&&x.start()!=k.start()&&k.parentOffset==0&&x.depth==k.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==w.endA&&(w.endB-=2,k=h.doc.resolveNoCache(w.endB-h.from),setTimeout(()=>{t.someProp("handleKeyDown",function(z){return z(t,uo(13,"Enter"))})},20));let A=w.start,j=w.endA,I=z=>{let U=z||t.state.tr.replace(A,j,h.doc.slice(w.start-h.from,w.endB-h.from));if(h.sel){let Z=oS(t,U.doc,h.sel);Z&&!(Zt&&t.composing&&Z.empty&&(w.start!=w.endB||t.input.lastChromeDelete<Date.now()-100)&&(Z.head==A||Z.head==U.mapping.map(j)-1)||An&&Z.empty&&Z.head==A)&&U.setSelection(Z)}return o&&U.setMeta("composition",o),U.scrollIntoView()},N;if(_)if(x.pos==k.pos){An&&Ss<=11&&x.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>_i(t),20));let z=I(t.state.tr.delete(A,j)),U=p.resolve(w.start).marksAcross(p.resolve(w.endA));U&&z.ensureMarks(U),t.dispatch(z)}else if(w.endA==w.endB&&(N=bz(x.parent.content.cut(x.parentOffset,k.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start())))){let z=I(t.state.tr);N.type=="add"?z.addMark(A,j,N.mark):z.removeMark(A,j,N.mark),t.dispatch(z)}else if(x.parent.child(x.index()).isText&&x.index()==k.index()-(k.textOffset?0:1)){let z=x.parent.textBetween(x.parentOffset,k.parentOffset),U=()=>I(t.state.tr.insertText(z,A,j));t.someProp("handleTextInput",Z=>Z(t,A,j,z,U))||t.dispatch(U())}else t.dispatch(I());else t.dispatch(I())}function oS(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:ny(t,e.resolve(n.anchor),e.resolve(n.head))}function bz(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,l,u,d;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<n.length;p++)o=n[p].removeFromSet(o);if(i.length==1&&o.length==0)u=i[0],l="add",d=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&o.length==1)u=o[0],l="remove",d=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(d(e.child(p)));if(X.from(h).eq(t))return{mark:u,type:l}}function vz(t,e,n,r,i){if(n-e<=i.pos-r.pos||bg(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&n==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=t.resolve(bg(o,!0,!0));return!l.parent.isTextblock||l.pos>n||bg(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function bg(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function wz(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:l,b:u}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let d=Math.max(0,o-Math.min(l,u));r-=l+d-o}if(l<o&&t.size<e.size){let d=r<=o&&r>=l?o-r:0;o-=d,o&&o<e.size&&aS(e.textBetween(o-1,o+1))&&(o+=d?1:-1),u=o+(u-l),l=o}else if(u<o){let d=r<=o&&r>=u?o-r:0;o-=d,o&&o<t.size&&aS(t.textBetween(o-1,o+1))&&(o+=d?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function aS(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class OT{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new zL,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(fS),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=uS(this),cS(this),this.nodeViews=dS(this),this.docView=H1(this.state.doc,lS(this),yg(this),this.dom,this),this.domObserver=new cz(this,(r,i,o,l)=>yz(this,r,i,o,l)),this.domObserver.start(),IL(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&p0(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(fS),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(ST(this),l=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(u||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let v=dS(this);Sz(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(u||n.handleDOMEvents!=this._props.handleDOMEvents)&&p0(this),this.editable=uS(this),cS(this);let d=yg(this),h=lS(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,h,d);(m||!e.selection.eq(i.selection))&&(l=!0);let y=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&X3(this);if(l){this.domObserver.stop();let v=m&&(An||Zt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&xz(i.selection,e.selection);if(m){let w=Zt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=XL(this)),(o||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=H1(e.doc,h,d,this.dom,this)),w&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xL(this))?_i(this,v):(uT(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():y&&Q3(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof he){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&z1(this,n.getBoundingClientRect(),e)}else z1(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new ET(e.slice,e.move,i<0?void 0:he.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(i=n?n(u):u))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(i=n?n(u):u))return i}}hasFocus(){if(An){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Z3(this.dom),_i(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return iL(this,e)}coordsAtPos(e,n=1){return nT(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return cL(this,n||this.state,e)}pasteHTML(e,n){return Vc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Vc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return ry(this,e)}destroy(){this.docView&&(BL(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],yg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,P3())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return $L(this,e)}domSelectionRange(){let e=this.domSelection();return e?an&&this.root.nodeType===11&&G3(this.dom.ownerDocument)==this.dom&&dz(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}OT.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function lS(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[mn.node(0,t.state.doc.content.size,e)]}function cS(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:mn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function uS(t){return!t.someProp("editable",e=>e(t.state)===!1)}function xz(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function dS(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Sz(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function fS(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ts={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ef={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},kz=typeof navigator<"u"&&/Mac/.test(navigator.platform),Ez=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qt=0;Qt<10;Qt++)Ts[48+Qt]=Ts[96+Qt]=String(Qt);for(var Qt=1;Qt<=24;Qt++)Ts[Qt+111]="F"+Qt;for(var Qt=65;Qt<=90;Qt++)Ts[Qt]=String.fromCharCode(Qt+32),Ef[Qt]=String.fromCharCode(Qt);for(var vg in Ts)Ef.hasOwnProperty(vg)||(Ef[vg]=Ts[vg]);function Tz(t){var e=kz&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Ez&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ef:Ts)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Cz=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),_z=typeof navigator<"u"&&/Win/.test(navigator.platform);function Az(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,l;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Cz?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Oz(t){let e=Object.create(null);for(let n in t)e[Az(n)]=t[n];return e}function wg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Nz(t){return new ot({props:{handleKeyDown:cy(t)}})}function cy(t){let e=Oz(t);return function(n,r){let i=Tz(r),o,l=e[wg(i,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[wg(i,r,!1)];if(u&&u(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(_z&&r.ctrlKey&&r.altKey)&&(o=Ts[r.keyCode])&&o!=i){let u=e[wg(o,r)];if(u&&u(n.state,n.dispatch,n))return!0}}return!1}}var Mz=Object.defineProperty,uy=(t,e)=>{for(var n in e)Mz(t,n,{get:e[n],enumerable:!0})};function Sh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var kh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...h)=>{const p=u(...h)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l=[],u=!!t,d=t||i.tr,h=()=>(!u&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),l.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(n).map(([m,y])=>[m,(...w)=>{const x=this.buildProps(d,e),k=y(...w)(x);return l.push(k),p}])),run:h};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...h)=>d(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l={tr:t,editor:r,view:o,state:Sh({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([u,d])=>[u,(...h)=>d(...h)(l)]))}};return l}},NT={};uy(NT,{blur:()=>Rz,clearContent:()=>Dz,clearNodes:()=>jz,command:()=>Lz,createParagraphNear:()=>zz,cut:()=>Iz,deleteCurrentNode:()=>Bz,deleteNode:()=>Uz,deleteRange:()=>$z,deleteSelection:()=>Pz,enter:()=>Hz,exitCode:()=>qz,extendMarkRange:()=>Vz,first:()=>Fz,focus:()=>Kz,forEach:()=>Wz,insertContent:()=>Jz,insertContentAt:()=>Qz,joinBackward:()=>t4,joinDown:()=>e4,joinForward:()=>n4,joinItemBackward:()=>r4,joinItemForward:()=>i4,joinTextblockBackward:()=>s4,joinTextblockForward:()=>o4,joinUp:()=>Zz,keyboardShortcut:()=>l4,lift:()=>c4,liftEmptyBlock:()=>u4,liftListItem:()=>d4,newlineInCode:()=>f4,resetAttributes:()=>h4,scrollIntoView:()=>p4,selectAll:()=>m4,selectNodeBackward:()=>g4,selectNodeForward:()=>y4,selectParentNode:()=>b4,selectTextblockEnd:()=>v4,selectTextblockStart:()=>w4,setContent:()=>x4,setMark:()=>$4,setMeta:()=>P4,setNode:()=>H4,setNodeSelection:()=>q4,setTextDirection:()=>V4,setTextSelection:()=>F4,sinkListItem:()=>G4,splitBlock:()=>K4,splitListItem:()=>W4,toggleList:()=>J4,toggleMark:()=>Y4,toggleNode:()=>X4,toggleWrap:()=>Q4,undoInputRule:()=>Z4,unsetAllMarks:()=>e5,unsetMark:()=>t5,unsetTextDirection:()=>n5,updateAttributes:()=>r5,wrapIn:()=>i5,wrapInList:()=>s5});var Rz=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),Dz=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),jz=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:l})=>{t.doc.nodesBetween(o.pos,l.pos,(u,d)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,m=h.resolve(p.map(d)),y=h.resolve(p.map(d+u.nodeSize)),v=m.blockRange(y);if(!v)return;const w=Qa(v);if(u.type.isTextblock){const{defaultType:x}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(v.start,x)}(w||w===0)&&e.lift(v,w)})}),!0},Lz=t=>e=>t(e),zz=()=>({state:t,dispatch:e})=>FE(t,e),Iz=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new ke(r.doc.resolve(Math.max(l-1,0)))),!0},Bz=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const u=i.before(o),d=i.after(o);t.delete(u,d).scrollIntoView()}return!0}return!1};function _t(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Uz=t=>({tr:e,state:n,dispatch:r})=>{const i=_t(t,n.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(r){const d=o.before(l),h=o.after(l);e.delete(d,h).scrollIntoView()}return!0}return!1},$z=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Pz=()=>({state:t,dispatch:e})=>J0(t,e),Hz=()=>({commands:t})=>t.keyboardShortcut("Enter"),qz=()=>({state:t,dispatch:e})=>C3(t,e);function dy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Tf(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:dy(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function MT(t,e,n={}){return t.find(r=>r.type===e&&Tf(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function hS(t,e,n={}){return!!MT(t,e,n)}function fy(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!MT([...i.node.marks],e,n)))return;let l=i.index,u=t.start()+i.offset,d=l+1,h=u+i.node.nodeSize;for(;l>0&&hS([...t.parent.child(l-1).marks],e,n);)l-=1,u-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&hS([...t.parent.child(d).marks],e,n);)h+=t.parent.child(d).nodeSize,d+=1;return{from:u,to:h}}function Mi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Vz=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Mi(t,r.schema),{doc:l,selection:u}=n,{$from:d,from:h,to:p}=u;if(i){const m=fy(d,o,e);if(m&&m.from<=h&&m.to>=p){const y=ke.create(l,m.from,m.to);n.setSelection(y)}}return!0},Fz=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function hy(t){return t instanceof ke}function Ei(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function RT(t,e=null){if(!e)return null;const n=we.atStart(t),r=we.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?ke.create(t,Ei(0,i,o),Ei(t.content.size,i,o)):ke.create(t,Ei(e,i,o),Ei(e,i,o))}function pS(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Cf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Gz(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Kz=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Cf()||pS())&&r.dom.focus(),Gz()&&!Cf()&&!pS()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(o&&t===null&&!hy(n.state.selection))return l(),!0;const u=RT(i.doc,t)||n.state.selection,d=n.state.selection.eq(u);return o&&(d||i.setSelection(u),d&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},Wz=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Jz=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),DT=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&DT(r)}return t};function Bd(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return DT(n)}function Gc(t,e,n){if(t instanceof ws||t instanceof X)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return X.fromArray(t.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Gc("",e,n)}if(i){if(n.errorOnInvalidContent){let l=!1,u="";const d=new yE({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(n.slice?xs.fromSchema(d).parseSlice(Bd(t),n.parseOptions):xs.fromSchema(d).parse(Bd(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=xs.fromSchema(e);return n.slice?o.parseSlice(Bd(t),n.parseOptions).content:o.parse(Bd(t),n.parseOptions)}return Gc("",e,n)}function Yz(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof It||i instanceof Bt))return;const o=t.mapping.maps[r];let l=0;o.forEach((u,d,h,p)=>{l===0&&(l=p)}),t.setSelection(we.near(t.doc.resolve(l),n))}var Xz=t=>!("type"in t),Qz=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var l;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u;const d=k=>{o.emit("contentError",{editor:o,error:k,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Gc(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(k){d(k)}try{u=Gc(e,o.schema,{parseOptions:h,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(k){return d(k),!1}let{from:p,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},y=!0,v=!0;if((Xz(u)?u:[u]).forEach(k=>{k.check(),y=y?k.isText&&k.marks.length===0:!1,v=v?k.isBlock:!1}),p===m&&v){const{parent:k}=r.doc.resolve(p);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(p-=1,m+=1)}let x;if(y){if(Array.isArray(e))x=e.map(k=>k.text||"").join("");else if(e instanceof X){let k="";e.forEach(T=>{T.text&&(k+=T.text)}),x=k}else typeof e=="object"&&e&&e.text?x=e.text:x=e;r.insertText(x,p,m)}else{x=u;const k=r.doc.resolve(p),T=k.node(),_=k.parentOffset===0,A=T.isText||T.isTextblock,j=T.content.size>0;_&&A&&j&&(p=Math.max(0,p-1)),r.replaceWith(p,m,x)}n.updateSelection&&Yz(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:x}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:x})}return!0},Zz=()=>({state:t,dispatch:e})=>k3(t,e),e4=()=>({state:t,dispatch:e})=>E3(t,e),t4=()=>({state:t,dispatch:e})=>BE(t,e),n4=()=>({state:t,dispatch:e})=>HE(t,e),r4=()=>({state:t,dispatch:e,tr:n})=>{try{const r=gh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},i4=()=>({state:t,dispatch:e,tr:n})=>{try{const r=gh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},s4=()=>({state:t,dispatch:e})=>x3(t,e),o4=()=>({state:t,dispatch:e})=>S3(t,e);function jT(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function a4(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,l;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Cf()||jT()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var l4=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=a4(t).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{n.someProp("handleKeyDown",h=>h(n,u))});return d==null||d.steps.forEach(h=>{const p=h.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function Cs(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,l=e?_t(e,t.schema):null,u=[];t.doc.nodesBetween(r,i,(m,y)=>{if(m.isText)return;const v=Math.max(r,y),w=Math.min(i,y+m.nodeSize);u.push({node:m,from:v,to:w})});const d=i-r,h=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>Tf(m.node.attrs,n,{strict:!1}));return o?!!h.length:h.reduce((m,y)=>m+y.to-y.from,0)>=d}var c4=(t,e={})=>({state:n,dispatch:r})=>{const i=_t(t,n.schema);return Cs(n,i,e)?T3(n,r):!1},u4=()=>({state:t,dispatch:e})=>GE(t,e),d4=t=>({state:e,dispatch:n})=>{const r=_t(t,e.schema);return I3(r)(e,n)},f4=()=>({state:t,dispatch:e})=>VE(t,e);function Eh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function mS(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var h4=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const u=Eh(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(o=_t(t,r.schema)),u==="mark"&&(l=Mi(t,r.schema));let d=!1;return n.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,m)=>{o&&o===p.type&&(d=!0,i&&n.setNodeMarkup(m,void 0,mS(p.attrs,e))),l&&p.marks.length&&p.marks.forEach(y=>{l===y.type&&(d=!0,i&&n.addMark(m,m+p.nodeSize,l.create(mS(y.attrs,e))))})})}),d},p4=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),m4=()=>({tr:t,dispatch:e})=>{if(e){const n=new Hn(t.doc);t.setSelection(n)}return!0},g4=()=>({state:t,dispatch:e})=>$E(t,e),y4=()=>({state:t,dispatch:e})=>qE(t,e),b4=()=>({state:t,dispatch:e})=>O3(t,e),v4=()=>({state:t,dispatch:e})=>R3(t,e),w4=()=>({state:t,dispatch:e})=>M3(t,e);function m0(t,e,n={},r={}){return Gc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var x4=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:l,commands:u})=>{const{doc:d}=o;if(r.preserveWhitespace!=="full"){const h=m0(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return l&&o.replaceWith(0,d.content.size,h).setMeta("preventUpdate",!n),!0}return l&&o.setMeta("preventUpdate",!n),u.insertContentAt({from:0,to:d.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function LT(t,e){const n=Mi(e,t.schema),{from:r,to:i,empty:o}=t.selection,l=[];o?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,d=>{l.push(...d.marks)});const u=l.find(d=>d.type.name===n.name);return u?{...u.attrs}:{}}function zT(t,e){const n=new DE(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function S4(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function k4(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function E4(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Th(t){return e=>E4(e.$from,t)}function de(t,e,n){return t.config[e]===void 0&&t.parent?de(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?de(t.parent,e,n):null}):t.config[e]}function py(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=de(e,"addExtensions",n);return r?[e,...py(r())]:e}).flat(10)}function my(t,e){const n=Ao.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function IT(t){return typeof t=="function"}function Ge(t,e=void 0,...n){return IT(t)?e?t.bind(e)(...n):t(...n):t}function T4(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Fa(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function BT(t){const e=[],{nodeExtensions:n,markExtensions:r}=Fa(t),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:i},d=de(l,"addGlobalAttributes",u);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([y,v])=>{e.push({type:m,name:y,attribute:{...o,...v}})})})})}),i.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},d=de(l,"addAttributes",u);if(!d)return;const h=d();Object.entries(h).forEach(([p,m])=>{const y={...o,...m};typeof(y==null?void 0:y.default)=="function"&&(y.default=y.default()),y!=null&&y.isRequired&&(y==null?void 0:y.default)===void 0&&delete y.default,e.push({type:l.name,name:p,attribute:y})})}),e}function At(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const u=o?String(o).split(" "):[],d=r[i]?r[i].split(" "):[],h=u.filter(p=>!d.includes(p));r[i]=[...d,...h].join(" ")}else if(i==="style"){const u=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;d.forEach(p=>{const[m,y]=p.split(":").map(v=>v.trim());h.set(m,y)}),u.forEach(p=>{const[m,y]=p.split(":").map(v=>v.trim());h.set(m,y)}),r[i]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[i]=o}),r},{})}function Kc(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>At(n,r),{})}function C4(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function gS(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(n):C4(n.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...r,...i}}}}function yS(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&T4(n)?!1:n!=null))}function bS(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function _4(t,e){var n;const r=BT(t),{nodeExtensions:i,markExtensions:o}=Fa(t),l=(n=i.find(h=>de(h,"topNode")))==null?void 0:n.name,u=Object.fromEntries(i.map(h=>{const p=r.filter(T=>T.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},y=t.reduce((T,_)=>{const A=de(_,"extendNodeSchema",m);return{...T,...A?A(h):{}}},{}),v=yS({...y,content:Ge(de(h,"content",m)),marks:Ge(de(h,"marks",m)),group:Ge(de(h,"group",m)),inline:Ge(de(h,"inline",m)),atom:Ge(de(h,"atom",m)),selectable:Ge(de(h,"selectable",m)),draggable:Ge(de(h,"draggable",m)),code:Ge(de(h,"code",m)),whitespace:Ge(de(h,"whitespace",m)),linebreakReplacement:Ge(de(h,"linebreakReplacement",m)),defining:Ge(de(h,"defining",m)),isolating:Ge(de(h,"isolating",m)),attrs:Object.fromEntries(p.map(bS))}),w=Ge(de(h,"parseHTML",m));w&&(v.parseDOM=w.map(T=>gS(T,p)));const x=de(h,"renderHTML",m);x&&(v.toDOM=T=>x({node:T,HTMLAttributes:Kc(T,p)}));const k=de(h,"renderText",m);return k&&(v.toText=k),[h.name,v]})),d=Object.fromEntries(o.map(h=>{const p=r.filter(k=>k.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},y=t.reduce((k,T)=>{const _=de(T,"extendMarkSchema",m);return{...k,..._?_(h):{}}},{}),v=yS({...y,inclusive:Ge(de(h,"inclusive",m)),excludes:Ge(de(h,"excludes",m)),group:Ge(de(h,"group",m)),spanning:Ge(de(h,"spanning",m)),code:Ge(de(h,"code",m)),attrs:Object.fromEntries(p.map(bS))}),w=Ge(de(h,"parseHTML",m));w&&(v.parseDOM=w.map(k=>gS(k,p)));const x=de(h,"renderHTML",m);return x&&(v.toDOM=k=>x({mark:k,HTMLAttributes:Kc(k,p)})),[h.name,v]}));return new yE({topNode:l,nodes:u,marks:d})}function A4(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function _f(t){return t.sort((n,r)=>{const i=de(n,"priority")||100,o=de(r,"priority")||100;return i>o?-1:i<o?1:0})}function UT(t){const e=_f(py(t)),n=A4(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function $T(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:l={}}=n||{};let u="";return t.nodesBetween(r,i,(d,h,p,m)=>{var y;d.isBlock&&h>r&&(u+=o);const v=l==null?void 0:l[d.type.name];if(v)return p&&(u+=v({node:d,pos:h,parent:p,index:m,range:e})),!1;d.isText&&(u+=(y=d==null?void 0:d.text)==null?void 0:y.slice(Math.max(r,h)-h,i-h))}),u}function PT(t,e){const n={from:0,to:t.content.size};return $T(t,n,e)}function gy(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function O4(t,e){const n=_t(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function HT(t,e){const n=Eh(typeof e=="string"?e:e.name,t.schema);return n==="node"?O4(t,e):n==="mark"?LT(t,e):{}}function N4(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function M4(t){const e=N4(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,l)=>l!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function qT(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const l=[];if(i.ranges.length)i.forEach((u,d)=>{l.push({from:u,to:d})});else{const{from:u,to:d}=n[o];if(u===void 0||d===void 0)return;l.push({from:u,to:d})}l.forEach(({from:u,to:d})=>{const h=e.slice(o).map(u,-1),p=e.slice(o).map(d),m=e.invert().map(h,-1),y=e.invert().map(p);r.push({oldRange:{from:m,to:y},newRange:{from:h,to:p}})})}),M4(r)}function yy(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),l=fy(o,i.type);l&&r.push({mark:i,...l})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),r}var R4=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let o=r,l=null;for(;o>0&&l===null;){const u=i.node(o);(u==null?void 0:u.type.name)===e?l=u:o-=1}return[l,o]};function Ud(t,e){return e.nodes[t]||e.marks[t]||null}function of(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var D4=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,l,u)=>{var d,h;const p=((h=(d=i.type.spec).toText)==null?void 0:h.call(d,{node:i,pos:o,parent:l,index:u}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-o))}),n};function g0(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Mi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>Tf(m.attrs,n,{strict:!1}));let l=0;const u=[];if(i.forEach(({$from:m,$to:y})=>{const v=m.pos,w=y.pos;t.doc.nodesBetween(v,w,(x,k)=>{if(!x.isText&&!x.marks.length)return;const T=Math.max(v,k),_=Math.min(w,k+x.nodeSize),A=_-T;l+=A,u.push(...x.marks.map(j=>({mark:j,from:T,to:_})))})}),l===0)return!1;const d=u.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>Tf(m.mark.attrs,n,{strict:!1})).reduce((m,y)=>m+y.to-y.from,0),h=u.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,y)=>m+y.to-y.from,0);return(d>0?d+h:d)>=l}function j4(t,e,n={}){if(!e)return Cs(t,null,n)||g0(t,null,n);const r=Eh(e,t.schema);return r==="node"?Cs(t,e,n):r==="mark"?g0(t,e,n):!1}var L4=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const o=Th(u=>u.type.name===e)(t.selection);if(!o)return!1;const l=t.doc.resolve(o.pos+1);return i.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},z4=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function vS(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function wS(t,e){const{nodeExtensions:n}=Fa(e),r=n.find(l=>l.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Ge(de(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Ch(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(Ch(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function VT(t){return t instanceof he}var FT=class GT{constructor(e){this.position=e}static fromJSON(e){return new GT(e.position)}toJSON(){return{position:this.position}}};function I4(t,e){const n=e.mapping.mapResult(t.position);return{position:new FT(n.pos),mapResult:n}}function B4(t){return new FT(t)}function KT(t,e,n){const i=t.state.doc.content.size,o=Ei(e,0,i),l=Ei(n,0,i),u=t.coordsAtPos(o),d=t.coordsAtPos(l,-1),h=Math.min(u.top,d.top),p=Math.max(u.bottom,d.bottom),m=Math.min(u.left,d.left),y=Math.max(u.right,d.right),v=y-m,w=p-h,T={top:h,bottom:p,left:m,right:y,width:v,height:w,x:m,y:h};return{...T,toJSON:()=>T}}function U4(t,e,n){var r;const{selection:i}=e;let o=null;if(hy(i)&&(o=i.$cursor),o){const u=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(u)||!u.some(h=>h.type.excludes(n)))}const{ranges:l}=i;return l.some(({$from:u,$to:d})=>{let h=u.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(u.pos,d.pos,(p,m,y)=>{if(h)return!1;if(p.isInline){const v=!y||y.type.allowsMarkType(n),w=!!n.isInSet(p.marks)||!p.marks.some(x=>x.type.excludes(n));h=v&&w}return!h}),h})}var $4=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:l,ranges:u}=o,d=Mi(t,r.schema);if(i)if(l){const h=LT(r,d);n.addStoredMark(d.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(p,m,(y,v)=>{const w=Math.max(v,p),x=Math.min(v+y.nodeSize,m);y.marks.find(T=>T.type===d)?y.marks.forEach(T=>{d===T.type&&n.addMark(w,x,d.create({...T.attrs,...e}))}):n.addMark(w,x,d.create(e))})});return U4(r,n,d)},P4=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),H4=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=_t(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:u})=>D1(o,{...l,...e})(n)?!0:u.clearNodes()).command(({state:u})=>D1(o,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},q4=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Ei(t,0,r.content.size),o=he.create(r,i);e.setSelection(o)}return!0},V4=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=r;let l,u;return typeof e=="number"?(l=e,u=e):e&&"from"in e&&"to"in e?(l=e.from,u=e.to):(l=o.from,u=o.to),i&&n.doc.nodesBetween(l,u,(d,h)=>{d.isText||n.setNodeMarkup(h,void 0,{...d.attrs,dir:t})}),!0},F4=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,l=ke.atStart(r).from,u=ke.atEnd(r).to,d=Ei(i,l,u),h=Ei(o,l,u),p=ke.create(r,d,h);e.setSelection(p)}return!0},G4=t=>({state:e,dispatch:n})=>{const r=_t(t,e.schema);return $3(r)(e,n)};function xS(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var K4=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:l}=e,{$from:u,$to:d}=o,h=i.extensionManager.attributes,p=of(h,u.node().type.name,u.node().attrs);if(o instanceof he&&o.node.isBlock)return!u.parentOffset||!Ci(l,u.pos)?!1:(r&&(t&&xS(n,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,y=u.depth===0?void 0:S4(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=m&&y?[{type:y,attrs:p}]:void 0,w=Ci(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!w&&Ci(e.doc,e.mapping.map(u.pos),1,y?[{type:y}]:void 0)&&(w=!0,v=y?[{type:y,attrs:p}]:void 0),r){if(w&&(o instanceof ke&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),y&&!m&&!u.parentOffset&&u.parent.type!==y)){const x=e.mapping.map(u.before()),k=e.doc.resolve(x);u.node(-1).canReplaceWith(k.index(),k.index()+1,y)&&e.setNodeMarkup(e.mapping.map(u.before()),y)}t&&xS(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return w},W4=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var l;const u=_t(t,r.schema),{$from:d,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(h))return!1;const m=d.node(-1);if(m.type!==u)return!1;const y=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(i){let T=X.empty;const _=d.index(-1)?1:d.index(-2)?2:3;for(let U=d.depth-_;U>=d.depth-3;U-=1)T=X.from(d.node(U).copy(T));const A=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,j={...of(y,d.node().type.name,d.node().attrs),...e},I=((l=u.contentMatch.defaultType)==null?void 0:l.createAndFill(j))||void 0;T=T.append(X.from(u.createAndFill(null,I)||void 0));const N=d.before(d.depth-(_-1));n.replace(N,d.after(-A),new ie(T,4-_,0));let z=-1;n.doc.nodesBetween(N,n.doc.content.size,(U,Z)=>{if(z>-1)return!1;U.isTextblock&&U.content.size===0&&(z=Z+1)}),z>-1&&n.setSelection(ke.near(n.doc.resolve(z))),n.scrollIntoView()}return!0}const v=h.pos===d.end()?m.contentMatchAt(0).defaultType:null,w={...of(y,m.type.name,m.attrs),...e},x={...of(y,d.node().type.name,d.node().attrs),...e};n.delete(d.pos,h.pos);const k=v?[{type:u,attrs:w},{type:v,attrs:x}]:[{type:u,attrs:w}];if(!Ci(n.doc,d.pos,2))return!1;if(i){const{selection:T,storedMarks:_}=r,{splittableMarks:A}=o.extensionManager,j=_||T.$to.parentOffset&&T.$from.marks();if(n.split(d.pos,2,k).scrollIntoView(),!j||!i)return!0;const I=j.filter(N=>A.includes(N.type.name));n.ensureMarks(I)}return!0},xg=(t,e)=>{const n=Th(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Os(t.doc,n.pos)&&t.join(n.pos),!0},Sg=(t,e)=>{const n=Th(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Os(t.doc,r)&&t.join(r),!0},J4=(t,e,n,r={})=>({editor:i,tr:o,state:l,dispatch:u,chain:d,commands:h,can:p})=>{const{extensions:m,splittableMarks:y}=i.extensionManager,v=_t(t,l.schema),w=_t(e,l.schema),{selection:x,storedMarks:k}=l,{$from:T,$to:_}=x,A=T.blockRange(_),j=k||x.$to.parentOffset&&x.$from.marks();if(!A)return!1;const I=Th(N=>wS(N.type.name,m))(x);if(A.depth>=1&&I&&A.depth-I.depth<=1){if(I.node.type===v)return h.liftListItem(w);if(wS(I.node.type.name,m)&&v.validContent(I.node.content)&&u)return d().command(()=>(o.setNodeMarkup(I.pos,v),!0)).command(()=>xg(o,v)).command(()=>Sg(o,v)).run()}return!n||!j||!u?d().command(()=>p().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>xg(o,v)).command(()=>Sg(o,v)).run():d().command(()=>{const N=p().wrapInList(v,r),z=j.filter(U=>y.includes(U.type.name));return o.ensureMarks(z),N?!0:h.clearNodes()}).wrapInList(v,r).command(()=>xg(o,v)).command(()=>Sg(o,v)).run()},Y4=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,l=Mi(t,r.schema);return g0(r,l,e)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,e)},X4=(t,e,n={})=>({state:r,commands:i})=>{const o=_t(t,r.schema),l=_t(e,r.schema),u=Cs(r,o,n);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),u?i.setNode(l,d):i.setNode(o,{...d,...n})},Q4=(t,e={})=>({state:n,commands:r})=>{const i=_t(t,n.schema);return Cs(n,i,e)?r.lift(i):r.wrapIn(i,e)},Z4=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const l=t.tr,u=o.transform;for(let d=u.steps.length-1;d>=0;d-=1)l.step(u.steps[d].invert(u.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,t.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},e5=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},t5=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=n,d=Mi(t,r.schema),{$from:h,empty:p,ranges:m}=u;if(!i)return!0;if(p&&l){let{from:y,to:v}=u;const w=(o=h.marks().find(k=>k.type===d))==null?void 0:o.attrs,x=fy(h,d,w);x&&(y=x.from,v=x.to),n.removeMark(y,v,d)}else m.forEach(y=>{n.removeMark(y.$from.pos,y.$to.pos,d)});return n.removeStoredMark(d),!0},n5=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let o,l;return typeof t=="number"?(o=t,l=t):t&&"from"in t&&"to"in t?(o=t.from,l=t.to):(o=i.from,l=i.to),r&&e.doc.nodesBetween(o,l,(u,d)=>{if(u.isText)return;const h={...u.attrs};delete h.dir,e.setNodeMarkup(d,void 0,h)}),!0},r5=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const u=Eh(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(o=_t(t,r.schema)),u==="mark"&&(l=Mi(t,r.schema));let d=!1;return n.selection.ranges.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;let y,v,w,x;n.selection.empty?r.doc.nodesBetween(p,m,(k,T)=>{o&&o===k.type&&(d=!0,w=Math.max(T,p),x=Math.min(T+k.nodeSize,m),y=T,v=k)}):r.doc.nodesBetween(p,m,(k,T)=>{T<p&&o&&o===k.type&&(d=!0,w=Math.max(T,p),x=Math.min(T+k.nodeSize,m),y=T,v=k),T>=p&&T<=m&&(o&&o===k.type&&(d=!0,i&&n.setNodeMarkup(T,void 0,{...k.attrs,...e})),l&&k.marks.length&&k.marks.forEach(_=>{if(l===_.type&&(d=!0,i)){const A=Math.max(T,p),j=Math.min(T+k.nodeSize,m);n.addMark(A,j,l.create({..._.attrs,...e}))}}))}),v&&(y!==void 0&&i&&n.setNodeMarkup(y,void 0,{...v.attrs,...e}),l&&v.marks.length&&v.marks.forEach(k=>{l===k.type&&i&&n.addMark(w,x,l.create({...k.attrs,...e}))}))}),d},i5=(t,e={})=>({state:n,dispatch:r})=>{const i=_t(t,n.schema);return D3(i,e)(n,r)},s5=(t,e={})=>({state:n,dispatch:r})=>{const i=_t(t,n.schema);return j3(i,e)(n,r)},o5=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},_h=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},a5=(t,e)=>{if(dy(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function $d(t){var e;const{editor:n,from:r,to:i,text:o,rules:l,plugin:u}=t,{view:d}=n;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(y=>y.type.spec.code))return!1;let p=!1;const m=D4(h)+o;return l.forEach(y=>{if(p)return;const v=a5(m,y.find);if(!v)return;const w=d.state.tr,x=Sh({state:d.state,transaction:w}),k={from:r-(v[0].length-o.length),to:i},{commands:T,chain:_,can:A}=new kh({editor:n,state:x});y.handler({state:x,range:k,match:v,commands:T,chain:_,can:A})===null||!w.steps.length||(y.undoable&&w.setMeta(u,{transform:w,from:r,to:i,text:o}),d.dispatch(w),p=!0)}),p}function l5(t){const{editor:e,rules:n}=t,r=new ot({state:{init(){return null},apply(i,o,l){const u=i.getMeta(r);if(u)return u;const d=i.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=my(X.from(p),l.schema);const{from:m}=d,y=m+p.length;$d({editor:e,from:m,to:y,text:p,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,l,u){return $d({editor:e,from:o,to:l,text:u,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&$d({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?$d({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function c5(t){return Object.prototype.toString.call(t).slice(8,-1)}function Pd(t){return c5(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function WT(t,e){const n={...t};return Pd(t)&&Pd(e)&&Object.keys(e).forEach(r=>{Pd(e[r])&&Pd(t[r])?n[r]=WT(t[r],e[r]):n[r]=e[r]}),n}var by=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ge(de(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ge(de(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>WT(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Oo=class JT extends by{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new JT(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(h=>(h==null?void 0:h.type.name)===n.name))return!1;const d=l.find(h=>(h==null?void 0:h.type.name)===n.name);return d&&r.removeStoredMark(d),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function u5(t){return typeof t=="number"}var d5=class{constructor(t){this.find=t.find,this.handler=t.handler}},f5=(t,e,n)=>{if(dy(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function h5(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:l,dropEvent:u}=t,{commands:d,chain:h,can:p}=new kh({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,i,(v,w)=>{var x,k,T,_,A;if((k=(x=v.type)==null?void 0:x.spec)!=null&&k.code||!(v.isText||v.isTextblock||v.isInline))return;const j=(A=(_=(T=v.content)==null?void 0:T.size)!=null?_:v.nodeSize)!=null?A:0,I=Math.max(r,w),N=Math.min(i,w+j);if(I>=N)return;const z=v.isText?v.text||"":v.textBetween(I-w,N-w,void 0,"");f5(z,o.find,l).forEach(Z=>{if(Z.index===void 0)return;const ne=I+Z.index+1,Ee=ne+Z[0].length,le={from:n.tr.mapping.map(ne),to:n.tr.mapping.map(Ee)},Be=o.handler({state:n,range:le,match:Z,commands:d,chain:h,can:p,pasteEvent:l,dropEvent:u});m.push(Be)})}),m.every(v=>v!==null)}var Hd=null,p5=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function m5(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:p,from:m,to:y,rule:v,pasteEvt:w})=>{const x=p.tr,k=Sh({state:p,transaction:x});if(!(!h5({editor:e,state:k,from:Math.max(m-1,0),to:y.b-1,rule:v,pasteEvent:w,dropEvent:u})||!x.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return n.map(p=>new ot({view(m){const y=w=>{var x;r=(x=m.dom.parentElement)!=null&&x.contains(w.target)?m.dom.parentElement:null,r&&(Hd=e)},v=()=>{Hd&&(Hd=null)};return window.addEventListener("dragstart",y),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",y),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(m,y)=>{if(o=r===m.dom.parentElement,u=y,!o){const v=Hd;v!=null&&v.isEditable&&setTimeout(()=>{const w=v.state.selection;w&&v.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,y)=>{var v;const w=(v=y.clipboardData)==null?void 0:v.getData("text/html");return l=y,i=!!(w!=null&&w.includes("data-pm-slice")),!1}}},appendTransaction:(m,y,v)=>{const w=m[0],x=w.getMeta("uiEvent")==="paste"&&!i,k=w.getMeta("uiEvent")==="drop"&&!o,T=w.getMeta("applyPasteRules"),_=!!T;if(!x&&!k&&!_)return;if(_){let{text:I}=T;typeof I=="string"?I=I:I=my(X.from(I),v.schema);const{from:N}=T,z=N+I.length,U=p5(I);return d({rule:p,state:v,from:N,to:{b:z},pasteEvt:U})}const A=y.doc.content.findDiffStart(v.doc.content),j=y.doc.content.findDiffEnd(v.doc.content);if(!(!u5(A)||!j||A===j.b))return d({rule:p,state:v,from:A,to:j,pasteEvt:l})}}))}var Ah=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=UT(t),this.schema=_4(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ud(e.name,this.schema)},r=de(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return _f([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Ud(r.name,this.schema)},o=[],l=de(r,"addKeyboardShortcuts",i);let u={};if(r.type==="mark"&&de(r,"exitable",i)&&(u.ArrowRight=()=>Oo.handleExit({editor:t,mark:r})),l){const y=Object.fromEntries(Object.entries(l()).map(([v,w])=>[v,()=>w({editor:t})]));u={...u,...y}}const d=Nz(u);o.push(d);const h=de(r,"addInputRules",i);if(vS(r,t.options.enableInputRules)&&h){const y=h();if(y&&y.length){const v=l5({editor:t,rules:y}),w=Array.isArray(v)?v:[v];o.push(...w)}}const p=de(r,"addPasteRules",i);if(vS(r,t.options.enablePasteRules)&&p){const y=p();if(y&&y.length){const v=m5({editor:t,rules:y});o.push(...v)}}const m=de(r,"addProseMirrorPlugins",i);if(m){const y=m();o.push(...y)}return o})}get attributes(){return BT(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Fa(this.extensions);return Object.fromEntries(e.filter(n=>!!de(n,"addNodeView")).map(n=>{const r=this.attributes.filter(d=>d.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:_t(n.name,this.schema)},o=de(n,"addNodeView",i);if(!o)return[];const l=o();if(!l)return[];const u=(d,h,p,m,y)=>{const v=Kc(d,r);return l({node:d,view:h,getPos:p,decorations:m,innerDecorations:y,editor:t,extension:n,HTMLAttributes:v})};return[n.name,u]}))}dispatchTransaction(t){const{editor:e}=this;return _f([...this.extensions].reverse()).reduceRight((r,i)=>{const o={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Ud(i.name,this.schema)},l=de(i,"dispatchTransaction",o);return l?u=>{l.call(o,{transaction:u,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Fa(this.extensions);return Object.fromEntries(e.filter(n=>!!de(n,"addMarkView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Mi(n.name,this.schema)},o=de(n,"addMarkView",i);if(!o)return[];const l=(u,d,h)=>{const p=Kc(u,r);return o()({mark:u,view:d,inline:h,editor:t,extension:n,HTMLAttributes:p,updateAttributes:m=>{O5(u,t,m)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ud(e.name,this.schema)};e.type==="mark"&&((n=Ge(de(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=de(e,"onBeforeCreate",r),o=de(e,"onCreate",r),l=de(e,"onUpdate",r),u=de(e,"onSelectionUpdate",r),d=de(e,"onTransaction",r),h=de(e,"onFocus",r),p=de(e,"onBlur",r),m=de(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};Ah.resolve=UT;Ah.sort=_f;Ah.flatten=py;var g5={};uy(g5,{ClipboardTextSerializer:()=>XT,Commands:()=>QT,Delete:()=>ZT,Drop:()=>eC,Editable:()=>tC,FocusEvents:()=>rC,Keymap:()=>iC,Paste:()=>sC,Tabindex:()=>oC,TextDirection:()=>aC,focusEventsPluginKey:()=>nC});var ft=class YT extends by{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new YT(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},XT=ft.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ot({key:new lt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,l=Math.min(...o.map(p=>p.$from.pos)),u=Math.max(...o.map(p=>p.$to.pos)),d=gy(n);return $T(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),QT=ft.create({name:"commands",addCommands(){return{...NT}}}),ZT=ft.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var l,u,d,h;if((h=(d=(u=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:u.filterTransaction)==null?void 0:d.call(u,t))!=null?h:t.getMeta("y-sync$"))return;const p=zT(t.before,[t,...e]);qT(p).forEach(v=>{p.mapping.mapResult(v.oldRange.from).deletedAfter&&p.mapping.mapResult(v.oldRange.to).deletedBefore&&p.before.nodesBetween(v.oldRange.from,v.oldRange.to,(w,x)=>{const k=x+w.nodeSize-2,T=v.oldRange.from<=x&&k<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:w,from:x,to:k,newFrom:p.mapping.map(x),newTo:p.mapping.map(k),deletedRange:v.oldRange,newRange:v.newRange,partial:!T,editor:this.editor,transaction:t,combinedTransform:p})})});const y=p.mapping;p.steps.forEach((v,w)=>{var x,k;if(v instanceof Er){const T=y.slice(w).map(v.from,-1),_=y.slice(w).map(v.to),A=y.invert().map(T,-1),j=y.invert().map(_),I=(x=p.doc.nodeAt(T-1))==null?void 0:x.marks.some(z=>z.eq(v.mark)),N=(k=p.doc.nodeAt(_))==null?void 0:k.marks.some(z=>z.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:A,to:j},newRange:{from:T,to:_},partial:!!(N||I),editor:this.editor,transaction:t,combinedTransform:p})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),eC=ft.create({name:"drop",addProseMirrorPlugins(){return[new ot({key:new lt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),tC=ft.create({name:"editable",addProseMirrorPlugins(){return[new ot({key:new lt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),nC=new lt("focusEvents"),rC=ft.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ot({key:nC,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),iC=ft.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:d,doc:h}=u,{empty:p,$anchor:m}=d,{pos:y,parent:v}=m,w=m.parent.isTextblock&&y>0?u.doc.resolve(y-1):m,x=w.parent.type.spec.isolating,k=m.pos-m.parentOffset,T=x&&w.parent.childCount===1?k===m.pos:we.atStart(h).from===y;return!p||!v.type.isTextblock||v.textContent.length||!T||T&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Cf()||jT()?o:i},addProseMirrorPlugins(){return[new ot({key:new lt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(x=>x.getMeta("composition")))return;const r=t.some(x=>x.docChanged)&&!e.doc.eq(n.doc),i=t.some(x=>x.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:l,to:u}=e.selection,d=we.atStart(e.doc).from,h=we.atEnd(e.doc).to;if(o||!(l===d&&u===h)||!Ch(n.doc))return;const y=n.tr,v=Sh({state:n,transaction:y}),{commands:w}=new kh({editor:this.editor,state:v});if(w.clearNodes(),!!y.steps.length)return y}})]}}),sC=ft.create({name:"paste",addProseMirrorPlugins(){return[new ot({key:new lt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),oC=ft.create({name:"tabindex",addProseMirrorPlugins(){return[new ot({key:new lt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),aC=ft.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Fa(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new ot({key:new lt("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),y5=class mc{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new mc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new mc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new mc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,l=n.isInline,u=this.pos+r+(o?0:1);if(u<0||u>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(u);if(!i&&!l&&d.depth<=this.depth)return;const h=new mc(d,this.editor,i,i||l?n:null);i&&(h.actualDepth=this.depth+1),e.push(h)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,l=Object.keys(n);for(let u=0;u<l.length;u+=1){const d=l[u];if(o[d]!==n[d])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(l=>{r&&i.length>0||(l.node.type.name===e&&o.every(d=>n[d]===l.node.attrs[d])&&i.push(l),!(r&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},b5=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function v5(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var w5=class extends o5{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:I4,createMappablePosition:B4},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=RT(e,this.options.autofocus);this.editorState=za.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=v5(b5,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=IT(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(l=>!l.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[tC,XT.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),QT,rC,iC,oC,eC,sC,ZT,aC.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Ah(r,this)}createCommandManager(){this.commandManager=new kh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=m0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=m0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new OT(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(h=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(h)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),u=l==null?void 0:l.getMeta("focus"),d=l==null?void 0:l.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:l}),d&&this.emit("blur",{editor:this,event:d.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(h=>h.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return HT(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return j4(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return my(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return PT(this.state.doc,{blockSeparator:e,textSerializers:{...gy(this.schema),...n}})}get isEmpty(){return Ch(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new y5(e,this)}get $doc(){return this.$pos(0)}};function Ga(t){return new _h({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ge(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];if(l){const d=u.search(/\S/),h=n.from+u.indexOf(l),p=h+l.length;if(yy(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(x=>x===t.type&&x!==v.mark.type)).filter(v=>v.to>h).length)return null;p<n.to&&o.delete(p,n.to),h>n.from&&o.delete(n.from+d,h);const y=n.from+d+l.length;o.addMark(n.from+d,y,t.type.create(i||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function x5(t){return new _h({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ge(t.getAttributes,void 0,r)||{},{tr:o}=e,l=n.from;let u=n.to;const d=t.type.create(i);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(p,u,d)}else if(r[0]){const h=t.type.isInline?l:l-1;o.insert(h,t.type.create(i)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()},undoable:t.undoable})}function y0(t){return new _h({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Ge(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Ka(t){return new _h({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Ge(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),d=l.doc.resolve(n.from).blockRange(),h=d&&K0(d,t.type,o);if(!h)return null;if(l.wrap(d,h),t.keepMarks&&t.editor){const{selection:m,storedMarks:y}=e,{splittableMarks:v}=t.editor.extensionManager,w=y||m.$to.parentOffset&&m.$from.marks();if(w){const x=w.filter(k=>v.includes(k.type.name));l.ensureMarks(x)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,o).run()}const p=l.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&Os(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&l.join(n.from-1)},undoable:t.undoable})}function S5(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof he){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}var k5={};uy(k5,{createAtomBlockMarkdownSpec:()=>E5,createBlockMarkdownSpec:()=>T5,createInlineMarkdownSpec:()=>A5,parseAttributes:()=>vy,parseIndentedBlocks:()=>b0,renderNestedMarkdownContent:()=>xy,serializeAttributes:()=>wy});function vy(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,h=>(n.push(h),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const h=i.map(p=>p.trim().slice(1));e.class=h.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,h,p])=>{var m;const y=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),v=n[y];v&&(e[h]=v.slice(1,-1))});const d=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function wy(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function E5(t){const{nodeName:e,name:n,parseAttributes:r=vy,serializeAttributes:i=wy,defaultAttributes:o={},requiredAttributes:l=[],allowedAttributes:u}=t,d=n||e,h=p=>{if(!u)return p;const m={};return u.forEach(y=>{y in p&&(m[y]=p[y])}),m};return{parseMarkdown:(p,m)=>{const y={...o,...p.attributes};return m.createNode(e,y,[])},markdownTokenizer:{name:e,level:"block",start(p){var m;const y=new RegExp(`^:::${d}(?:\\s|$)`,"m"),v=(m=p.match(y))==null?void 0:m.index;return v!==void 0?v:-1},tokenize(p,m,y){const v=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),w=p.match(v);if(!w)return;const x=w[1]||"",k=r(x);if(!l.find(_=>!(_ in k)))return{type:e,raw:w[0],attributes:k}}},renderMarkdown:p=>{const m=h(p.attrs||{}),y=i(m),v=y?` {${y}}`:"";return`:::${d}${v} :::`}}}function T5(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=vy,serializeAttributes:o=wy,defaultAttributes:l={},content:u="block",allowedAttributes:d}=t,h=n||e,p=m=>{if(!d)return m;const y={};return d.forEach(v=>{v in m&&(y[v]=m[v])}),y};return{parseMarkdown:(m,y)=>{let v;if(r){const x=r(m);v=typeof x=="string"?[{type:"text",text:x}]:x}else u==="block"?v=y.parseChildren(m.tokens||[]):v=y.parseInline(m.tokens||[]);const w={...l,...m.attributes};return y.createNode(e,w,v)},markdownTokenizer:{name:e,level:"block",start(m){var y;const v=new RegExp(`^:::${h}`,"m"),w=(y=m.match(v))==null?void 0:y.index;return w!==void 0?w:-1},tokenize(m,y,v){var w;const x=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),k=m.match(x);if(!k)return;const[T,_=""]=k,A=i(_);let j=1;const I=T.length;let N="";const z=/^:::([\w-]*)(\s.*)?/gm,U=m.slice(I);for(z.lastIndex=0;;){const Z=z.exec(U);if(Z===null)break;const ne=Z.index,Ee=Z[1];if(!((w=Z[2])!=null&&w.endsWith(":::"))){if(Ee)j+=1;else if(j-=1,j===0){const le=U.slice(0,ne);N=le.trim();const Be=m.slice(0,I+ne+Z[0].length);let me=[];if(N)if(u==="block")for(me=v.blockTokens(le),me.forEach(xe=>{xe.text&&(!xe.tokens||xe.tokens.length===0)&&(xe.tokens=v.inlineTokens(xe.text))});me.length>0;){const xe=me[me.length-1];if(xe.type==="paragraph"&&(!xe.text||xe.text.trim()===""))me.pop();else break}else me=v.inlineTokens(N);return{type:e,raw:Be,attributes:A,content:N,tokens:me}}}}}},renderMarkdown:(m,y)=>{const v=p(m.attrs||{}),w=o(v),x=w?` {${w}}`:"",k=y.renderChildren(m.content||[],`

`);return`:::${h}${x}

${k}

:::`}}}function C5(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,o,l]=r;e[i]=o||l,r=n.exec(t)}return e}function _5(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function A5(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=C5,serializeAttributes:o=_5,defaultAttributes:l={},selfClosing:u=!1,allowedAttributes:d}=t,h=n||e,p=y=>{if(!d)return y;const v={};return d.forEach(w=>{const x=typeof w=="string"?w:w.name,k=typeof w=="string"?void 0:w.skipIfDefault;if(x in y){const T=y[x];if(k!==void 0&&T===k)return;v[x]=T}}),v},m=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(y,v)=>{const w={...l,...y.attributes};if(u)return v.createNode(e,w);const x=r?r(y):y.content||"";return x?v.createNode(e,w,[v.createTextNode(x)]):v.createNode(e,w,[])},markdownTokenizer:{name:e,level:"inline",start(y){const v=u?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),w=y.match(v),x=w==null?void 0:w.index;return x!==void 0?x:-1},tokenize(y,v,w){const x=u?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),k=y.match(x);if(!k)return;let T="",_="";if(u){const[,j]=k;_=j}else{const[,j,I]=k;_=j,T=I||""}const A=i(_.trim());return{type:e,raw:k[0],content:T.trim(),attributes:A}}},renderMarkdown:y=>{let v="";r?v=r(y):y.content&&y.content.length>0&&(v=y.content.filter(T=>T.type==="text").map(T=>T.text).join(""));const w=p(y.attrs||{}),x=o(w),k=x?` ${x}`:"";return u?`[${h}${k}]`:`[${h}${k}]${v}[/${h}]`}}}function b0(t,e,n){var r,i,o,l;const u=t.split(`
`),d=[];let h="",p=0;const m=e.baseIndentSize||2;for(;p<u.length;){const y=u[p],v=y.match(e.itemPattern);if(!v){if(d.length>0)break;if(y.trim()===""){p+=1,h=`${h}${y}
`;continue}else return}const w=e.extractItemData(v),{indentLevel:x,mainContent:k}=w;h=`${h}${y}
`;const T=[k];for(p+=1;p<u.length;){const I=u[p];if(I.trim()===""){const z=u.slice(p+1).findIndex(ne=>ne.trim()!=="");if(z===-1)break;if((((i=(r=u[p+1+z].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>x){T.push(I),h=`${h}${I}
`,p+=1;continue}else break}if((((l=(o=I.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:l.length)||0)>x)T.push(I),h=`${h}${I}
`,p+=1;else break}let _;const A=T.slice(1);if(A.length>0){const I=A.map(N=>N.slice(x+m)).join(`
`);I.trim()&&(e.customNestedParser?_=e.customNestedParser(I):_=n.blockTokens(I))}const j=e.createToken(w,_);d.push(j)}if(d.length!==0)return{items:d,raw:h}}function xy(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[o,...l]=t.content,u=e.renderChildren([o]),d=[`${i}${u}`];return l&&l.length>0&&l.forEach(h=>{const p=e.renderChildren([h]);if(p){const m=p.split(`
`).map(y=>y?e.indent(y):"").join(`
`);d.push(m)}}),d.join(`
`)}function O5(t,e,n={}){const{state:r}=e,{doc:i,tr:o}=r,l=t;i.descendants((u,d)=>{const h=o.mapping.map(d),p=o.mapping.map(d)+u.nodeSize;let m=null;if(u.marks.forEach(v=>{if(v!==l)return!1;m=v}),!m)return;let y=!1;if(Object.keys(n).forEach(v=>{n[v]!==m.attrs[v]&&(y=!0)}),y){const v=t.type.create({...t.attrs,...n});o.removeMark(h,p,t.type),o.addMark(h,p,v)}}),o.docChanged&&e.view.dispatch(o)}var Vn=class lC extends by{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new lC(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Co(t){return new d5({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Ge(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],d=r[0];let h=n.to;if(u){const p=d.search(/\S/),m=n.from+d.indexOf(u),y=m+u.length;if(yy(n.from,n.to,e.doc).filter(w=>w.mark.type.excluded.find(k=>k===t.type&&k!==w.mark.type)).filter(w=>w.to>m).length)return null;y<n.to&&l.delete(y,n.to),m>n.from&&l.delete(n.from+p,m),h=n.from+p+u.length,l.addMark(n.from+p,h,t.type.create(o||{})),l.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:N5,getOwnPropertySymbols:M5}=Object,{hasOwnProperty:R5}=Object.prototype;function kg(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function qd(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,l=o.get(n),u=o.get(r);if(l&&u)return l===r&&u===n;o.set(n,r),o.set(r,n);const d=t(n,r,i);return o.delete(n),o.delete(r),d}}function D5(t){return t!=null?t[Symbol.toStringTag]:void 0}function SS(t){return N5(t).concat(M5(t))}const j5=Object.hasOwn||((t,e)=>R5.call(t,e));function No(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const L5="__v",z5="__o",I5="_owner",{getOwnPropertyDescriptor:kS,keys:ES}=Object;function B5(t,e){return t.byteLength===e.byteLength&&Af(new Uint8Array(t),new Uint8Array(e))}function U5(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function $5(t,e){return t.byteLength===e.byteLength&&Af(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function P5(t,e){return No(t.getTime(),e.getTime())}function H5(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function q5(t,e){return t===e}function TS(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let l,u,d=0;for(;(l=o.next())&&!l.done;){const h=e.entries();let p=!1,m=0;for(;(u=h.next())&&!u.done;){if(i[m]){m++;continue}const y=l.value,v=u.value;if(n.equals(y[0],v[0],d,m,t,e,n)&&n.equals(y[1],v[1],y[0],v[0],t,e,n)){p=i[m]=!0;break}m++}if(!p)return!1;d++}return!0}const V5=No;function F5(t,e,n){const r=ES(t);let i=r.length;if(ES(e).length!==i)return!1;for(;i-- >0;)if(!cC(t,e,n,r[i]))return!1;return!0}function lc(t,e,n){const r=SS(t);let i=r.length;if(SS(e).length!==i)return!1;let o,l,u;for(;i-- >0;)if(o=r[i],!cC(t,e,n,o)||(l=kS(t,o),u=kS(e,o),(l||u)&&(!l||!u||l.configurable!==u.configurable||l.enumerable!==u.enumerable||l.writable!==u.writable)))return!1;return!0}function G5(t,e){return No(t.valueOf(),e.valueOf())}function K5(t,e){return t.source===e.source&&t.flags===e.flags}function CS(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let l,u;for(;(l=o.next())&&!l.done;){const d=e.values();let h=!1,p=0;for(;(u=d.next())&&!u.done;){if(!i[p]&&n.equals(l.value,u.value,l.value,u.value,t,e,n)){h=i[p]=!0;break}p++}if(!h)return!1}return!0}function Af(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function W5(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function cC(t,e,n,r){return(r===I5||r===z5||r===L5)&&(t.$$typeof||e.$$typeof)?!0:j5(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const J5="[object ArrayBuffer]",Y5="[object Arguments]",X5="[object Boolean]",Q5="[object DataView]",Z5="[object Date]",eI="[object Error]",tI="[object Map]",nI="[object Number]",rI="[object Object]",iI="[object RegExp]",sI="[object Set]",oI="[object String]",aI={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},lI="[object URL]",cI=Object.prototype.toString;function uI({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:l,areNumbersEqual:u,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:v,unknownTagComparators:w}){return function(k,T,_){if(k===T)return!0;if(k==null||T==null)return!1;const A=typeof k;if(A!==typeof T)return!1;if(A!=="object")return A==="number"?u(k,T,_):A==="function"?o(k,T,_):!1;const j=k.constructor;if(j!==T.constructor)return!1;if(j===Object)return d(k,T,_);if(Array.isArray(k))return e(k,T,_);if(j===Date)return r(k,T,_);if(j===RegExp)return p(k,T,_);if(j===Map)return l(k,T,_);if(j===Set)return m(k,T,_);const I=cI.call(k);if(I===Z5)return r(k,T,_);if(I===iI)return p(k,T,_);if(I===tI)return l(k,T,_);if(I===sI)return m(k,T,_);if(I===rI)return typeof k.then!="function"&&typeof T.then!="function"&&d(k,T,_);if(I===lI)return v(k,T,_);if(I===eI)return i(k,T,_);if(I===Y5)return d(k,T,_);if(aI[I])return y(k,T,_);if(I===J5)return t(k,T,_);if(I===Q5)return n(k,T,_);if(I===X5||I===nI||I===oI)return h(k,T,_);if(w){let N=w[I];if(!N){const z=D5(k);z&&(N=w[z])}if(N)return N(k,T,_)}return!1}}function dI({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:B5,areArraysEqual:n?lc:U5,areDataViewsEqual:$5,areDatesEqual:P5,areErrorsEqual:H5,areFunctionsEqual:q5,areMapsEqual:n?kg(TS,lc):TS,areNumbersEqual:V5,areObjectsEqual:n?lc:F5,arePrimitiveWrappersEqual:G5,areRegExpsEqual:K5,areSetsEqual:n?kg(CS,lc):CS,areTypedArraysEqual:n?kg(Af,lc):Af,areUrlsEqual:W5,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=qd(r.areArraysEqual),o=qd(r.areMapsEqual),l=qd(r.areObjectsEqual),u=qd(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:u})}return r}function fI(t){return function(e,n,r,i,o,l,u){return t(e,n,u)}}function hI({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(u,d){const{cache:h=t?new WeakMap:void 0,meta:p}=n();return e(u,d,{cache:h,equals:r,meta:p,strict:i})};if(t)return function(u,d){return e(u,d,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(u,d){return e(u,d,o)}}const pI=Ms();Ms({strict:!0});Ms({circular:!0});Ms({circular:!0,strict:!0});Ms({createInternalComparator:()=>No});Ms({strict:!0,createInternalComparator:()=>No});Ms({circular:!0,createInternalComparator:()=>No});Ms({circular:!0,createInternalComparator:()=>No,strict:!0});function Ms(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=dI(t),l=uI(o),u=n?n(l):fI(l);return hI({circular:e,comparator:l,createState:r,equals:u,strict:i})}var Eg={exports:{}},Tg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _S;function mI(){if(_S)return Tg;_S=1;var t=Xc(),e=eE();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,u=t.useMemo,d=t.useDebugValue;return Tg.useSyncExternalStoreWithSelector=function(h,p,m,y,v){var w=o(null);if(w.current===null){var x={hasValue:!1,value:null};w.current=x}else x=w.current;w=u(function(){function T(N){if(!_){if(_=!0,A=N,N=y(N),v!==void 0&&x.hasValue){var z=x.value;if(v(z,N))return j=z}return j=N}if(z=j,r(A,N))return z;var U=y(N);return v!==void 0&&v(z,U)?(A=N,z):(A=N,j=U)}var _=!1,A,j,I=m===void 0?null:m;return[function(){return T(p())},I===null?void 0:function(){return T(I())}]},[p,m,y,v]);var k=i(h,w[0],w[1]);return l(function(){x.hasValue=!0,x.value=k},[k]),d(k),k},Tg}var AS;function gI(){return AS||(AS=1,Eg.exports=mI()),Eg.exports}var yI=gI(),bI=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},vI=({contentComponent:t})=>{const e=tE.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return S.jsx(S.Fragment,{children:Object.values(e)})};function wI(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:v2.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var xI=class extends Pr.Component{constructor(t){var e;super(t),this.editorContentRef=Pr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=wI(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return S.jsxs(S.Fragment,{children:[S.jsx("div",{ref:bI(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&S.jsx(vI,{contentComponent:t.contentComponent})]})}},SI=O.forwardRef((t,e)=>{const n=Pr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Pr.createElement(xI,{key:n,innerRef:e,...t})}),uC=Pr.memo(SI),kI=typeof window<"u"?O.useLayoutEffect:O.useEffect,EI=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function TI(t){var e;const[n]=O.useState(()=>new EI(t.editor)),r=yI.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:pI);return kI(()=>n.watch(t.editor),[t.editor,n]),O.useDebugValue(r),r}var CI=!1,v0=typeof window>"u",_I=v0||!!(typeof window<"u"&&window.next),AI=class dC{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?v0||_I?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)==null?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)==null?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)==null?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)==null?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)==null?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)==null?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)==null?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)==null?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)==null?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)==null?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)==null?void 0:o.call(i,...r)},onDelete:(...r)=>{var i,o;return(o=(i=this.options.current).onDelete)==null?void 0:o.call(i,...r)}};return new w5(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var l;return i===((l=n.extensions)==null?void 0:l[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?dC.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function OI(t={},e=[]){const n=O.useRef(t);n.current=t;const[r]=O.useState(()=>new AI(n)),i=tE.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return O.useDebugValue(i),O.useEffect(r.onRender(e)),TI({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),i}var Sy=O.createContext({editor:null});Sy.Consumer;var fC=()=>O.useContext(Sy),NI=O.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),MI=()=>O.useContext(NI);Pr.forwardRef((t,e)=>{const{onDragStart:n}=MI(),r=t.as||"div";return S.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});Pr.createContext({markViewContentRef:()=>{}});var ky=O.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});ky.displayName="TiptapContext";var RI=()=>O.useContext(ky);function hC({editor:t,instance:e,children:n}){const r=t??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=O.useMemo(()=>({editor:r}),[r]),o=O.useMemo(()=>({editor:r}),[r]);return S.jsx(Sy.Provider,{value:o,children:S.jsx(ky.Provider,{value:i,children:n})})}hC.displayName="Tiptap";function pC({...t}){const{editor:e}=RI();return S.jsx(uC,{editor:e,...t})}pC.displayName="Tiptap.Content";Object.assign(hC,{Content:pC});const mC=["top","right","bottom","left"],OS=["start","end"],NS=mC.reduce((t,e)=>t.concat(e,e+"-"+OS[0],e+"-"+OS[1]),[]),Vr=Math.min,pn=Math.max,Of=Math.round,Ur=t=>({x:t,y:t}),DI={left:"right",right:"left",bottom:"top",top:"bottom"},jI={start:"end",end:"start"};function w0(t,e,n){return pn(t,Vr(e,n))}function Ri(t,e){return typeof t=="function"?t(e):t}function lr(t){return t.split("-")[0]}function Tr(t){return t.split("-")[1]}function gC(t){return t==="x"?"y":"x"}function Ey(t){return t==="y"?"height":"width"}const LI=new Set(["top","bottom"]);function Br(t){return LI.has(lr(t))?"y":"x"}function Ty(t){return gC(Br(t))}function yC(t,e,n){n===void 0&&(n=!1);const r=Tr(t),i=Ty(t),o=Ey(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=Mf(l)),[l,Mf(l)]}function zI(t){const e=Mf(t);return[Nf(t),e,Nf(e)]}function Nf(t){return t.replace(/start|end/g,e=>jI[e])}const MS=["left","right"],RS=["right","left"],II=["top","bottom"],BI=["bottom","top"];function UI(t,e,n){switch(t){case"top":case"bottom":return n?e?RS:MS:e?MS:RS;case"left":case"right":return e?II:BI;default:return[]}}function $I(t,e,n,r){const i=Tr(t);let o=UI(lr(t),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),e&&(o=o.concat(o.map(Nf)))),o}function Mf(t){return t.replace(/left|right|bottom|top/g,e=>DI[e])}function PI(t){return{top:0,right:0,bottom:0,left:0,...t}}function Cy(t){return typeof t!="number"?PI(t):{top:t,right:t,bottom:t,left:t}}function Wa(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function DS(t,e,n){let{reference:r,floating:i}=t;const o=Br(e),l=Ty(e),u=Ey(l),d=lr(e),h=o==="y",p=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,y=r[u]/2-i[u]/2;let v;switch(d){case"top":v={x:p,y:r.y-i.height};break;case"bottom":v={x:p,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:m};break;case"left":v={x:r.x-i.width,y:m};break;default:v={x:r.x,y:r.y}}switch(Tr(e)){case"start":v[l]-=y*(n&&h?-1:1);break;case"end":v[l]+=y*(n&&h?-1:1);break}return v}async function HI(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:l,elements:u,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:y=!1,padding:v=0}=Ri(e,t),w=Cy(v),k=u[y?m==="floating"?"reference":"floating":m],T=Wa(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(k)))==null||n?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:h,rootBoundary:p,strategy:d})),_=m==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),j=await(o.isElement==null?void 0:o.isElement(A))?await(o.getScale==null?void 0:o.getScale(A))||{x:1,y:1}:{x:1,y:1},I=Wa(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:_,offsetParent:A,strategy:d}):_);return{top:(T.top-I.top+w.top)/j.y,bottom:(I.bottom-T.bottom+w.bottom)/j.y,left:(T.left-I.left+w.left)/j.x,right:(I.right-T.right+w.right)/j.x}}const qI=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:m}=DS(h,r,d),y=r,v={},w=0;for(let k=0;k<u.length;k++){var x;const{name:T,fn:_}=u[k],{x:A,y:j,data:I,reset:N}=await _({x:p,y:m,initialPlacement:r,placement:y,strategy:i,middlewareData:v,rects:h,platform:{...l,detectOverflow:(x=l.detectOverflow)!=null?x:HI},elements:{reference:t,floating:e}});p=A??p,m=j??m,v={...v,[T]:{...v[T],...I}},N&&w<=50&&(w++,typeof N=="object"&&(N.placement&&(y=N.placement),N.rects&&(h=N.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):N.rects),{x:p,y:m}=DS(h,y,d)),k=-1)}return{x:p,y:m,placement:y,strategy:i,middlewareData:v}},VI=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:l,elements:u,middlewareData:d}=e,{element:h,padding:p=0}=Ri(t,e)||{};if(h==null)return{};const m=Cy(p),y={x:n,y:r},v=Ty(i),w=Ey(v),x=await l.getDimensions(h),k=v==="y",T=k?"top":"left",_=k?"bottom":"right",A=k?"clientHeight":"clientWidth",j=o.reference[w]+o.reference[v]-y[v]-o.floating[w],I=y[v]-o.reference[v],N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let z=N?N[A]:0;(!z||!await(l.isElement==null?void 0:l.isElement(N)))&&(z=u.floating[A]||o.floating[w]);const U=j/2-I/2,Z=z/2-x[w]/2-1,ne=Vr(m[T],Z),Ee=Vr(m[_],Z),le=ne,Be=z-x[w]-Ee,me=z/2-x[w]/2+U,xe=w0(le,me,Be),P=!d.arrow&&Tr(i)!=null&&me!==xe&&o.reference[w]/2-(me<le?ne:Ee)-x[w]/2<0,Y=P?me<le?me-le:me-Be:0;return{[v]:y[v]+Y,data:{[v]:xe,centerOffset:me-xe-Y,...P&&{alignmentOffset:Y}},reset:P}}});function FI(t,e,n){return(t?[...n.filter(i=>Tr(i)===t),...n.filter(i=>Tr(i)!==t)]:n.filter(i=>lr(i)===i)).filter(i=>t?Tr(i)===t||(e?Nf(i)!==i:!1):!0)}const GI=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:o,middlewareData:l,placement:u,platform:d,elements:h}=e,{crossAxis:p=!1,alignment:m,allowedPlacements:y=NS,autoAlignment:v=!0,...w}=Ri(t,e),x=m!==void 0||y===NS?FI(m||null,v,y):y,k=await d.detectOverflow(e,w),T=((n=l.autoPlacement)==null?void 0:n.index)||0,_=x[T];if(_==null)return{};const A=yC(_,o,await(d.isRTL==null?void 0:d.isRTL(h.floating)));if(u!==_)return{reset:{placement:x[0]}};const j=[k[lr(_)],k[A[0]],k[A[1]]],I=[...((r=l.autoPlacement)==null?void 0:r.overflows)||[],{placement:_,overflows:j}],N=x[T+1];if(N)return{data:{index:T+1,overflows:I},reset:{placement:N}};const z=I.map(ne=>{const Ee=Tr(ne.placement);return[ne.placement,Ee&&p?ne.overflows.slice(0,2).reduce((le,Be)=>le+Be,0):ne.overflows[0],ne.overflows]}).sort((ne,Ee)=>ne[1]-Ee[1]),Z=((i=z.filter(ne=>ne[2].slice(0,Tr(ne[0])?2:3).every(Ee=>Ee<=0))[0])==null?void 0:i[0])||z[0][0];return Z!==u?{data:{index:T+1,overflows:I},reset:{placement:Z}}:{}}}},KI=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:d,elements:h}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:x=!0,...k}=Ri(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const T=lr(i),_=Br(u),A=lr(u)===u,j=await(d.isRTL==null?void 0:d.isRTL(h.floating)),I=y||(A||!x?[Mf(u)]:zI(u)),N=w!=="none";!y&&N&&I.push(...$I(u,x,w,j));const z=[u,...I],U=await d.detectOverflow(e,k),Z=[];let ne=((r=o.flip)==null?void 0:r.overflows)||[];if(p&&Z.push(U[T]),m){const me=yC(i,l,j);Z.push(U[me[0]],U[me[1]])}if(ne=[...ne,{placement:i,overflows:Z}],!Z.every(me=>me<=0)){var Ee,le;const me=(((Ee=o.flip)==null?void 0:Ee.index)||0)+1,xe=z[me];if(xe&&(!(m==="alignment"?_!==Br(xe):!1)||ne.every(W=>Br(W.placement)===_?W.overflows[0]>0:!0)))return{data:{index:me,overflows:ne},reset:{placement:xe}};let P=(le=ne.filter(Y=>Y.overflows[0]<=0).sort((Y,W)=>Y.overflows[1]-W.overflows[1])[0])==null?void 0:le.placement;if(!P)switch(v){case"bestFit":{var Be;const Y=(Be=ne.filter(W=>{if(N){const Ce=Br(W.placement);return Ce===_||Ce==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(Ce=>Ce>0).reduce((Ce,De)=>Ce+De,0)]).sort((W,Ce)=>W[1]-Ce[1])[0])==null?void 0:Be[0];Y&&(P=Y);break}case"initialPlacement":P=u;break}if(i!==P)return{reset:{placement:P}}}return{}}}};function jS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function LS(t){return mC.some(e=>t[e]>=0)}const WI=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:r}=e,{strategy:i="referenceHidden",...o}=Ri(t,e);switch(i){case"referenceHidden":{const l=await r.detectOverflow(e,{...o,elementContext:"reference"}),u=jS(l,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:LS(u)}}}case"escaped":{const l=await r.detectOverflow(e,{...o,altBoundary:!0}),u=jS(l,n.floating);return{data:{escapedOffsets:u,escaped:LS(u)}}}default:return{}}}}};function bC(t){const e=Vr(...t.map(o=>o.left)),n=Vr(...t.map(o=>o.top)),r=pn(...t.map(o=>o.right)),i=pn(...t.map(o=>o.bottom));return{x:e,y:n,width:r-e,height:i-n}}function JI(t){const e=t.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<e.length;i++){const o=e[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>Wa(bC(i)))}const YI=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:o,strategy:l}=e,{padding:u=2,x:d,y:h}=Ri(t,e),p=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),m=JI(p),y=Wa(bC(p)),v=Cy(u);function w(){if(m.length===2&&m[0].left>m[1].right&&d!=null&&h!=null)return m.find(k=>d>k.left-v.left&&d<k.right+v.right&&h>k.top-v.top&&h<k.bottom+v.bottom)||y;if(m.length>=2){if(Br(n)==="y"){const ne=m[0],Ee=m[m.length-1],le=lr(n)==="top",Be=ne.top,me=Ee.bottom,xe=le?ne.left:Ee.left,P=le?ne.right:Ee.right,Y=P-xe,W=me-Be;return{top:Be,bottom:me,left:xe,right:P,width:Y,height:W,x:xe,y:Be}}const k=lr(n)==="left",T=pn(...m.map(ne=>ne.right)),_=Vr(...m.map(ne=>ne.left)),A=m.filter(ne=>k?ne.left===_:ne.right===T),j=A[0].top,I=A[A.length-1].bottom,N=_,z=T,U=z-N,Z=I-j;return{top:j,bottom:I,left:N,right:z,width:U,height:Z,x:N,y:j}}return y}const x=await o.getElementRects({reference:{getBoundingClientRect:w},floating:r.floating,strategy:l});return i.reference.x!==x.reference.x||i.reference.y!==x.reference.y||i.reference.width!==x.reference.width||i.reference.height!==x.reference.height?{reset:{rects:x}}:{}}}},XI=new Set(["left","top"]);async function QI(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=lr(n),u=Tr(n),d=Br(n)==="y",h=XI.has(l)?-1:1,p=o&&d?-1:1,m=Ri(e,t);let{mainAxis:y,crossAxis:v,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof w=="number"&&(v=u==="end"?w*-1:w),d?{x:v*p,y:y*h}:{x:y*h,y:v*p}}const ZI=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:l,middlewareData:u}=e,d=await QI(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:o+d.y,data:{...d,placement:l}}}}},eB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i,platform:o}=e,{mainAxis:l=!0,crossAxis:u=!1,limiter:d={fn:T=>{let{x:_,y:A}=T;return{x:_,y:A}}},...h}=Ri(t,e),p={x:n,y:r},m=await o.detectOverflow(e,h),y=Br(lr(i)),v=gC(y);let w=p[v],x=p[y];if(l){const T=v==="y"?"top":"left",_=v==="y"?"bottom":"right",A=w+m[T],j=w-m[_];w=w0(A,w,j)}if(u){const T=y==="y"?"top":"left",_=y==="y"?"bottom":"right",A=x+m[T],j=x-m[_];x=w0(A,x,j)}const k=d.fn({...e,[v]:w,[y]:x});return{...k,data:{x:k.x-n,y:k.y-r,enabled:{[v]:l,[y]:u}}}}}},tB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:l,elements:u}=e,{apply:d=()=>{},...h}=Ri(t,e),p=await l.detectOverflow(e,h),m=lr(i),y=Tr(i),v=Br(i)==="y",{width:w,height:x}=o.floating;let k,T;m==="top"||m==="bottom"?(k=m,T=y===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(T=m,k=y==="end"?"top":"bottom");const _=x-p.top-p.bottom,A=w-p.left-p.right,j=Vr(x-p[k],_),I=Vr(w-p[T],A),N=!e.middlewareData.shift;let z=j,U=I;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(U=A),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(z=_),N&&!y){const ne=pn(p.left,0),Ee=pn(p.right,0),le=pn(p.top,0),Be=pn(p.bottom,0);v?U=w-2*(ne!==0||Ee!==0?ne+Ee:pn(p.left,p.right)):z=x-2*(le!==0||Be!==0?le+Be:pn(p.top,p.bottom))}await d({...e,availableWidth:U,availableHeight:z});const Z=await l.getDimensions(u.floating);return w!==Z.width||x!==Z.height?{reset:{rects:!0}}:{}}}};function Oh(){return typeof window<"u"}function Za(t){return vC(t)?(t.nodeName||"").toLowerCase():"#document"}function qn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Di(t){var e;return(e=(vC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vC(t){return Oh()?t instanceof Node||t instanceof qn(t).Node:!1}function _r(t){return Oh()?t instanceof Element||t instanceof qn(t).Element:!1}function Fr(t){return Oh()?t instanceof HTMLElement||t instanceof qn(t).HTMLElement:!1}function zS(t){return!Oh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof qn(t).ShadowRoot}const nB=new Set(["inline","contents"]);function su(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ar(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!nB.has(i)}const rB=new Set(["table","td","th"]);function iB(t){return rB.has(Za(t))}const sB=[":popover-open",":modal"];function Nh(t){return sB.some(e=>{try{return t.matches(e)}catch{return!1}})}const oB=["transform","translate","scale","rotate","perspective"],aB=["transform","translate","scale","rotate","perspective","filter"],lB=["paint","layout","strict","content"];function _y(t){const e=Ay(),n=_r(t)?Ar(t):t;return oB.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||aB.some(r=>(n.willChange||"").includes(r))||lB.some(r=>(n.contain||"").includes(r))}function cB(t){let e=_s(t);for(;Fr(e)&&!Ja(e);){if(_y(e))return e;if(Nh(e))return null;e=_s(e)}return null}function Ay(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const uB=new Set(["html","body","#document"]);function Ja(t){return uB.has(Za(t))}function Ar(t){return qn(t).getComputedStyle(t)}function Mh(t){return _r(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _s(t){if(Za(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zS(t)&&t.host||Di(t);return zS(e)?e.host:e}function wC(t){const e=_s(t);return Ja(e)?t.ownerDocument?t.ownerDocument.body:t.body:Fr(e)&&su(e)?e:wC(e)}function xC(t,e,n){var r;e===void 0&&(e=[]);const i=wC(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),l=qn(i);return o?(x0(l),e.concat(l,l.visualViewport||[],su(i)?i:[],[])):e.concat(i,xC(i,[]))}function x0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function SC(t){const e=Ar(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Fr(t),o=i?t.offsetWidth:n,l=i?t.offsetHeight:r,u=Of(n)!==o||Of(r)!==l;return u&&(n=o,r=l),{width:n,height:r,$:u}}function kC(t){return _r(t)?t:t.contextElement}function $a(t){const e=kC(t);if(!Fr(e))return Ur(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=SC(e);let l=(o?Of(n.width):n.width)/r,u=(o?Of(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const dB=Ur(0);function EC(t){const e=qn(t);return!Ay()||!e.visualViewport?dB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==qn(t)?!1:e}function Wc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=kC(t);let l=Ur(1);e&&(r?_r(r)&&(l=$a(r)):l=$a(t));const u=fB(o,n,r)?EC(o):Ur(0);let d=(i.left+u.x)/l.x,h=(i.top+u.y)/l.y,p=i.width/l.x,m=i.height/l.y;if(o){const y=qn(o),v=r&&_r(r)?qn(r):r;let w=y,x=x0(w);for(;x&&r&&v!==w;){const k=$a(x),T=x.getBoundingClientRect(),_=Ar(x),A=T.left+(x.clientLeft+parseFloat(_.paddingLeft))*k.x,j=T.top+(x.clientTop+parseFloat(_.paddingTop))*k.y;d*=k.x,h*=k.y,p*=k.x,m*=k.y,d+=A,h+=j,w=qn(x),x=x0(w)}}return Wa({width:p,height:m,x:d,y:h})}function Rh(t,e){const n=Mh(t).scrollLeft;return e?e.left+n:Wc(Di(t)).left+n}function TC(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Rh(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function hB(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",l=Di(r),u=e?Nh(e.floating):!1;if(r===l||u&&o)return n;let d={scrollLeft:0,scrollTop:0},h=Ur(1);const p=Ur(0),m=Fr(r);if((m||!m&&!o)&&((Za(r)!=="body"||su(l))&&(d=Mh(r)),Fr(r))){const v=Wc(r);h=$a(r),p.x=v.x+r.clientLeft,p.y=v.y+r.clientTop}const y=l&&!m&&!o?TC(l,d):Ur(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+p.x+y.x,y:n.y*h.y-d.scrollTop*h.y+p.y+y.y}}function pB(t){return Array.from(t.getClientRects())}function mB(t){const e=Di(t),n=Mh(t),r=t.ownerDocument.body,i=pn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=pn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Rh(t);const u=-n.scrollTop;return Ar(r).direction==="rtl"&&(l+=pn(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:u}}const IS=25;function gB(t,e){const n=qn(t),r=Di(t),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(i){o=i.width,l=i.height;const p=Ay();(!p||p&&e==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}const h=Rh(r);if(h<=0){const p=r.ownerDocument,m=p.body,y=getComputedStyle(m),v=p.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,w=Math.abs(r.clientWidth-m.clientWidth-v);w<=IS&&(o-=w)}else h<=IS&&(o+=h);return{width:o,height:l,x:u,y:d}}const yB=new Set(["absolute","fixed"]);function bB(t,e){const n=Wc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Fr(t)?$a(t):Ur(1),l=t.clientWidth*o.x,u=t.clientHeight*o.y,d=i*o.x,h=r*o.y;return{width:l,height:u,x:d,y:h}}function BS(t,e,n){let r;if(e==="viewport")r=gB(t,n);else if(e==="document")r=mB(Di(t));else if(_r(e))r=bB(e,n);else{const i=EC(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Wa(r)}function CC(t,e){const n=_s(t);return n===e||!_r(n)||Ja(n)?!1:Ar(n).position==="fixed"||CC(n,e)}function vB(t,e){const n=e.get(t);if(n)return n;let r=xC(t,[]).filter(u=>_r(u)&&Za(u)!=="body"),i=null;const o=Ar(t).position==="fixed";let l=o?_s(t):t;for(;_r(l)&&!Ja(l);){const u=Ar(l),d=_y(l);!d&&u.position==="fixed"&&(i=null),(o?!d&&!i:!d&&u.position==="static"&&!!i&&yB.has(i.position)||su(l)&&!d&&CC(t,l))?r=r.filter(p=>p!==l):i=u,l=_s(l)}return e.set(t,r),r}function wB(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const l=[...n==="clippingAncestors"?Nh(e)?[]:vB(e,this._c):[].concat(n),r],u=l[0],d=l.reduce((h,p)=>{const m=BS(e,p,i);return h.top=pn(m.top,h.top),h.right=Vr(m.right,h.right),h.bottom=Vr(m.bottom,h.bottom),h.left=pn(m.left,h.left),h},BS(e,u,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function xB(t){const{width:e,height:n}=SC(t);return{width:e,height:n}}function SB(t,e,n){const r=Fr(e),i=Di(e),o=n==="fixed",l=Wc(t,!0,o,e);let u={scrollLeft:0,scrollTop:0};const d=Ur(0);function h(){d.x=Rh(i)}if(r||!r&&!o)if((Za(e)!=="body"||su(i))&&(u=Mh(e)),r){const v=Wc(e,!0,o,e);d.x=v.x+e.clientLeft,d.y=v.y+e.clientTop}else i&&h();o&&!r&&i&&h();const p=i&&!r&&!o?TC(i,u):Ur(0),m=l.left+u.scrollLeft-d.x-p.x,y=l.top+u.scrollTop-d.y-p.y;return{x:m,y,width:l.width,height:l.height}}function Cg(t){return Ar(t).position==="static"}function US(t,e){if(!Fr(t)||Ar(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Di(t)===n&&(n=n.ownerDocument.body),n}function _C(t,e){const n=qn(t);if(Nh(t))return n;if(!Fr(t)){let i=_s(t);for(;i&&!Ja(i);){if(_r(i)&&!Cg(i))return i;i=_s(i)}return n}let r=US(t,e);for(;r&&iB(r)&&Cg(r);)r=US(r,e);return r&&Ja(r)&&Cg(r)&&!_y(r)?n:r||cB(t)||n}const kB=async function(t){const e=this.getOffsetParent||_C,n=this.getDimensions,r=await n(t.floating);return{reference:SB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function EB(t){return Ar(t).direction==="rtl"}const TB={convertOffsetParentRelativeRectToViewportRelativeRect:hB,getDocumentElement:Di,getClippingRect:wB,getOffsetParent:_C,getElementRects:kB,getClientRects:pB,getDimensions:xB,getScale:$a,isElement:_r,isRTL:EB},AC=ZI,OC=GI,NC=eB,MC=KI,RC=tB,DC=WI,jC=VI,LC=YI,zC=(t,e,n)=>{const r=new Map,i={platform:TB,...n},o={...i.platform,_c:r};return qI(t,e,{...i,platform:o})};let S0,k0;if(typeof WeakMap<"u"){let t=new WeakMap;S0=e=>t.get(e),k0=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;S0=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},k0=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Si=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,l=i+1;for(let u=1;o<this.width&&this.map[e+u]==n;u++)o++;for(let u=1;l<this.height&&this.map[e+this.width*u]==n;u++)l++;return{left:r,top:i,right:o,bottom:l}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:o,bottom:l}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?o==0:l==this.height)?null:this.map[r+this.width*(n<0?o-1:l)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:o}=this.findCell(t),{left:l,right:u,top:d,bottom:h}=this.findCell(e);return{left:Math.min(n,l),top:Math.min(i,d),right:Math.max(r,u),bottom:Math.max(o,h)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const o=r*this.width+i,l=this.map[o];n[l]||(n[l]=!0,!(i==t.left&&i&&this.map[o-1]==l||r==t.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==t){let l=e+t*this.width;const u=(t+1)*this.width;for(;l<u&&this.map[l]<i;)l++;return l==u?o-1:this.map[l]}i=o}}static get(t){return S0(t)||k0(t,CB(t))}};function CB(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=_B(t),n=t.childCount,r=[];let i=0,o=null;const l=[];for(let h=0,p=e*n;h<p;h++)r[h]=0;for(let h=0,p=0;h<n;h++){const m=t.child(h);p++;for(let w=0;;w++){for(;i<r.length&&r[i]!=0;)i++;if(w==m.childCount)break;const x=m.child(w),{colspan:k,rowspan:T,colwidth:_}=x.attrs;for(let A=0;A<T;A++){if(A+h>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:p,n:T-A});break}const j=i+A*e;for(let I=0;I<k;I++){r[j+I]==0?r[j+I]=p:(o||(o=[])).push({type:"collision",row:h,pos:p,n:k-I});const N=_&&_[I];if(N){const z=(j+I)%e*2,U=l[z];U==null||U!=N&&l[z+1]==1?(l[z]=N,l[z+1]=1):U==N&&l[z+1]++}}}i+=k,p+=x.nodeSize}const y=(h+1)*e;let v=0;for(;i<y;)r[i++]==0&&v++;v&&(o||(o=[])).push({type:"missing",row:h,n:v}),p++}(e===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new Si(e,n,r,o);let d=!1;for(let h=0;!d&&h<l.length;h+=2)l[h]!=null&&l[h+1]<n&&(d=!0);return d&&AB(u,l,t),u}function _B(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let o=0;if(n)for(let l=0;l<r;l++){const u=t.child(l);for(let d=0;d<u.childCount;d++){const h=u.child(d);l+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}}for(let l=0;l<i.childCount;l++){const u=i.child(l);o+=u.attrs.colspan,u.attrs.rowspan>1&&(n=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function AB(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const o=t.map[i];if(r[o])continue;r[o]=!0;const l=n.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let u=null;const d=l.attrs;for(let h=0;h<d.colspan;h++){const p=e[(i+h)%t.width*2];p!=null&&(!d.colwidth||d.colwidth[h]!=p)&&((u||(u=OB(d)))[h]=p)}u&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function OB(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Oy(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}new lt("selectingCells");function NB(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function IC(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function MB(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=NB(e.$head)||RB(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function RB(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function $S(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function BC(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function UC(t,e,n){const r=t.node(-1),i=Si.get(r),o=t.start(-1),l=i.nextCell(t.pos-o,e,n);return l==null?null:t.node(0).resolve(o+l)}function PS(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}var $r=class bi extends we{constructor(e,n=e){const r=e.node(-1),i=Si.get(r),o=e.start(-1),l=i.rectBetween(e.pos-o,n.pos-o),u=e.node(0),d=i.cellsInRect(l).filter(p=>p!=n.pos-o);d.unshift(n.pos-o);const h=d.map(p=>{const m=r.nodeAt(p);if(!m)throw new RangeError(`No cell with offset ${p} found`);const y=o+p+1;return new jE(u.resolve(y),u.resolve(y+m.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if($S(r)&&$S(i)&&BC(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?bi.rowSelection(r,i):o&&this.isColSelection()?bi.colSelection(r,i):new bi(r,i)}return ke.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Si.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let d=i.top;d<i.bottom;d++){const h=[];for(let p=d*n.width+i.left,m=i.left;m<i.right;m++,p++){const y=n.map[p];if(o[y])continue;o[y]=!0;const v=n.findCell(y);let w=e.nodeAt(y);if(!w)throw new RangeError(`No cell with offset ${y} found`);const x=i.left-v.left,k=v.right-i.right;if(x>0||k>0){let T=w.attrs;if(x>0&&(T=PS(T,0,x)),k>0&&(T=PS(T,T.colspan-k,k)),v.left<i.left){if(w=w.type.createAndFill(T),!w)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(T)}`)}else w=w.type.create(T,w.content)}if(v.top<i.top||v.bottom>i.bottom){const T={...w.attrs,rowspan:Math.min(v.bottom,i.bottom)-Math.max(v.top,i.top)};v.top<i.top?w=w.type.createAndFill(T):w=w.type.create(T,w.content)}h.push(w)}l.push(e.child(d).copy(X.from(h)))}const u=this.isColSelection()&&this.isRowSelection()?e:l;return new ie(X.from(u),1,1)}replace(e,n=ie.empty){const r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){const{$from:u,$to:d}=i[l],h=e.mapping.slice(r);e.replace(h.map(u.pos),h.map(d.pos),l?ie.empty:n)}const o=we.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,n){this.replace(e,new ie(X.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Si.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let l=0;l<o.length;l++)e(n.nodeAt(o[l]),i+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Si.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(n.pos-o),d=e.node(0);return l.top<=u.top?(l.top>0&&(e=d.resolve(o+i.map[l.left])),u.bottom<i.height&&(n=d.resolve(o+i.map[i.width*(i.height-1)+u.right-1]))):(u.top>0&&(n=d.resolve(o+i.map[u.left])),l.bottom<i.height&&(e=d.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))),new bi(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Si.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const l=i+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,u)==n.width}eq(e){return e instanceof bi&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Si.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(n.pos-o),d=e.node(0);return l.left<=u.left?(l.left>0&&(e=d.resolve(o+i.map[l.top*i.width])),u.right<i.width&&(n=d.resolve(o+i.map[i.width*(u.top+1)-1]))):(u.left>0&&(n=d.resolve(o+i.map[u.top*i.width])),l.right<i.width&&(e=d.resolve(o+i.map[i.width*(l.top+1)-1]))),new bi(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new bi(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new bi(e.resolve(n),e.resolve(r))}getBookmark(){return new DB(this.$anchorCell.pos,this.$headCell.pos)}};$r.prototype.visible=!1;we.jsonID("cell",$r);var DB=class $C{constructor(e,n){this.anchor=e,this.head=n}map(e){return new $C(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&BC(n,r)?new $r(n,r):we.near(r,1)}};new lt("fix-tables");function PC(t){const e=t.selection,n=MB(t),r=n.node(-1),i=n.start(-1),o=Si.get(r);return{...e instanceof $r?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function jB(t){return function(e,n){if(!IC(e))return!1;if(n){const r=Oy(e.schema),i=PC(e),o=e.tr,l=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),u=l.map(d=>i.table.nodeAt(d));for(let d=0;d<l.length;d++)u[d].type==r.header_cell&&o.setNodeMarkup(i.tableStart+l[d],r.cell,u[d].attrs);if(o.steps.length===0)for(let d=0;d<l.length;d++)o.setNodeMarkup(i.tableStart+l[d],r.header_cell,u[d].attrs);n(o)}return!0}}function HS(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function Ny(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?jB(t):function(n,r){if(!IC(n))return!1;if(r){const i=Oy(n.schema),o=PC(n),l=n.tr,u=HS("row",o,i),d=HS("column",o,i),h=(t==="column"?u:t==="row"&&d)?1:0,p=t=="column"?{left:0,top:h,right:1,bottom:o.map.height}:t=="row"?{left:h,top:0,right:o.map.width,bottom:1}:o,m=t=="column"?d?i.cell:i.header_cell:t=="row"?u?i.cell:i.header_cell:i.cell;o.map.cellsInRect(p).forEach(y=>{const v=y+o.tableStart,w=l.doc.nodeAt(v);w&&l.setNodeMarkup(v,m,w.attrs)}),r(l)}return!0}}Ny("row",{useDeprecatedLogic:!0});Ny("column",{useDeprecatedLogic:!0});Ny("cell",{useDeprecatedLogic:!0});function Vd(t,e){const n=t.selection;if(!(n instanceof $r))return!1;if(e){const r=t.tr,i=Oy(t.schema).cell.createAndFill().content;n.forEachCell((o,l)=>{o.content.eq(i)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new ie(i,0,0))}),r.docChanged&&e(r)}return!0}cy({ArrowLeft:Fd("horiz",-1),ArrowRight:Fd("horiz",1),ArrowUp:Fd("vert",-1),ArrowDown:Fd("vert",1),"Shift-ArrowLeft":Gd("horiz",-1),"Shift-ArrowRight":Gd("horiz",1),"Shift-ArrowUp":Gd("vert",-1),"Shift-ArrowDown":Gd("vert",1),Backspace:Vd,"Mod-Backspace":Vd,Delete:Vd,"Mod-Delete":Vd});function af(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Fd(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof $r)return af(n,r,we.near(o.$headCell,e));if(t!="horiz"&&!o.empty)return!1;const l=HC(i,t,e);if(l==null)return!1;if(t=="horiz")return af(n,r,we.near(n.doc.resolve(o.head+e),e));{const u=n.doc.resolve(l),d=UC(u,t,e);let h;return d?h=we.near(d,1):e<0?h=we.near(n.doc.resolve(u.before(-1)),-1):h=we.near(n.doc.resolve(u.after(-1)),1),af(n,r,h)}}}function Gd(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let l;if(o instanceof $r)l=o;else{const d=HC(i,t,e);if(d==null)return!1;l=new $r(n.doc.resolve(d))}const u=UC(l.$headCell,t,e);return u?af(n,r,new $r(l.$anchorCell,u)):!1}}function HC(t,e,n){if(!(t.state.selection instanceof ke))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const l=r.before(i),u=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(u)?l:null}}return null}new lt("tableColumnResizing");function LB(t,e){const n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom),i=Math.min(t.left,e.left),l=Math.max(t.right,e.right)-i,u=r-n,d=i,h=n;return new DOMRect(d,h,l,u)}var zB=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:o,appendTo:l,getReferencedVirtualElement:u,options:d}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:p,state:m,from:y,to:v})=>{const{doc:w,selection:x}=m,{empty:k}=x,T=!w.textBetween(y,v).length&&hy(m.selection),_=this.element.contains(document.activeElement);return!(!(p.hasFocus()||_)||k||T||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:p})=>{var m;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}p!=null&&p.relatedTarget&&((m=this.element.parentNode)!=null&&m.contains(p.relatedTarget))||(p==null?void 0:p.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(p,m)=>{const y=!(m!=null&&m.selection.eq(p.state.selection)),v=!(m!=null&&m.doc.eq(p.state.doc));!y&&!v||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(p,y,v,m)},this.updateDelay))},this.updateHandler=(p,m,y,v)=>{const{composing:w}=p;if(w||!m&&!y)return;if(!this.getShouldShow(v)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:p})=>{const m=p.getMeta("bubbleMenu");m==="updatePosition"?this.updatePosition():m&&typeof m=="object"&&m.type==="updateOptions"&&this.updateOptions(m.options)};var h;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=l,this.scrollTarget=(h=d==null?void 0:d.scrollTarget)!=null?h:window,this.getReferencedVirtualElement=u,this.floatingUIOptions={...this.floatingUIOptions,...d},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(MC(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(NC(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(AC(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(jC(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(RC(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(OC(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(DC(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(LC(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}get virtualElement(){var t,e,n;const{selection:r}=this.editor.state,i=(t=this.getReferencedVirtualElement)==null?void 0:t.call(this);if(i)return i;if(!((n=(e=this.view)==null?void 0:e.dom)!=null&&n.parentNode))return;const o=KT(this.view,r.from,r.to);let l={getBoundingClientRect:()=>o,getClientRects:()=>[o]};if(r instanceof he){let u=this.view.nodeDOM(r.from);const d=u.dataset.nodeViewWrapper?u:u.querySelector("[data-node-view-wrapper]");d&&(u=d),u&&(l={getBoundingClientRect:()=>u.getBoundingClientRect(),getClientRects:()=>[u.getBoundingClientRect()]})}if(r instanceof $r){const{$anchorCell:u,$headCell:d}=r,h=u?u.pos:d.pos,p=d?d.pos:u.pos,m=this.view.nodeDOM(h),y=this.view.nodeDOM(p);if(!m||!y)return;const v=m===y?m.getBoundingClientRect():LB(m.getBoundingClientRect(),y.getBoundingClientRect());l={getBoundingClientRect:()=>v,getClientRects:()=>[v]}}return l}updatePosition(){const t=this.virtualElement;t&&zC(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:n,strategy:r,middlewareData:i})=>{var o,l;if((o=i.hide)!=null&&o.referenceHidden||(l=i.hide)!=null&&l.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${e}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,e);return}const i=!(e!=null&&e.selection.eq(t.state.selection)),o=!(e!=null&&e.doc.eq(t.state.doc));this.updateHandler(t,i,o,e)}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(d=>d.$from.pos)),l=Math.max(...i.map(d=>d.$to.pos));return((e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:t,from:o,to:l}))||!1}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.getReferencedVirtualElement!==void 0&&(this.getReferencedVirtualElement=t.getReferencedVirtualElement),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},qC=t=>new ot({key:typeof t.pluginKey=="string"?new lt(t.pluginKey):t.pluginKey,view:e=>new zB({view:e,...t})});ft.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[qC({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var IB=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,options:o,appendTo:l,shouldShow:u}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.shouldShow=({view:h,state:p})=>{const{selection:m}=p,{$anchor:y,empty:v}=m,w=y.depth===1,x=y.parent.isTextblock&&!y.parent.type.spec.code&&!y.parent.textContent&&y.parent.childCount===0&&!this.getTextContent(y.parent);return!(!h.hasFocus()||!v||!w||!x||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(h,p,m,y)=>{const{composing:v}=h;if(v||!p&&!m)return;if(!this.getShouldShow(y)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:h})=>{var p;if(this.preventHide){this.preventHide=!1;return}h!=null&&h.relatedTarget&&((p=this.element.parentNode)!=null&&p.contains(h.relatedTarget))||(h==null?void 0:h.relatedTarget)!==this.editor.view.dom&&this.hide()},this.transactionHandler=({transaction:h})=>{const p=h.getMeta("floatingMenu");p==="updatePosition"?this.updatePosition():p&&typeof p=="object"&&p.type==="updateOptions"&&this.updateOptions(p.options)},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)};var d;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=l,this.scrollTarget=(d=o==null?void 0:o.scrollTarget)!=null?d:window,this.floatingUIOptions={...this.floatingUIOptions,...o},this.element.tabIndex=0,u&&(this.shouldShow=u),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(t){return PT(t,{textSerializers:gy(this.editor.schema)})}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(MC(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(NC(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(AC(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(jC(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(RC(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(OC(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(DC(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(LC(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(d=>d.$from.pos)),l=Math.max(...i.map(d=>d.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,view:this.view,state:n,oldState:t,from:o,to:l})}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}updatePosition(){const{selection:t}=this.editor.state,e=KT(this.view,t.from,t.to);zC({getBoundingClientRect:()=>e,getClientRects:()=>[e]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:o,middlewareData:l})=>{var u,d;if((u=l.hide)!=null&&u.referenceHidden||(d=l.hide)!=null&&d.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=o,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const n=!(e!=null&&e.selection.eq(t.state.selection)),r=!(e!=null&&e.doc.eq(t.state.doc));this.updateHandler(t,n,r,e)}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},VC=t=>new ot({key:typeof t.pluginKey=="string"?new lt(t.pluginKey):t.pluginKey,view:e=>new IB({view:e,...t})});ft.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",updateDelay:void 0,resizeDelay:void 0,appendTo:void 0,shouldShow:null}},addCommands(){return{updateFloatingMenuPosition:()=>({tr:t,dispatch:e})=>(e&&t.setMeta("floatingMenu","updatePosition"),!0)}},addProseMirrorPlugins(){return this.options.element?[VC({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,resizeDelay:this.options.resizeDelay,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var BB=Pr.forwardRef(({pluginKey:t="bubbleMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:o=null,getReferencedVirtualElement:l,options:u,children:d,...h},p)=>{const m=O.useRef(document.createElement("div"));typeof p=="function"?p(m.current):p&&(p.current=m.current);const{editor:y}=fC(),v=e||y,w={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:o,getReferencedVirtualElement:l,options:u},x=O.useRef(w);x.current=w;const[k,T]=O.useState(!1),_=O.useRef(!0);return O.useEffect(()=>{if(v!=null&&v.isDestroyed)return;if(!v){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const A=m.current;A.style.visibility="hidden",A.style.position="absolute";const j=qC({...x.current,editor:v,element:A});v.registerPlugin(j);const I=x.current.pluginKey;return _.current=!0,T(!0),()=>{T(!1),v.unregisterPlugin(I),window.requestAnimationFrame(()=>{A.parentNode&&A.parentNode.removeChild(A)})}},[v]),O.useEffect(()=>{if(!(!k||!v||v.isDestroyed)){if(_.current){_.current=!1;return}v.view.dispatch(v.state.tr.setMeta("bubbleMenu",{type:"updateOptions",options:x.current}))}},[k,v,n,r,o,u,i,l]),P0.createPortal(S.jsx("div",{...h,children:d}),m.current)});Pr.forwardRef(({pluginKey:t="floatingMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:o=null,options:l,children:u,...d},h)=>{const p=O.useRef(document.createElement("div"));typeof h=="function"?h(p.current):h&&(h.current=p.current);const{editor:m}=fC(),y=e||m,v={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:o,options:l},w=O.useRef(v);w.current=v;const[x,k]=O.useState(!1),T=O.useRef(!0);return O.useEffect(()=>{if(y!=null&&y.isDestroyed)return;if(!y){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const _=p.current;_.style.visibility="hidden",_.style.position="absolute";const A=VC({...w.current,editor:y,element:_});y.registerPlugin(A);const j=w.current.pluginKey;return T.current=!0,k(!0),()=>{k(!1),y.unregisterPlugin(j),window.requestAnimationFrame(()=>{_.parentNode&&_.parentNode.removeChild(_)})}},[y]),O.useEffect(()=>{if(!(!x||!y||y.isDestroyed)){if(T.current){T.current=!1;return}y.view.dispatch(y.state.tr.setMeta("floatingMenu",{type:"updateOptions",options:w.current}))}},[x,y,n,r,o,l,i]),P0.createPortal(S.jsx("div",{...d,children:u}),p.current)});var Rf=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},UB=/^\s*>\s$/,$B=Vn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Rf("blockquote",{...At(this.options.HTMLAttributes,t),children:Rf("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const u=e.renderChildren([i]).split(`
`).map(d=>d.trim()===""?n:`${n} ${d}`);r.push(u.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ka({find:UB,type:this.type})]}}),PB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,HB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,qB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,VB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,FB=Oo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Rf("strong",{...At(this.options.HTMLAttributes,t),children:Rf("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ga({find:PB,type:this.type}),Ga({find:qB,type:this.type})]},addPasteRules(){return[Co({find:HB,type:this.type}),Co({find:VB,type:this.type})]}}),GB=/(^|[^`])`([^`]+)`(?!`)$/,KB=/(^|[^`])`([^`]+)`(?!`)/g,WB=Oo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ga({find:GB,type:this.type})]},addPasteRules(){return[Co({find:KB,type:this.type})]}}),_g=4,JB=/^```([a-z]+)?[\s\n]$/,YB=/^~~~([a-z]+)?[\s\n]$/,XB=Vn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:_g,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",At(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:_g,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;if(o.parent.type!==this.type)return!1;const u=" ".repeat(n);return l?t.commands.insertContent(u):t.commands.command(({tr:d})=>{const{from:h,to:p}=i,v=r.doc.textBetween(h,p,`
`,`
`).split(`
`).map(w=>u+w).join(`
`);return d.replaceWith(h,p,r.schema.text(v)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:_g,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;return o.parent.type!==this.type?!1:l?t.commands.command(({tr:u})=>{var d;const{pos:h}=o,p=o.start(),m=o.end(),v=r.doc.textBetween(p,m,`
`,`
`).split(`
`);let w=0,x=0;const k=h-p;for(let N=0;N<v.length;N+=1){if(x+v[N].length>=k){w=N;break}x+=v[N].length+1}const _=((d=v[w].match(/^ */))==null?void 0:d[0])||"",A=Math.min(_.length,n);if(A===0)return!0;let j=p;for(let N=0;N<w;N+=1)j+=v[N].length+1;return u.delete(j,j+A),h-j<=A&&u.setSelection(ke.create(u.doc,j)),!0}):t.commands.command(({tr:u})=>{const{from:d,to:h}=i,y=r.doc.textBetween(d,h,`
`,`
`).split(`
`).map(v=>{var w;const x=((w=v.match(/^ */))==null?void 0:w[0])||"",k=Math.min(x.length,n);return v.slice(k)}).join(`
`);return u.replaceWith(d,h,r.schema.text(y)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:t.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?t.commands.command(({tr:h})=>(h.setSelection(we.near(r.resolve(u))),!0)):t.commands.exitCode()}}},addInputRules(){return[y0({find:JB,type:this.type,getAttributes:t=>({language:t[1]})}),y0({find:YB,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new ot({key:new lt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:l,schema:u}=t.state,d=u.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(ke.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),QB=Vn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),ZB=Vn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",At(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,d=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&d&&l){const m=d.filter(y=>u.includes(y.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),eU=Vn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,At(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>y0({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),tU=Vn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",At(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!S5(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return VT(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:o,tr:l,dispatch:u})=>{if(u){const{$to:d}=l.selection,h=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?l.setSelection(ke.create(l.doc,d.pos+1)):d.nodeAfter.isBlock?l.setSelection(he.create(l.doc,d.pos)):l.setSelection(ke.create(l.doc,d.pos));else{const p=o.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,m=p==null?void 0:p.create();m&&(l.insert(h,m),l.setSelection(ke.create(l.doc,h+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[x5({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),nU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,rU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,iU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,sU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,oU=Oo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",At(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ga({find:nU,type:this.type}),Ga({find:iU,type:this.type})]},addPasteRules(){return[Co({find:rU,type:this.type}),Co({find:sU,type:this.type})]}});const aU="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",lU="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",E0="numeric",T0="ascii",C0="alpha",kc="asciinumeric",gc="alphanumeric",_0="domain",FC="emoji",cU="scheme",uU="slashscheme",Ag="whitespace";function dU(t,e){return t in e||(e[t]=[]),e[t]}function mo(t,e,n){e[E0]&&(e[kc]=!0,e[gc]=!0),e[T0]&&(e[kc]=!0,e[C0]=!0),e[kc]&&(e[gc]=!0),e[C0]&&(e[gc]=!0),e[gc]&&(e[_0]=!0),e[FC]&&(e[_0]=!0);for(const r in e){const i=dU(r,n);i.indexOf(t)<0&&i.push(t)}}function fU(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function _n(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}_n.groups={};_n.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||_n.groups;let i;return e&&e.j?i=e:(i=new _n(e),n&&r&&mo(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let l=0;l<o-1;l++)i=i.tt(t[l]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||_n.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let l,u=i.go(t);if(u?(l=new _n,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new _n,o){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(fU(l.t,r),n);mo(o,d,r)}else n&&mo(o,n,r);l.t=o}return i.j[t]=l,l}};const Ne=(t,e,n,r,i)=>t.ta(e,n,r,i),mt=(t,e,n,r,i)=>t.tr(e,n,r,i),qS=(t,e,n,r,i)=>t.ts(e,n,r,i),ee=(t,e,n,r,i)=>t.tt(e,n,r,i),vi="WORD",A0="UWORD",GC="ASCIINUMERICAL",KC="ALPHANUMERICAL",Jc="LOCALHOST",O0="TLD",N0="UTLD",lf="SCHEME",ja="SLASH_SCHEME",My="NUM",M0="WS",Ry="NL",Ec="OPENBRACE",Tc="CLOSEBRACE",Df="OPENBRACKET",jf="CLOSEBRACKET",Lf="OPENPAREN",zf="CLOSEPAREN",If="OPENANGLEBRACKET",Bf="CLOSEANGLEBRACKET",Uf="FULLWIDTHLEFTPAREN",$f="FULLWIDTHRIGHTPAREN",Pf="LEFTCORNERBRACKET",Hf="RIGHTCORNERBRACKET",qf="LEFTWHITECORNERBRACKET",Vf="RIGHTWHITECORNERBRACKET",Ff="FULLWIDTHLESSTHAN",Gf="FULLWIDTHGREATERTHAN",Kf="AMPERSAND",Wf="APOSTROPHE",Jf="ASTERISK",fs="AT",Yf="BACKSLASH",Xf="BACKTICK",Qf="CARET",gs="COLON",Dy="COMMA",Zf="DOLLAR",Lr="DOT",eh="EQUALS",jy="EXCLAMATION",rr="HYPHEN",Cc="PERCENT",th="PIPE",nh="PLUS",rh="POUND",_c="QUERY",Ly="QUOTE",WC="FULLWIDTHMIDDLEDOT",zy="SEMI",zr="SLASH",Ac="TILDE",ih="UNDERSCORE",JC="EMOJI",sh="SYM";var YC=Object.freeze({__proto__:null,ALPHANUMERICAL:KC,AMPERSAND:Kf,APOSTROPHE:Wf,ASCIINUMERICAL:GC,ASTERISK:Jf,AT:fs,BACKSLASH:Yf,BACKTICK:Xf,CARET:Qf,CLOSEANGLEBRACKET:Bf,CLOSEBRACE:Tc,CLOSEBRACKET:jf,CLOSEPAREN:zf,COLON:gs,COMMA:Dy,DOLLAR:Zf,DOT:Lr,EMOJI:JC,EQUALS:eh,EXCLAMATION:jy,FULLWIDTHGREATERTHAN:Gf,FULLWIDTHLEFTPAREN:Uf,FULLWIDTHLESSTHAN:Ff,FULLWIDTHMIDDLEDOT:WC,FULLWIDTHRIGHTPAREN:$f,HYPHEN:rr,LEFTCORNERBRACKET:Pf,LEFTWHITECORNERBRACKET:qf,LOCALHOST:Jc,NL:Ry,NUM:My,OPENANGLEBRACKET:If,OPENBRACE:Ec,OPENBRACKET:Df,OPENPAREN:Lf,PERCENT:Cc,PIPE:th,PLUS:nh,POUND:rh,QUERY:_c,QUOTE:Ly,RIGHTCORNERBRACKET:Hf,RIGHTWHITECORNERBRACKET:Vf,SCHEME:lf,SEMI:zy,SLASH:zr,SLASH_SCHEME:ja,SYM:sh,TILDE:Ac,TLD:O0,UNDERSCORE:ih,UTLD:N0,UWORD:A0,WORD:vi,WS:M0});const mi=/[a-z]/,cc=new RegExp("\\p{L}","u"),Og=new RegExp("\\p{Emoji}","u"),gi=/\d/,Ng=/\s/,VS="\r",Mg=`
`,hU="",pU="",Rg="";let Kd=null,Wd=null;function mU(t=[]){const e={};_n.groups=e;const n=new _n;Kd==null&&(Kd=FS(aU)),Wd==null&&(Wd=FS(lU)),ee(n,"'",Wf),ee(n,"{",Ec),ee(n,"}",Tc),ee(n,"[",Df),ee(n,"]",jf),ee(n,"(",Lf),ee(n,")",zf),ee(n,"<",If),ee(n,">",Bf),ee(n,"",Uf),ee(n,"",$f),ee(n,"",Pf),ee(n,"",Hf),ee(n,"",qf),ee(n,"",Vf),ee(n,"",Ff),ee(n,"",Gf),ee(n,"&",Kf),ee(n,"*",Jf),ee(n,"@",fs),ee(n,"`",Xf),ee(n,"^",Qf),ee(n,":",gs),ee(n,",",Dy),ee(n,"$",Zf),ee(n,".",Lr),ee(n,"=",eh),ee(n,"!",jy),ee(n,"-",rr),ee(n,"%",Cc),ee(n,"|",th),ee(n,"+",nh),ee(n,"#",rh),ee(n,"?",_c),ee(n,'"',Ly),ee(n,"/",zr),ee(n,";",zy),ee(n,"~",Ac),ee(n,"_",ih),ee(n,"\\",Yf),ee(n,"",WC);const r=mt(n,gi,My,{[E0]:!0});mt(r,gi,r);const i=mt(r,mi,GC,{[kc]:!0}),o=mt(r,cc,KC,{[gc]:!0}),l=mt(n,mi,vi,{[T0]:!0});mt(l,gi,i),mt(l,mi,l),mt(i,gi,i),mt(i,mi,i);const u=mt(n,cc,A0,{[C0]:!0});mt(u,mi),mt(u,gi,o),mt(u,cc,u),mt(o,gi,o),mt(o,mi),mt(o,cc,o);const d=ee(n,Mg,Ry,{[Ag]:!0}),h=ee(n,VS,M0,{[Ag]:!0}),p=mt(n,Ng,M0,{[Ag]:!0});ee(n,Rg,p),ee(h,Mg,d),ee(h,Rg,p),mt(h,Ng,p),ee(p,VS),ee(p,Mg),mt(p,Ng,p),ee(p,Rg,p);const m=mt(n,Og,JC,{[FC]:!0});ee(m,"#"),mt(m,Og,m),ee(m,hU,m);const y=ee(m,pU);ee(y,"#"),mt(y,Og,m);const v=[[mi,l],[gi,i]],w=[[mi,null],[cc,u],[gi,o]];for(let x=0;x<Kd.length;x++)as(n,Kd[x],O0,vi,v);for(let x=0;x<Wd.length;x++)as(n,Wd[x],N0,A0,w);mo(O0,{tld:!0,ascii:!0},e),mo(N0,{utld:!0,alpha:!0},e),as(n,"file",lf,vi,v),as(n,"mailto",lf,vi,v),as(n,"http",ja,vi,v),as(n,"https",ja,vi,v),as(n,"ftp",ja,vi,v),as(n,"ftps",ja,vi,v),mo(lf,{scheme:!0,ascii:!0},e),mo(ja,{slashscheme:!0,ascii:!0},e),t=t.sort((x,k)=>x[0]>k[0]?1:-1);for(let x=0;x<t.length;x++){const k=t[x][0],_=t[x][1]?{[cU]:!0}:{[uU]:!0};k.indexOf("-")>=0?_[_0]=!0:mi.test(k)?gi.test(k)?_[kc]=!0:_[T0]=!0:_[E0]=!0,qS(n,k,k,_)}return qS(n,"localhost",Jc,{ascii:!0}),n.jd=new _n(sh),{start:n,tokens:Object.assign({groups:e},YC)}}function XC(t,e){const n=gU(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=n.length,i=[];let o=0,l=0;for(;l<r;){let u=t,d=null,h=0,p=null,m=-1,y=-1;for(;l<r&&(d=u.go(n[l]));)u=d,u.accepts()?(m=0,y=0,p=u):m>=0&&(m+=n[l].length,y++),h+=n[l].length,o+=n[l].length,l++;o-=m,l-=y,h-=m,i.push({t:p.t,v:e.slice(o-h,o),s:o-h,e:o})}return i}function gU(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,l=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function as(t,e,n,r,i){let o;const l=e.length;for(let u=0;u<l-1;u++){const d=e[u];t.j[d]?o=t.j[d]:(o=new _n(r),o.jr=i.slice(),t.j[d]=o),t=o}return o=new _n(n),o.jr=i.slice(),t.j[e[l-1]]=o,o}function FS(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+o),10);l>0;l--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Yc={defaultProtocol:"http",events:null,format:GS,formatHref:GS,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Iy(t,e=null){let n=Object.assign({},Yc);t&&(n=Object.assign(n,t instanceof Iy?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}Iy.prototype={o:Yc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Yc[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function GS(t){return t}function QC(t,e){this.t="token",this.v=t,this.tk=e}QC.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Yc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),l={},u=t.get("className",n,e),d=t.get("target",n,e),h=t.get("rel",n,e),p=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return l.href=r,u&&(l.class=u),d&&(l.target=d),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:i,attributes:l,content:o,eventListeners:m}}};function Dh(t,e){class n extends QC{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const KS=Dh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),WS=Dh("text"),yU=Dh("nl"),Jd=Dh("url",{isLink:!0,toHref(t=Yc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Jc&&t[1].t===gs}}),nr=t=>new _n(t);function bU({groups:t}){const e=t.domain.concat([Kf,Jf,fs,Yf,Xf,Qf,Zf,eh,rr,My,Cc,th,nh,rh,zr,sh,Ac,ih]),n=[Wf,gs,Dy,Lr,jy,Cc,_c,Ly,zy,If,Bf,Ec,Tc,jf,Df,Lf,zf,Uf,$f,Pf,Hf,qf,Vf,Ff,Gf],r=[Kf,Wf,Jf,Yf,Xf,Qf,Zf,eh,rr,Ec,Tc,Cc,th,nh,rh,_c,zr,sh,Ac,ih],i=nr(),o=ee(i,Ac);Ne(o,r,o),Ne(o,t.domain,o);const l=nr(),u=nr(),d=nr();Ne(i,t.domain,l),Ne(i,t.scheme,u),Ne(i,t.slashscheme,d),Ne(l,r,o),Ne(l,t.domain,l);const h=ee(l,fs);ee(o,fs,h),ee(u,fs,h),ee(d,fs,h);const p=ee(o,Lr);Ne(p,r,o),Ne(p,t.domain,o);const m=nr();Ne(h,t.domain,m),Ne(m,t.domain,m);const y=ee(m,Lr);Ne(y,t.domain,m);const v=nr(KS);Ne(y,t.tld,v),Ne(y,t.utld,v),ee(h,Jc,v);const w=ee(m,rr);ee(w,rr,w),Ne(w,t.domain,m),Ne(v,t.domain,m),ee(v,Lr,y),ee(v,rr,w);const x=ee(v,gs);Ne(x,t.numeric,KS);const k=ee(l,rr),T=ee(l,Lr);ee(k,rr,k),Ne(k,t.domain,l),Ne(T,r,o),Ne(T,t.domain,l);const _=nr(Jd);Ne(T,t.tld,_),Ne(T,t.utld,_),Ne(_,t.domain,l),Ne(_,r,o),ee(_,Lr,T),ee(_,rr,k),ee(_,fs,h);const A=ee(_,gs),j=nr(Jd);Ne(A,t.numeric,j);const I=nr(Jd),N=nr();Ne(I,e,I),Ne(I,n,N),Ne(N,e,I),Ne(N,n,N),ee(_,zr,I),ee(j,zr,I);const z=ee(u,gs),U=ee(d,gs),Z=ee(U,zr),ne=ee(Z,zr);Ne(u,t.domain,l),ee(u,Lr,T),ee(u,rr,k),Ne(d,t.domain,l),ee(d,Lr,T),ee(d,rr,k),Ne(z,t.domain,I),ee(z,zr,I),ee(z,_c,I),Ne(ne,t.domain,I),Ne(ne,e,I),ee(ne,zr,I);const Ee=[[Ec,Tc],[Df,jf],[Lf,zf],[If,Bf],[Uf,$f],[Pf,Hf],[qf,Vf],[Ff,Gf]];for(let le=0;le<Ee.length;le++){const[Be,me]=Ee[le],xe=ee(I,Be);ee(N,Be,xe),ee(xe,me,I);const P=nr(Jd);Ne(xe,e,P);const Y=nr();Ne(xe,n),Ne(P,e,P),Ne(P,n,Y),Ne(Y,e,P),Ne(Y,n,Y),ee(P,me,I),ee(Y,me,I)}return ee(i,Jc,_),ee(i,Ry,yU),{start:i,tokens:YC}}function vU(t,e,n){let r=n.length,i=0,o=[],l=[];for(;i<r;){let u=t,d=null,h=null,p=0,m=null,y=-1;for(;i<r&&!(d=u.go(n[i].t));)l.push(n[i++]);for(;i<r&&(h=d||u.go(n[i].t));)d=null,u=h,u.accepts()?(y=0,m=u):y>=0&&y++,i++,p++;if(y<0)i-=p,i<r&&(l.push(n[i]),i++);else{l.length>0&&(o.push(Dg(WS,e,l)),l=[]),i-=y,p-=y;const v=m.t,w=n.slice(i-p,i);o.push(Dg(v,e,w))}}return l.length>0&&o.push(Dg(WS,e,l)),o}function Dg(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const wU=typeof console<"u"&&console&&console.warn||(()=>{}),xU="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",st={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function SU(){return _n.groups={},st.scanner=null,st.parser=null,st.tokenQueue=[],st.pluginQueue=[],st.customSchemes=[],st.initialized=!1,st}function JS(t,e=!1){if(st.initialized&&wU(`linkifyjs: already initialized - will not register custom scheme "${t}" ${xU}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);st.customSchemes.push([t,e])}function kU(){st.scanner=mU(st.customSchemes);for(let t=0;t<st.tokenQueue.length;t++)st.tokenQueue[t][1]({scanner:st.scanner});st.parser=bU(st.scanner.tokens);for(let t=0;t<st.pluginQueue.length;t++)st.pluginQueue[t][1]({scanner:st.scanner,parser:st.parser});return st.initialized=!0,st}function By(t){return st.initialized||kU(),vU(st.parser.start,t,XC(st.scanner.start,t))}By.scan=XC;function ZC(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Iy(n),i=By(t),o=[];for(let l=0;l<i.length;l++){const u=i[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&o.push(u.toFormattedObject(r))}return o}var Uy="[\0- -\u2029]",EU=new RegExp(Uy),TU=new RegExp(`${Uy}$`),CU=new RegExp(Uy,"g");function _U(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function AU(t){return new ot({key:new lt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(h=>h.docChanged)&&!n.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!i||o)return;const{tr:l}=r,u=zT(n.doc,[...e]);if(qT(u).forEach(({newRange:h})=>{const p=k4(r.doc,h,v=>v.isTextblock);let m,y;if(p.length>1)m=p[0],y=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const v=r.doc.textBetween(h.from,h.to," "," ");if(!TU.test(v))return;m=p[0],y=r.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&y){const v=y.split(EU).filter(Boolean);if(v.length<=0)return!1;const w=v[v.length-1],x=m.pos+y.lastIndexOf(w);if(!w)return!1;const k=By(w).map(T=>T.toObject(t.defaultProtocol));if(!_U(k))return!1;k.filter(T=>T.isLink).map(T=>({...T,from:x+T.start+1,to:x+T.end+1})).filter(T=>r.schema.marks.code?!r.doc.rangeHasMark(T.from,T.to,r.schema.marks.code):!0).filter(T=>t.validate(T.value)).filter(T=>t.shouldAutoLink(T.value)).forEach(T=>{yy(T.from,T.to,r.doc).some(_=>_.mark.type===t.type)||l.addMark(T.from,T.to,t.type.create({href:T.href}))})}}),!!l.steps.length)return l}})}function OU(t){return new ot({key:new lt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const d=r.target;if(!d)return!1;const h=t.editor.view.dom;l=d.closest("a"),l&&!h.contains(l)&&(l=null)}if(!l)return!1;let u=!1;if(t.enableClickSelection&&(u=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const d=HT(e.state,t.type.name),h=(i=l.href)!=null?i:d.href,p=(o=l.target)!=null?o:d.target;h&&(window.open(h,p),u=!0)}return u}}})}function NU(t){return new ot({key:new lt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:o}=e,{selection:l}=o,{empty:u}=l;if(u)return!1;let d="";r.content.forEach(p=>{d+=p.textContent});const h=ZC(d,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===d);return!d||!h||i!==void 0&&!i(h.value)?!1:t.editor.commands.setMark(t.type,{href:h.href})}}})}function io(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(CU,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var MU=Oo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){JS(t);return}JS(t.scheme,t.optionalSlashes)})},onDestroy(){SU()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!io(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!io(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!io(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",At(this.options.HTMLAttributes,t),0]:["a",At(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n,r,i,o;const l=(r=(n=t.attrs)==null?void 0:n.href)!=null?r:"",u=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"",d=e.renderChildren(t);return u?`[${d}](${l} "${u}")`:`[${d}](${l})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!io(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!io(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Co({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=ZC(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!io(l,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(AU({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!io(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(OU({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(NU({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),RU=Object.defineProperty,DU=(t,e)=>{for(var n in e)RU(t,n,{get:e[n],enumerable:!0})},jU="listItem",YS="textStyle",XS=/^\s*([-+*])\s$/,e_=Vn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jU,this.editor.getAttributes(YS)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ka({find:XS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ka({find:XS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(YS),editor:this.editor})),[t]}}),t_=Vn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),u=e.parseChildren(l);n.push(...u)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>xy(t,e,r=>{var i,o;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((o=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:o.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),LU={};DU(LU,{findListItemPos:()=>ou,getNextListDepth:()=>$y,handleBackspace:()=>R0,handleDelete:()=>D0,hasListBefore:()=>n_,hasListItemAfter:()=>zU,hasListItemBefore:()=>r_,listItemHasSubList:()=>i_,nextListIsDeeper:()=>s_,nextListIsHigher:()=>o_});var ou=(t,e)=>{const{$from:n}=e.selection,r=_t(t,e.schema);let i=null,o=n.depth,l=n.pos,u=null;for(;o>0&&u===null;)i=n.node(o),i.type===r?u=o:(o-=1,l-=1);return u===null?null:{$pos:e.doc.resolve(l),depth:u}},$y=(t,e)=>{const n=ou(t,e);if(!n)return!1;const[,r]=R4(e,t,n.$pos.pos+4);return r},n_=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),o=t.doc.resolve(i).node();return!(!o||!n.includes(o.type.name))},r_=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},i_=(t,e,n)=>{if(!n)return!1;const r=_t(t,e.schema);let i=!1;return n.descendants(o=>{o.type===r&&(i=!0)}),i},R0=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Cs(t.state,e)&&n_(t.state,e,n)){const{$anchor:u}=t.state.selection,d=t.state.doc.resolve(u.before()-1),h=[];d.node().descendants((y,v)=>{y.type.name===e&&h.push({node:y,pos:v})});const p=h.at(-1);if(!p)return!1;const m=t.state.doc.resolve(d.start()+p.pos+1);return t.chain().cut({from:u.start()-1,to:u.end()+1},m.end()).joinForward().run()}if(!Cs(t.state,e)||!z4(t.state))return!1;const r=ou(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=i_(e,t.state,o);return r_(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},s_=(t,e)=>{const n=$y(t,e),r=ou(t,e);return!r||!n?!1:n>r.depth},o_=(t,e)=>{const n=$y(t,e),r=ou(t,e);return!r||!n?!1:n<r.depth},D0=(t,e)=>{if(!Cs(t.state,e)||!L4(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:s_(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():o_(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},zU=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},a_=ft.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&D0(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&D0(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&R0(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&R0(t,n,r)&&(e=!0)}),e}}}}),QS=/^(\s*)(\d+)\.\s+(.*)$/,IU=/^\s/;function BU(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],o=i.match(QS);if(!o)break;const[,l,u,d]=o,h=l.length;let p=d,m=n+1;const y=[i];for(;m<t.length;){const v=t[m];if(v.match(QS))break;if(v.trim()==="")y.push(v),p+=`
`,m+=1;else if(v.match(IU))y.push(v),p+=`
${v.slice(h+2)}`,m+=1;else break}e.push({indent:h,number:parseInt(u,10),content:p.trim(),raw:y.join(`
`)}),r=m,n=m}return[e,r]}function l_(t,e,n){var r;const i=[];let o=0;for(;o<t.length;){const l=t[o];if(l.indent===e){const u=l.content.split(`
`),d=((r=u[0])==null?void 0:r.trim())||"",h=[];d&&h.push({type:"paragraph",raw:d,tokens:n.inlineTokens(d)});const p=u.slice(1).join(`
`).trim();if(p){const v=n.blockTokens(p);h.push(...v)}let m=o+1;const y=[];for(;m<t.length&&t[m].indent>e;)y.push(t[m]),m+=1;if(y.length>0){const v=Math.min(...y.map(x=>x.indent)),w=l_(y,v,n);h.push({type:"list",ordered:!0,start:y[0].number,items:w,raw:y.map(x=>x.raw).join(`
`)})}i.push({type:"list_item",raw:l.raw,tokens:h}),o=m}else o+=1}return i}function UU(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const o=e.parseChildren([i]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([i]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var $U="listItem",ZS="textStyle",ek=/^(\d+)\.\s$/,c_=Vn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",At(this.options.HTMLAttributes,n),0]:["ol",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?UU(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[o,l]=BU(i);if(o.length===0)return;const u=l_(o,0,n);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:u,raw:i.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($U,this.editor.getAttributes(ZS)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ka({find:ek,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ka({find:ek,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(ZS)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),PU=/^\s*(\[([( |x])?\])\s$/,HU=Vn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",At(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return xy(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),l=document.createElement("span"),u=document.createElement("input"),d=document.createElement("div"),h=m=>{var y,v;u.ariaLabel=((v=(y=this.options.a11y)==null?void 0:y.checkboxLabel)==null?void 0:v.call(y,m,u.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};h(t),o.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",m=>m.preventDefault()),u.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:y}=m.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const w=n();if(typeof w!="number")return!1;const x=v.doc.nodeAt(w);return v.setNodeMarkup(w,void 0,{...x==null?void 0:x.attrs,checked:y}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,y)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,y])=>{i.setAttribute(m,y)}),i.dataset.checked=t.attrs.checked,u.checked=t.attrs.checked,o.append(u,l),i.append(o,d),Object.entries(e).forEach(([m,y])=>{i.setAttribute(m,y)});let p=new Set(Object.keys(e));return{dom:i,contentDOM:d,update:m=>{if(m.type!==this.type)return!1;i.dataset.checked=m.attrs.checked,u.checked=m.attrs.checked,h(m);const y=r.extensionManager.attributes,v=Kc(m,y),w=new Set(Object.keys(v)),x=this.options.HTMLAttributes;return p.forEach(k=>{w.has(k)||(k in x?i.setAttribute(k,x[k]):i.removeAttribute(k))}),Object.entries(v).forEach(([k,T])=>{T==null?k in x?i.setAttribute(k,x[k]):i.removeAttribute(k):i.setAttribute(k,T)}),p=w,!0}}}},addInputRules(){return[Ka({find:PU,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),qU=Vn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",At(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const l=b0(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,d)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:n.inlineTokens(u.mainContent),nestedTokens:d}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(o)},i=b0(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ft.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(e_.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(t_.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(a_.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(c_.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(HU.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(qU.configure(this.options.taskList)),t}});var tk="&nbsp;",VU="",FU=Vn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",At(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===tk||r[0].text===VU)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?tk:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),GU=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,KU=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,WU=Oo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ga({find:GU,type:this.type})]},addPasteRules(){return[Co({find:KU,type:this.type})]}}),JU=Vn.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),YU=Oo.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",At(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function XU(t={}){return new ot({view(e){return new QU(e,t)}})}class QU{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=l=>{this[i](l)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),l=o.width/i.offsetWidth,u=o.height/i.offsetHeight;if(n){let m=e.nodeBefore,y=e.nodeAfter;if(m||y){let v=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(v){let w=v.getBoundingClientRect(),x=m?w.bottom:w.top;m&&y&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*u;r={left:w.left,right:w.right,top:x-k,bottom:x+k}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),y=this.width/2*l;r={left:m.left-y,right:m.left+y,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let h,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),y=m.width/d.offsetWidth,v=m.height/d.offsetHeight;h=m.left-d.scrollLeft*y,p=m.top-d.scrollTop*v}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=AE(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class yt extends we{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return yt.valid(r)?new yt(r):we.near(r)}content(){return ie.empty}eq(e){return e instanceof yt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new yt(e.resolve(n.pos))}getBookmark(){return new Py(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!ZU(e)||!e$(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&yt.valid(e))return e;let i=e.pos,o=null;for(let l=e.depth;;l--){let u=e.node(l);if(n>0?e.indexAfter(l)<u.childCount:e.index(l)>0){o=u.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=n;let d=e.doc.resolve(i);if(yt.valid(d))return d}for(;;){let l=n>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!he.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=l,i+=n;let u=e.doc.resolve(i);if(yt.valid(u))return u}return null}}}yt.prototype.visible=!1;yt.findFrom=yt.findGapCursorFrom;we.jsonID("gapcursor",yt);class Py{constructor(e){this.pos=e}map(e){return new Py(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return yt.valid(n)?new yt(n):we.near(n)}}function u_(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function ZU(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||u_(i.type))return!0;if(i.inlineContent)return!1}}return!0}function e$(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||u_(i.type))return!0;if(i.inlineContent)return!1}}return!0}function t$(){return new ot({props:{decorations:s$,createSelectionBetween(t,e,n){return e.pos==n.pos&&yt.valid(n)?new yt(n):null},handleClick:r$,handleKeyDown:n$,handleDOMEvents:{beforeinput:i$}}})}const n$=cy({ArrowLeft:Yd("horiz",-1),ArrowRight:Yd("horiz",1),ArrowUp:Yd("vert",-1),ArrowDown:Yd("vert",1)});function Yd(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let l=r.selection,u=e>0?l.$to:l.$from,d=l.empty;if(l instanceof ke){if(!o.endOfTextblock(n)||u.depth==0)return!1;d=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=yt.findGapCursorFrom(u,e,d);return h?(i&&i(r.tr.setSelection(new yt(h))),!0):!1}}function r$(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!yt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&he.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new yt(r))),!0)}function i$(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof yt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=X.empty;for(let l=r.length-1;l>=0;l--)i=X.from(r[l].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new ie(i,0,0));return o.setSelection(ke.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function s$(t){if(!(t.selection instanceof yt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ut.create(t.doc,[mn.widget(t.selection.head,e,{key:"gapcursor"})])}var oh=200,Ut=function(){};Ut.prototype.append=function(e){return e.length?(e=Ut.from(e),!this.length&&e||e.length<oh&&this.leafAppend(e)||this.length<oh&&e.leafPrepend(this)||this.appendInner(e)):this};Ut.prototype.prepend=function(e){return e.length?Ut.from(e).append(this):this};Ut.prototype.appendInner=function(e){return new o$(this,e)};Ut.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ut.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ut.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ut.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ut.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(e(o,l))},n,r),i};Ut.from=function(e){return e instanceof Ut?e:e&&e.length?new d_(e):Ut.empty};var d_=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,l,u){for(var d=o;d<l;d++)if(i(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,u){for(var d=o-1;d>=l;d--)if(i(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=oh)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=oh)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Ut);Ut.empty=new d_([]);var o$=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,l){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,l){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(i,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Ut);const a$=500;class kr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=e.tr,u,d,h=[],p=[];return this.items.forEach((m,y)=>{if(!m.step){i||(i=this.remapping(r,y+1),o=i.maps.length),o--,p.push(m);return}if(i){p.push(new Ir(m.map));let v=m.step.map(i.slice(o)),w;v&&l.maybeStep(v).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],h.push(new Ir(w,void 0,void 0,h.length+p.length))),o--,w&&i.appendMap(w,o)}else l.maybeStep(m.step);if(m.selection)return u=i?m.selection.map(i.slice(o)):m.selection,d=new kr(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:u}}addTransform(e,n,r,i){let o=[],l=this.eventCount,u=this.items,d=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),y=new Ir(e.mapping.maps[p],m,n),v;(v=d&&d.merge(y))&&(y=v,p?o.pop():u=u.slice(0,u.length-1)),o.push(y),n&&(l++,n=void 0),i||(d=y)}let h=l-r.depth;return h>c$&&(u=l$(u,h),l-=h),new kr(u.append(o),l)}remapping(e,n){let r=new Pc;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new kr(this.items.append(e.map(n=>new Ir(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(y=>{y.selection&&u--},i);let d=n;this.items.forEach(y=>{let v=o.getMirror(--d);if(v==null)return;l=Math.min(l,v);let w=o.maps[v];if(y.step){let x=e.steps[v].invert(e.docs[v]),k=y.selection&&y.selection.map(o.slice(d+1,v));k&&u++,r.push(new Ir(w,x,k))}else r.push(new Ir(w))},i);let h=[];for(let y=n;y<l;y++)h.push(new Ir(o.maps[y]));let p=this.items.slice(0,i).append(h).append(r),m=new kr(p,u);return m.emptyItemCount()>a$&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)i.push(l),l.selection&&o++;else if(l.step){let d=l.step.map(n.slice(r)),h=d&&d.getMap();if(r--,h&&n.appendMap(h,r),d){let p=l.selection&&l.selection.map(n.slice(r));p&&o++;let m=new Ir(h.invert(),d,p),y,v=i.length-1;(y=i.length&&i[v].merge(m))?i[v]=y:i.push(m)}}else l.map&&r--},this.items.length,0),new kr(Ut.from(i.reverse()),o)}}kr.empty=new kr(Ut.empty,0);function l$(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Ir{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ir(n.getMap().invert(),n,this.selection)}}}class hs{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const c$=20;function u$(t,e,n,r){let i=n.getMeta(xo),o;if(i)return i.historyState;n.getMeta(h$)&&(t=new hs(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(xo))return l.getMeta(xo).redo?new hs(t.done.addTransform(n,void 0,r,cf(e)),t.undone,nk(n.mapping.maps),t.prevTime,t.prevComposition):new hs(t.done,t.undone.addTransform(n,void 0,r,cf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),d=t.prevTime==0||!l&&t.prevComposition!=u&&(t.prevTime<(n.time||0)-r.newGroupDelay||!d$(n,t.prevRanges)),h=l?jg(t.prevRanges,n.mapping):nk(n.mapping.maps);return new hs(t.done.addTransform(n,d?e.selection.getBookmark():void 0,r,cf(e)),kr.empty,h,n.time,u??t.prevComposition)}else return(o=n.getMeta("rebased"))?new hs(t.done.rebased(n,o),t.undone.rebased(n,o),jg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new hs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),jg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function d$(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function nk(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,l)=>e.push(o,l));return e}function jg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function f$(t,e,n){let r=cf(e),i=xo.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),d=new hs(n?u:o.remaining,n?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(xo,{redo:n,historyState:d})}let Lg=!1,rk=null;function cf(t){let e=t.plugins;if(rk!=e){Lg=!1,rk=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Lg=!0;break}}return Lg}const xo=new lt("history"),h$=new lt("closeHistory");function p$(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ot({key:xo,state:{init(){return new hs(kr.empty,kr.empty,null,0,-1)},apply(e,n,r){return u$(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?h_:r=="historyRedo"?p_:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function f_(t,e){return(n,r)=>{let i=xo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=f$(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const h_=f_(!1,!0),p_=f_(!0,!0);ft.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new ot({key:new lt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const l=o-i,u=0,d=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(u,d);return t=!0,h}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,d=o-r,h=u-d,p=u;return e.deleteRange(h,p),!(this.storage.characters({node:e.doc})>r)}})]}});var m$=ft.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[XU(this.options)]}});ft.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new ot({key:new lt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return ut.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((d,h)=>{if(d.isText)return;if(!(i>=h&&i<=h+d.nodeSize-1))return!1;l+=1});let u=0;return t.descendants((d,h)=>{if(d.isText||!(i>=h&&i<=h+d.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&l-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";o.push(mn.node(h,h+d.nodeSize,{class:this.options.className}))}),ut.create(t,o)}}})]}});var g$=ft.create({name:"gapCursor",addProseMirrorPlugins(){return[t$()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ge(de(t,"allowGapCursor",n)))!=null?e:null}}}),ik="placeholder";function y$(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var b$=ft.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:ik,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${y$(this.options.dataAttribute)}`:`data-${ik}`;return[new ot({key:new lt("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,o=[];if(!r)return null;const l=this.editor.isEmpty;return e.descendants((u,d)=>{const h=i>=d&&i<=d+u.nodeSize,p=!u.isLeaf&&Ch(u);if((h||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];l&&m.push(this.options.emptyEditorClass);const y=mn.node(d,d+u.nodeSize,{class:m.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:u,pos:d,hasAnchor:h}):this.options.placeholder});o.push(y)}return this.options.includeChildren}),ut.create(e,o)}}})]}});ft.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new ot({key:new lt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||VT(n.selection)||t.view.dragging?null:ut.create(n.doc,[mn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function sk({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var v$=ft.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new lt(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new ot({key:e,appendTransaction:(i,o,l)=>{const{doc:u,tr:d,schema:h}=l,p=e.getState(l),m=u.content.size,y=h.nodes[n];if(p)return d.insert(m,y.create())},state:{init:(i,o)=>{const l=o.tr.doc.lastChild;return!sk({node:l,types:r})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;const l=i.doc.lastChild;return!sk({node:l,types:r})}}})]}}),w$=ft.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>h_(t,e),redo:()=>({state:t,dispatch:e})=>p_(t,e)}},addProseMirrorPlugins(){return[p$(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),x$=ft.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(FB.configure(this.options.bold)),this.options.blockquote!==!1&&i.push($B.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(e_.configure(this.options.bulletList)),this.options.code!==!1&&i.push(WB.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(XB.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(QB.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(m$.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(g$.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(ZB.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(eU.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(w$.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(tU.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(oU.configure(this.options.italic)),this.options.listItem!==!1&&i.push(t_.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(a_.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(MU.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(c_.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(FU.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(WU.configure(this.options.strike)),this.options.text!==!1&&i.push(JU.configure(this.options.text)),this.options.underline!==!1&&i.push(YU.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(v$.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),S$=x$,k$=b$;function m_(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=m_(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function E$(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=m_(t))&&(r&&(r+=" "),r+=e);return r}const T$=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},C$=(t,e)=>({classGroupId:t,validator:e}),g_=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),ah="-",ok=[],_$="arbitrary..",A$=t=>{const e=N$(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return O$(l);const u=l.split(ah),d=u[0]===""&&u.length>1?1:0;return y_(u,d,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],h=n[l];return d?h?T$(h,d):d:h||ok}return n[l]||ok}}},y_=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],o=n.nextPart.get(i);if(o){const h=y_(t,e+1,o);if(h)return h}const l=n.validators;if(l===null)return;const u=e===0?t.join(ah):t.slice(e).join(ah),d=l.length;for(let h=0;h<d;h++){const p=l[h];if(p.validator(u))return p.classGroupId}},O$=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?_$+r:void 0})(),N$=t=>{const{theme:e,classGroups:n}=t;return M$(n,e)},M$=(t,e)=>{const n=g_();for(const r in t){const i=t[r];Hy(i,n,r,e)}return n},Hy=(t,e,n,r)=>{const i=t.length;for(let o=0;o<i;o++){const l=t[o];R$(l,e,n,r)}},R$=(t,e,n,r)=>{if(typeof t=="string"){D$(t,e,n);return}if(typeof t=="function"){j$(t,e,n,r);return}L$(t,e,n,r)},D$=(t,e,n)=>{const r=t===""?e:b_(e,t);r.classGroupId=n},j$=(t,e,n,r)=>{if(z$(t)){Hy(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(C$(n,t))},L$=(t,e,n,r)=>{const i=Object.entries(t),o=i.length;for(let l=0;l<o;l++){const[u,d]=i[l];Hy(d,b_(e,u),n,r)}},b_=(t,e)=>{let n=t;const r=e.split(ah),i=r.length;for(let o=0;o<i;o++){const l=r[o];let u=n.nextPart.get(l);u||(u=g_(),n.nextPart.set(l,u)),n=u}return n},z$=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,I$=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(o,l)=>{n[o]=l,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(o){let l=n[o];if(l!==void 0)return l;if((l=r[o])!==void 0)return i(o,l),l},set(o,l){o in n?n[o]=l:i(o,l)}}},j0="!",ak=":",B$=[],lk=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),U$=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const o=[];let l=0,u=0,d=0,h;const p=i.length;for(let x=0;x<p;x++){const k=i[x];if(l===0&&u===0){if(k===ak){o.push(i.slice(d,x)),d=x+1;continue}if(k==="/"){h=x;continue}}k==="["?l++:k==="]"?l--:k==="("?u++:k===")"&&u--}const m=o.length===0?i:i.slice(d);let y=m,v=!1;m.endsWith(j0)?(y=m.slice(0,-1),v=!0):m.startsWith(j0)&&(y=m.slice(1),v=!0);const w=h&&h>d?h-d:void 0;return lk(o,v,y,w)};if(e){const i=e+ak,o=r;r=l=>l.startsWith(i)?o(l.slice(i.length)):lk(B$,!1,l,void 0,!0)}if(n){const i=r;r=o=>n({className:o,parseClassName:i})}return r},$$=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let o=0;o<n.length;o++){const l=n[o],u=l[0]==="[",d=e.has(l);u||d?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(l)):i.push(l)}return i.length>0&&(i.sort(),r.push(...i)),r}},P$=t=>({cache:I$(t.cacheSize),parseClassName:U$(t),sortModifiers:$$(t),...A$(t)}),H$=/\s+/,q$=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,l=[],u=t.trim().split(H$);let d="";for(let h=u.length-1;h>=0;h-=1){const p=u[h],{isExternal:m,modifiers:y,hasImportantModifier:v,baseClassName:w,maybePostfixModifierPosition:x}=n(p);if(m){d=p+(d.length>0?" "+d:d);continue}let k=!!x,T=r(k?w.substring(0,x):w);if(!T){if(!k){d=p+(d.length>0?" "+d:d);continue}if(T=r(w),!T){d=p+(d.length>0?" "+d:d);continue}k=!1}const _=y.length===0?"":y.length===1?y[0]:o(y).join(":"),A=v?_+j0:_,j=A+T;if(l.indexOf(j)>-1)continue;l.push(j);const I=i(T,k);for(let N=0;N<I.length;++N){const z=I[N];l.push(A+z)}d=p+(d.length>0?" "+d:d)}return d},V$=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=v_(n))&&(i&&(i+=" "),i+=r);return i},v_=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=v_(t[r]))&&(n&&(n+=" "),n+=e);return n},F$=(t,...e)=>{let n,r,i,o;const l=d=>{const h=e.reduce((p,m)=>m(p),t());return n=P$(h),r=n.cache.get,i=n.cache.set,o=u,u(d)},u=d=>{const h=r(d);if(h)return h;const p=q$(d,n);return i(d,p),p};return o=l,(...d)=>o(V$(...d))},G$=[],Rt=t=>{const e=n=>n[t]||G$;return e.isThemeGetter=!0,e},w_=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,x_=/^\((?:(\w[\w-]*):)?(.+)\)$/i,K$=/^\d+\/\d+$/,W$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Y$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,X$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Q$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_a=t=>K$.test(t),Me=t=>!!t&&!Number.isNaN(Number(t)),ls=t=>!!t&&Number.isInteger(Number(t)),zg=t=>t.endsWith("%")&&Me(t.slice(0,-1)),yi=t=>W$.test(t),Z$=()=>!0,e6=t=>J$.test(t)&&!Y$.test(t),S_=()=>!1,t6=t=>X$.test(t),n6=t=>Q$.test(t),r6=t=>!oe(t)&&!ae(t),i6=t=>el(t,T_,S_),oe=t=>w_.test(t),so=t=>el(t,C_,e6),Ig=t=>el(t,c6,Me),ck=t=>el(t,k_,S_),s6=t=>el(t,E_,n6),Xd=t=>el(t,__,t6),ae=t=>x_.test(t),uc=t=>tl(t,C_),o6=t=>tl(t,u6),uk=t=>tl(t,k_),a6=t=>tl(t,T_),l6=t=>tl(t,E_),Qd=t=>tl(t,__,!0),el=(t,e,n)=>{const r=w_.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},tl=(t,e,n=!1)=>{const r=x_.exec(t);return r?r[1]?e(r[1]):n:!1},k_=t=>t==="position"||t==="percentage",E_=t=>t==="image"||t==="url",T_=t=>t==="length"||t==="size"||t==="bg-size",C_=t=>t==="length",c6=t=>t==="number",u6=t=>t==="family-name",__=t=>t==="shadow",d6=()=>{const t=Rt("color"),e=Rt("font"),n=Rt("text"),r=Rt("font-weight"),i=Rt("tracking"),o=Rt("leading"),l=Rt("breakpoint"),u=Rt("container"),d=Rt("spacing"),h=Rt("radius"),p=Rt("shadow"),m=Rt("inset-shadow"),y=Rt("text-shadow"),v=Rt("drop-shadow"),w=Rt("blur"),x=Rt("perspective"),k=Rt("aspect"),T=Rt("ease"),_=Rt("animate"),A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],I=()=>[...j(),ae,oe],N=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto","contain","none"],U=()=>[ae,oe,d],Z=()=>[_a,"full","auto",...U()],ne=()=>[ls,"none","subgrid",ae,oe],Ee=()=>["auto",{span:["full",ls,ae,oe]},ls,ae,oe],le=()=>[ls,"auto",ae,oe],Be=()=>["auto","min","max","fr",ae,oe],me=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],xe=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...U()],Y=()=>[_a,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...U()],W=()=>[t,ae,oe],Ce=()=>[...j(),uk,ck,{position:[ae,oe]}],De=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",a6,i6,{size:[ae,oe]}],G=()=>[zg,uc,so],te=()=>["","none","full",h,ae,oe],re=()=>["",Me,uc,so],be=()=>["solid","dashed","dotted","double"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pe=()=>[Me,zg,uk,ck],et=()=>["","none",w,ae,oe],qe=()=>["none",Me,ae,oe],On=()=>["none",Me,ae,oe],ur=()=>[Me,ae,oe],Fn=()=>[_a,"full",...U()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yi],breakpoint:[yi],color:[Z$],container:[yi],"drop-shadow":[yi],ease:["in","out","in-out"],font:[r6],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yi],shadow:[yi],spacing:["px",Me],text:[yi],"text-shadow":[yi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",_a,oe,ae,k]}],container:["container"],columns:[{columns:[Me,oe,ae,u]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:I()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Z()}],"inset-x":[{"inset-x":Z()}],"inset-y":[{"inset-y":Z()}],start:[{start:Z()}],end:[{end:Z()}],top:[{top:Z()}],right:[{right:Z()}],bottom:[{bottom:Z()}],left:[{left:Z()}],visibility:["visible","invisible","collapse"],z:[{z:[ls,"auto",ae,oe]}],basis:[{basis:[_a,"full","auto",u,...U()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Me,_a,"auto","initial","none",oe]}],grow:[{grow:["",Me,ae,oe]}],shrink:[{shrink:["",Me,ae,oe]}],order:[{order:[ls,"first","last","none",ae,oe]}],"grid-cols":[{"grid-cols":ne()}],"col-start-end":[{col:Ee()}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":ne()}],"row-start-end":[{row:Ee()}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Be()}],"auto-rows":[{"auto-rows":Be()}],gap:[{gap:U()}],"gap-x":[{"gap-x":U()}],"gap-y":[{"gap-y":U()}],"justify-content":[{justify:[...me(),"normal"]}],"justify-items":[{"justify-items":[...xe(),"normal"]}],"justify-self":[{"justify-self":["auto",...xe()]}],"align-content":[{content:["normal",...me()]}],"align-items":[{items:[...xe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...xe(),{baseline:["","last"]}]}],"place-content":[{"place-content":me()}],"place-items":[{"place-items":[...xe(),"baseline"]}],"place-self":[{"place-self":["auto",...xe()]}],p:[{p:U()}],px:[{px:U()}],py:[{py:U()}],ps:[{ps:U()}],pe:[{pe:U()}],pt:[{pt:U()}],pr:[{pr:U()}],pb:[{pb:U()}],pl:[{pl:U()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":U()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":U()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[u,"screen",...Y()]}],"min-w":[{"min-w":[u,"screen","none",...Y()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Y()]}],h:[{h:["screen","lh",...Y()]}],"min-h":[{"min-h":["screen","lh","none",...Y()]}],"max-h":[{"max-h":["screen","lh",...Y()]}],"font-size":[{text:["base",n,uc,so]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ae,Ig]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zg,oe]}],"font-family":[{font:[o6,oe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ae,oe]}],"line-clamp":[{"line-clamp":[Me,"none",ae,Ig]}],leading:[{leading:[o,...U()]}],"list-image":[{"list-image":["none",ae,oe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ae,oe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...be(),"wavy"]}],"text-decoration-thickness":[{decoration:[Me,"from-font","auto",ae,so]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[Me,"auto",ae,oe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae,oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae,oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ce()}],"bg-repeat":[{bg:De()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ls,ae,oe],radial:["",ae,oe],conic:[ls,ae,oe]},l6,s6]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:re()}],"border-w-x":[{"border-x":re()}],"border-w-y":[{"border-y":re()}],"border-w-s":[{"border-s":re()}],"border-w-e":[{"border-e":re()}],"border-w-t":[{"border-t":re()}],"border-w-r":[{"border-r":re()}],"border-w-b":[{"border-b":re()}],"border-w-l":[{"border-l":re()}],"divide-x":[{"divide-x":re()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":re()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...be(),"hidden","none"]}],"divide-style":[{divide:[...be(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...be(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Me,ae,oe]}],"outline-w":[{outline:["",Me,uc,so]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",p,Qd,Xd]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",m,Qd,Xd]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[Me,so]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":re()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",y,Qd,Xd]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[Me,ae,oe]}],"mix-blend":[{"mix-blend":[...Se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Me]}],"mask-image-linear-from-pos":[{"mask-linear-from":pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":pe()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":pe()}],"mask-image-t-to-pos":[{"mask-t-to":pe()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":pe()}],"mask-image-r-to-pos":[{"mask-r-to":pe()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":pe()}],"mask-image-b-to-pos":[{"mask-b-to":pe()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":pe()}],"mask-image-l-to-pos":[{"mask-l-to":pe()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":pe()}],"mask-image-x-to-pos":[{"mask-x-to":pe()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":pe()}],"mask-image-y-to-pos":[{"mask-y-to":pe()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[ae,oe]}],"mask-image-radial-from-pos":[{"mask-radial-from":pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":pe()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[Me]}],"mask-image-conic-from-pos":[{"mask-conic-from":pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":pe()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ce()}],"mask-repeat":[{mask:De()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ae,oe]}],filter:[{filter:["","none",ae,oe]}],blur:[{blur:et()}],brightness:[{brightness:[Me,ae,oe]}],contrast:[{contrast:[Me,ae,oe]}],"drop-shadow":[{"drop-shadow":["","none",v,Qd,Xd]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",Me,ae,oe]}],"hue-rotate":[{"hue-rotate":[Me,ae,oe]}],invert:[{invert:["",Me,ae,oe]}],saturate:[{saturate:[Me,ae,oe]}],sepia:[{sepia:["",Me,ae,oe]}],"backdrop-filter":[{"backdrop-filter":["","none",ae,oe]}],"backdrop-blur":[{"backdrop-blur":et()}],"backdrop-brightness":[{"backdrop-brightness":[Me,ae,oe]}],"backdrop-contrast":[{"backdrop-contrast":[Me,ae,oe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Me,ae,oe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Me,ae,oe]}],"backdrop-invert":[{"backdrop-invert":["",Me,ae,oe]}],"backdrop-opacity":[{"backdrop-opacity":[Me,ae,oe]}],"backdrop-saturate":[{"backdrop-saturate":[Me,ae,oe]}],"backdrop-sepia":[{"backdrop-sepia":["",Me,ae,oe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":U()}],"border-spacing-x":[{"border-spacing-x":U()}],"border-spacing-y":[{"border-spacing-y":U()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ae,oe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Me,"initial",ae,oe]}],ease:[{ease:["linear","initial",T,ae,oe]}],delay:[{delay:[Me,ae,oe]}],animate:[{animate:["none",_,ae,oe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,ae,oe]}],"perspective-origin":[{"perspective-origin":I()}],rotate:[{rotate:qe()}],"rotate-x":[{"rotate-x":qe()}],"rotate-y":[{"rotate-y":qe()}],"rotate-z":[{"rotate-z":qe()}],scale:[{scale:On()}],"scale-x":[{"scale-x":On()}],"scale-y":[{"scale-y":On()}],"scale-z":[{"scale-z":On()}],"scale-3d":["scale-3d"],skew:[{skew:ur()}],"skew-x":[{"skew-x":ur()}],"skew-y":[{"skew-y":ur()}],transform:[{transform:[ae,oe,"","none","gpu","cpu"]}],"transform-origin":[{origin:I()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Fn()}],"translate-x":[{"translate-x":Fn()}],"translate-y":[{"translate-y":Fn()}],"translate-z":[{"translate-z":Fn()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae,oe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae,oe]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[Me,uc,so,Ig]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},f6=F$(d6),A_={async generateContent(t){return console.error("Gemini API key is missing. Please set VITE_GEMINI_API_KEY in .env"),"Error: Gemini API key is missing."},async modifyText(t,e){let n="";switch(e){case"rewrite":n=`Please rewrite the following text to make it clearer and more concise:

"${t}"`;break;case"expand":n=`Please expand on the following text, adding more details and context:

"${t}"`;break;case"polish":n=`Please polish the following text to make it sound more professional and engaging:

"${t}"`;break}return this.generateContent(n)}},h6=({initialContent:t="",onContentChange:e,className:n})=>{var u,d;const[r,i]=O.useState(!1),o=OI({extensions:[S$,k$.configure({placeholder:" AI ..."})],content:t,editorProps:{attributes:{class:"prose prose-slate max-w-none focus:outline-none min-h-[300px] p-4"}},onUpdate:({editor:h})=>{e==null||e(h.getHTML())}});O.useEffect(()=>{o&&t&&o.getHTML()!==t&&o.isEmpty&&t&&o.commands.setContent(t)},[t,o]);const l=async h=>{if(!o)return;const{from:p,to:m,empty:y}=o.state.selection;if(y)return;const v=o.state.doc.textBetween(p,m," ");if(v){i(!0);try{const w=await A_.modifyText(v,h);w&&o.chain().focus().deleteSelection().insertContent(w).run()}catch(w){console.error("AI Action failed:",w)}finally{i(!1)}}};return o?S.jsxs("div",{className:f6("bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden flex flex-col",n),children:[S.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-slate-200 bg-slate-50 flex-wrap",children:[S.jsx(Zd,{onClick:()=>o.chain().focus().toggleBold().run(),isActive:o.isActive("bold"),icon:aD,title:"Bold"}),S.jsx(Zd,{onClick:()=>o.chain().focus().toggleItalic().run(),isActive:o.isActive("italic"),icon:jD,title:"Italic"}),S.jsx("div",{className:"w-px h-6 bg-slate-300 mx-2"}),S.jsx(Zd,{onClick:()=>o.chain().focus().toggleBulletList().run(),isActive:o.isActive("bulletList"),icon:PD,title:"Bullet List"}),S.jsx(Zd,{onClick:()=>o.chain().focus().toggleOrderedList().run(),isActive:o.isActive("orderedList"),icon:UD,title:"Ordered List"})]}),o&&S.jsxs(BB,{editor:o,tippyOptions:{duration:100},className:"flex bg-white shadow-xl border border-slate-200 rounded-lg overflow-hidden p-1 gap-1",children:[S.jsx(Bg,{onClick:()=>l("rewrite"),icon:Qk,label:"",disabled:r}),S.jsx(Bg,{onClick:()=>l("expand"),icon:Zk,label:"",disabled:r}),S.jsx(Bg,{onClick:()=>l("polish"),icon:Ic,label:"",disabled:r})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto relative",children:[r&&S.jsx("div",{className:"absolute inset-0 bg-white/50 z-10 flex items-center justify-center backdrop-blur-sm",children:S.jsxs("div",{className:"flex items-center gap-2 text-purple-600 font-medium animate-pulse",children:[S.jsx(Ic,{className:"w-5 h-5 animate-spin"}),"AI ..."]})}),S.jsx(uC,{editor:o,className:"h-full"})]}),S.jsxs("div",{className:"px-4 py-2 bg-slate-50 border-t border-slate-200 text-xs text-slate-500 flex justify-between",children:[S.jsxs("span",{children:[((d=(u=o.storage.characterCount)==null?void 0:u.words)==null?void 0:d.call(u))??0," words"]}),S.jsx("span",{children:r?"Processing...":"Ready"})]})]}):null},Zd=({onClick:t,isActive:e,icon:n,title:r})=>S.jsx("button",{onClick:t,className:E$("p-2 rounded hover:bg-slate-200 transition-colors text-slate-600",e&&"bg-slate-200 text-slate-900"),title:r,children:S.jsx(n,{className:"w-4 h-4"})}),Bg=({onClick:t,icon:e,label:n,disabled:r})=>S.jsxs("button",{onClick:t,disabled:r,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-slate-700 hover:bg-purple-50 hover:text-purple-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsx(e,{className:"w-3.5 h-3.5"}),n]}),p6=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(!1),[i,o]=O.useState(""),l=async()=>{if(t.trim()){r(!0);try{const u=await A_.generateContent(t);o(d=>d?d+`<p>${u}</p>`:u),e("")}catch(u){console.error("Generation failed:",u),alert(" API Key ")}finally{r(!1)}}};return S.jsxs("div",{className:"flex flex-col h-full bg-slate-50",children:[S.jsxs("div",{className:"px-8 py-6 bg-white border-b border-slate-200",children:[S.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[S.jsx(Ic,{className:"w-6 h-6 text-purple-600"})," (AI-Native Editor)"]}),S.jsx("p",{className:"text-slate-500 mt-1",children:" Gemini AI "})]}),S.jsxs("div",{className:"flex-1 p-6 overflow-hidden flex flex-col md:flex-row gap-6",children:[S.jsx("div",{className:"w-full md:w-1/3 flex flex-col gap-4",children:S.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex-1 flex flex-col",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-4 text-slate-800 font-semibold",children:[S.jsx(Zk,{className:"w-5 h-5 text-purple-500"}),""]}),S.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[S.jsx("label",{className:"text-sm text-slate-500",children:""}),S.jsx("textarea",{value:t,onChange:u=>e(u.target.value),placeholder:"...",className:"flex-1 w-full p-4 bg-slate-50 border border-slate-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all"}),S.jsx("button",{onClick:l,disabled:n||!t.trim(),className:"w-full py-3 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-purple-500/30 active:scale-95",children:n?S.jsxs(S.Fragment,{children:[S.jsx(Ic,{className:"w-4 h-4 animate-spin"}),"..."]}):S.jsxs(S.Fragment,{children:["",S.jsx(sD,{className:"w-4 h-4"})]})})]}),S.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100",children:[S.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Quick Prompts"}),S.jsx("div",{className:"space-y-2",children:["","",""].map((u,d)=>S.jsx("button",{onClick:()=>e(u),className:"w-full text-left px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-md truncate transition-colors",children:u},d))})]})]})}),S.jsx("div",{className:"flex-1 flex flex-col h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:S.jsx(h6,{initialContent:i,onContentChange:o,className:"h-full border-0 rounded-none shadow-none"})})]})]})},m6=()=>{const t=As(),e=n=>t.pathname===n;return S.jsxs("div",{className:"w-16 md:w-64 bg-slate-900 text-slate-300 flex flex-col h-screen shrink-0 border-r border-slate-800",children:[S.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-800 flex items-center justify-center md:justify-start",children:[S.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center shrink-0",children:S.jsx("span",{className:"text-white font-bold text-lg",children:"F"})}),S.jsx("span",{className:"hidden md:block ml-3 font-bold text-white tracking-tight",children:"Filez Engine"})]}),S.jsxs("nav",{className:"flex-1 p-2 md:p-4 space-y-2",children:[S.jsxs(ao,{to:"/",className:`flex items-center p-3 rounded-lg transition-colors ${e("/")?"bg-red-600/10 text-red-500":"hover:bg-slate-800 hover:text-white"}`,children:[S.jsx(Xk,{className:"w-5 h-5 shrink-0"}),S.jsx("span",{className:"hidden md:block ml-3 font-medium",children:" (Builder)"})]}),S.jsxs(ao,{to:"/history",className:`flex items-center p-3 rounded-lg transition-colors ${e("/history")?"bg-purple-600/10 text-purple-500":"hover:bg-slate-800 hover:text-white"}`,children:[S.jsx(wD,{className:"w-5 h-5 shrink-0"}),S.jsx("span",{className:"hidden md:block ml-3 font-medium",children:" (History)"})]}),S.jsxs(ao,{to:"/materials",className:`flex items-center p-3 rounded-lg transition-colors ${e("/materials")?"bg-emerald-600/10 text-emerald-500":"hover:bg-slate-800 hover:text-white"}`,children:[S.jsx(kD,{className:"w-5 h-5 shrink-0"}),S.jsx("span",{className:"hidden md:block ml-3 font-medium",children:" (Assets)"})]}),S.jsxs(ao,{to:"/admin",className:`flex items-center p-3 rounded-lg transition-colors ${e("/admin")?"bg-blue-600/10 text-blue-500":"hover:bg-slate-800 hover:text-white"}`,children:[S.jsx(oj,{className:"w-5 h-5 shrink-0"}),S.jsx("span",{className:"hidden md:block ml-3 font-medium",children:" (Admin)"})]}),S.jsxs(ao,{to:"/tools",className:`flex items-center p-3 rounded-lg transition-colors ${e("/tools")?"bg-indigo-600/10 text-indigo-500":"hover:bg-slate-800 hover:text-white"}`,children:[S.jsx(cD,{className:"w-5 h-5 shrink-0"}),S.jsx("span",{className:"hidden md:block ml-3 font-medium",children:" (Smart Tools)"})]})]}),S.jsx("div",{className:"p-4 border-t border-slate-800 text-xs text-slate-500 text-center md:text-left",children:S.jsx("span",{className:"hidden md:inline",children:"v2.3.0 Enterprise"})})]})},g6=()=>S.jsx(QR,{children:S.jsx(c2,{children:S.jsxs("div",{className:"flex h-screen overflow-hidden bg-slate-50",children:[S.jsx(m6,{}),S.jsx("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:S.jsxs(UN,{children:[S.jsx(Aa,{path:"/",element:S.jsx(Sj,{})}),S.jsx(Aa,{path:"/admin",element:S.jsx(kj,{})}),S.jsx(Aa,{path:"/history",element:S.jsx(Tj,{})}),S.jsx(Aa,{path:"/materials",element:S.jsx(Ej,{})}),S.jsx(Aa,{path:"/tools",element:S.jsx(p6,{})})]})})]})})}),O_=document.getElementById("root");if(!O_)throw new Error("Could not find root element to mount to");const y6=PO.createRoot(O_);y6.render(S.jsx(Pr.StrictMode,{children:S.jsx(g6,{})}));
